(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6623:function(e,t,s){Promise.resolve().then(s.bind(s,4935))},4935:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eh}});var a=s(7437),r=s(2265),n=s(9734),l=s(2548),i=s(7442),c=s(1994),o=s(3335);function d(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,o.m6)((0,c.W)(t))}var m=s(6175),u=s(2935);function x(){var e,t,s;let[c,o]=(0,r.useState)([]),[x,g]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),{currentWorkflow:b,currentStep:y,steps:f}=(0,u.D)(),j=async e=>{var t;if(e.preventDefault(),!x.trim()||h)return;let s={id:Date.now().toString(),role:"user",content:x,timestamp:new Date().toISOString(),workflowStep:b?"Step ".concat(y+1,": ").concat(null===(t=f[y])||void 0===t?void 0:t.title):void 0};o(e=>[...e,s]),g(""),p(!0);try{let e=await fetch("/api/mere",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:x})});if(!e.ok)throw Error("Failed to get response from Mere");let t=await e.json();o(e=>{var s;return[...e,{...t,aiProcessing:!0,workflowStep:b?"AI Processing: ".concat(null===(s=f[y])||void 0===s?void 0:s.title):void 0}]})}catch(e){m.Am.error("Failed to get response from Mere"),console.error("Error in Mere chat:",e)}finally{p(!1)}};return(0,a.jsxs)("div",{className:"flex h-full flex-col",children:[b&&(0,a.jsx)("div",{className:"bg-blue-50 border-b border-blue-200 p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-700",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Active Workflow: ",null===(e=f[y])||void 0===e?void 0:e.title]}),(null===(t=f[y])||void 0===t?void 0:t.aiAssisted)&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 rounded-full text-xs",children:[(0,a.jsx)(l.Z,{className:"h-3 w-3"}),"AI Assisted"]})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,a.jsxs)("div",{className:"mx-auto max-w-3xl space-y-4",children:[0===c.length&&(0,a.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,a.jsx)("p",{className:"text-lg font-medium",children:"Welcome to Mere"}),(0,a.jsx)("p",{className:"text-sm",children:"Ask me anything to get started"}),b&&(0,a.jsxs)("p",{className:"text-xs mt-2 text-blue-600",children:["Currently assisting with: ",null===(s=f[y])||void 0===s?void 0:s.title]})]}),c.map(e=>(0,a.jsx)("div",{className:d("flex w-full","assistant"===e.role?"justify-start":"justify-end"),children:(0,a.jsxs)("div",{className:"max-w-[80%]",children:[e.workflowStep&&(0,a.jsx)("div",{className:"text-xs text-muted-foreground mb-1 px-1",children:e.workflowStep}),(0,a.jsxs)("div",{className:d("rounded-lg px-4 py-2 relative","assistant"===e.role?"bg-accent text-accent-foreground":"bg-primary text-primary-foreground"),children:[e.aiProcessing&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(n.Z,{className:"h-2 w-2 text-white animate-spin"})})}),(0,a.jsx)("p",{children:e.content})]})]})},e.id)),h&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-accent rounded-lg px-4 py-2 text-accent-foreground",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 animate-bounce rounded-full bg-current"}),(0,a.jsx)("div",{className:"h-2 w-2 animate-bounce rounded-full bg-current [animation-delay:0.2s]"}),(0,a.jsx)("div",{className:"h-2 w-2 animate-bounce rounded-full bg-current [animation-delay:0.4s]"})]})})})]})}),(0,a.jsx)("div",{className:"border-t bg-background p-4",children:(0,a.jsx)("form",{onSubmit:j,className:"mx-auto max-w-3xl",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:x,onChange:e=>g(e.target.value),placeholder:"Ask me anything...",className:"flex-1 rounded-lg border bg-background px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary"}),(0,a.jsx)("button",{type:"submit",disabled:!x.trim()||h,className:"rounded-lg bg-primary p-2 text-primary-foreground hover:bg-primary/90 disabled:opacity-50",children:(0,a.jsx)(i.Z,{className:"h-5 w-5"})})]})})})]})}var g=s(3810),h=s(3910),p=s(2700),b=s(2871),y=s(8818),f=s(3686),j=s(9672);let v=[{id:"notebook",name:"Notebook",icon:b.Z,href:"/notebook"},{id:"marathon",name:"Marathon",icon:y.Z,href:"/marathon"},{id:"yonder",name:"Yonder",icon:f.Z,href:"/yonder"},{id:"junction",name:"Junction",icon:j.Z,href:"/junction"}];function N(e){let{isCollapsed:t}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:d("px-2",t?"sr-only":""),children:(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Apps"})}),(0,a.jsx)("nav",{className:"grid gap-1",children:v.map(e=>(0,a.jsxs)("a",{href:e.href,className:d("flex items-center gap-3 rounded-lg px-3 py-2 text-gray-500 transition-all hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-50",t?"justify-center":""),children:[(0,a.jsx)(e.icon,{className:"h-5 w-5"}),!t&&(0,a.jsx)("span",{children:e.name})]},e.id))})]})}var w=s(3836),k=s(8217);let C=[{id:"1",title:"Research on AI Memory Systems",timestamp:"2 hours ago",isActive:!0},{id:"2",title:"Project Planning",timestamp:"Yesterday",isActive:!1},{id:"3",title:"Meeting Notes",timestamp:"2 days ago",isActive:!1}];function S(e){let{isCollapsed:t}=e,[s]=(0,r.useState)(C);return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:d("flex items-center justify-between px-2",t?"sr-only":""),children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Sessions"}),(0,a.jsx)("button",{className:"rounded-lg p-1 hover:bg-accent",children:(0,a.jsx)(w.Z,{className:"h-5 w-5"})})]}),(0,a.jsx)("nav",{className:"grid gap-1",children:s.map(e=>(0,a.jsxs)("a",{href:"/chat/".concat(e.id),className:d("flex items-center gap-3 rounded-lg px-3 py-2 text-gray-500 transition-all hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-50",e.isActive&&"bg-accent text-accent-foreground",t?"justify-center":""),children:[(0,a.jsx)(k.Z,{className:"h-5 w-5"}),!t&&(0,a.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,a.jsx)("span",{className:"text-sm",children:e.title}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:e.timestamp})]})]},e.id))})]})}function D(e){let{onViewChange:t,currentView:s}=e,[n,l]=(0,r.useState)(!1);return(0,a.jsxs)(g.E.div,{initial:!1,animate:{width:n?"4rem":"20rem"},className:"relative flex h-full flex-col border-r bg-card",children:[(0,a.jsx)("button",{onClick:()=>l(!n),className:"absolute -right-4 top-8 z-50 flex h-8 w-8 items-center justify-center rounded-full border bg-background shadow-sm",children:n?(0,a.jsx)(h.Z,{className:"h-4 w-4"}):(0,a.jsx)(p.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex-1 space-y-4 overflow-auto p-4",children:[!n&&t&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("button",{onClick:()=>t("dashboard"),className:"w-full text-left p-2 rounded-lg transition-colors ".concat("dashboard"===s?"bg-primary text-primary-foreground":"hover:bg-accent"),children:"Dashboard"}),(0,a.jsx)("button",{onClick:()=>t("chat"),className:"w-full text-left p-2 rounded-lg transition-colors ".concat("chat"===s?"bg-primary text-primary-foreground":"hover:bg-accent"),children:"Chat with Mere"})]}),(0,a.jsx)(N,{isCollapsed:n}),(0,a.jsx)(S,{isCollapsed:n})]})]})}var A=s(7653),T=s(4823),Z=s(7842),E=s(2484),P=s(322),M=s(2087),R=s(7233),F=s(196),z=s(5707),I=s(7165),O=s(6310),B=s(3393),W=s(3902),L=s(6503);function U(e){let{isOpen:t,error:s,isRecovering:n,onRetry:l,onRollback:i,onSkip:c,onExit:o,onClose:d}=e;if(!s)return null;let m=s.recoverable&&s.retryCount<s.maxRetries;return(0,a.jsx)(F.u,{appear:!0,show:t,as:r.Fragment,children:(0,a.jsxs)(z.Vq,{as:"div",className:"relative z-50",onClose:d,children:[(0,a.jsx)(F.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,a.jsx)(F.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(z.Vq.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-lg bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(()=>{switch(s.type){case"network":return(0,a.jsx)("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(Z.Z,{className:"h-6 w-6 text-yellow-600"})});case"permission":return(0,a.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(Z.Z,{className:"h-6 w-6 text-red-600"})});default:return(0,a.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(Z.Z,{className:"h-6 w-6 text-orange-600"})})}})(),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(z.Vq.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:(()=>{switch(s.type){case"network":return"Network Error";case"permission":return"Permission Error";case"validation":return"Validation Error";case"processing":return"Processing Error";case"timeout":return"Timeout Error";default:return"Unexpected Error"}})()}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Error occurred in: ",(0,a.jsx)("span",{className:"font-medium",children:s.step})]}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-2",children:s.message}),s.retryCount>0&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Retry attempts: ",s.retryCount,"/",s.maxRetries]}),s.context&&(0,a.jsxs)("details",{className:"mt-3",children:[(0,a.jsx)("summary",{className:"text-xs text-gray-500 cursor-pointer",children:"Technical details"}),(0,a.jsx)("pre",{className:"text-xs text-gray-600 mt-1 bg-gray-50 p-2 rounded overflow-auto",children:JSON.stringify(s.context,null,2)})]})]})]}),(0,a.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(I.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"mt-6 flex flex-col gap-2",children:[m&&(0,a.jsxs)("button",{onClick:async()=>{await l(),d()},disabled:n,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[n?(0,a.jsx)(O.Z,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(O.Z,{className:"h-4 w-4"}),"Retry (",s.retryCount,"/",s.maxRetries,")"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{i(),d()},className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[(0,a.jsx)(B.Z,{className:"h-4 w-4"}),"Go Back"]}),c&&"validation"!==s.type&&(0,a.jsxs)("button",{onClick:()=>{c(),d()},className:"flex items-center justify-center gap-2 px-4 py-2 bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200",children:[(0,a.jsx)(W.Z,{className:"h-4 w-4"}),"Skip Step"]})]}),(0,a.jsxs)("button",{onClick:()=>{o(),d()},className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200",children:[(0,a.jsx)(L.Z,{className:"h-4 w-4"}),"Exit Workflow"]})]}),"network"===s.type&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-blue-700",children:[(0,a.jsx)("strong",{children:"Tip:"})," Check your internet connection and try again."]})}),"validation"===s.type&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-yellow-700",children:[(0,a.jsx)("strong",{children:"Tip:"})," Please check your input and correct any errors before proceeding."]})})]})})})})]})})}var V=s(9035);function G(e){let{isOpen:t,workflowTitle:s,workflowSummary:n,onTakeover:i,onSummarize:c,onClose:o}=e,[d,m]=(0,r.useState)(null);return(0,a.jsx)(F.u,{appear:!0,show:t,as:r.Fragment,children:(0,a.jsxs)(z.Vq,{as:"div",className:"relative z-50",onClose:o,children:[(0,a.jsx)(F.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,a.jsx)(F.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(z.Vq.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-lg bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(M.Z,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(z.Vq.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Mere AI Assistant"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:['Help with "',s,'" workflow']})]})]}),(0,a.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(I.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Workflow Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Current Step"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:n.currentStep})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Estimated Time Remaining"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:n.estimatedTimeRemaining})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Completed (",n.completedSteps.length,")"]}),(0,a.jsx)("ul",{className:"text-sm text-gray-600 space-y-1",children:n.completedSteps.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Remaining (",n.remainingSteps.length,")"]}),(0,a.jsx)("ul",{className:"text-sm text-gray-600 space-y-1",children:n.remainingSteps.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-300 rounded-full"}),e]},t))})]})]})]}),n.suggestedActions.length>0&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"AI Suggestions"}),(0,a.jsx)("ul",{className:"text-sm text-blue-800 space-y-1",children:n.suggestedActions.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"w-4 h-4 bg-blue-200 rounded-full flex items-center justify-center text-xs font-medium text-blue-700 mt-0.5",children:t+1}),e]},t))})]}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"How can Mere help?"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,a.jsx)("button",{onClick:()=>m("takeover"),className:"p-4 border-2 rounded-lg text-left transition-all ".concat("takeover"===d?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(V.Z,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900",children:"Complete Workflow"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Let Mere take over and complete the remaining steps automatically using your existing data and preferences."}),(0,a.jsxs)("p",{className:"text-xs text-blue-600 mt-2",children:["Estimated completion: ",n.estimatedTimeRemaining]})]})]})}),(0,a.jsx)("button",{onClick:()=>m("summarize"),className:"p-4 border-2 rounded-lg text-left transition-all ".concat("summarize"===d?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(j.Z,{className:"h-5 w-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900",children:"Summarize Progress"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Generate a detailed summary of your progress and provide recommendations for next steps."}),(0,a.jsx)("p",{className:"text-xs text-green-600 mt-2",children:"You retain full control • Continue manually when ready"})]})]})})]})]}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),(0,a.jsxs)("div",{className:"text-xs text-yellow-800",children:[(0,a.jsx)("p",{className:"font-medium",children:"Privacy Notice"}),(0,a.jsx)("p",{children:"Mere will only access data you've already provided in this workflow. No external data will be accessed without explicit permission."})]})]})}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,a.jsxs)("button",{onClick:()=>{"takeover"===d?i():"summarize"===d&&c(),o()},disabled:!d,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(M.Z,{className:"h-4 w-4"}),"takeover"===d?"Let Mere Complete":"summarize"===d?"Generate Summary":"Select Action"]})]})]})})})})]})})}function q(e){let{className:t}=e,{currentWorkflow:s,currentStep:l,totalSteps:i,steps:c,workflowData:o,isLoading:x,nextStep:g,previousStep:h,finishWorkflow:p,cancelWorkflow:b,errors:y,isRecovering:f,getErrorSummary:j,handleAsyncOperation:v}=(0,u.D)(),[N,w]=(0,r.useState)(!1),[k,C]=(0,r.useState)(null),[S,D]=(0,r.useState)(!1),A=j(),T=()=>{var e;let t=c.slice(0,l).map(e=>e.title),s=c.slice(l+1).map(e=>e.title);return{currentStep:(null===(e=c[l])||void 0===e?void 0:e.title)||"Unknown",completedSteps:t,remainingSteps:s,workflowData:o,estimatedTimeRemaining:"".concat(2*s.length," minutes"),suggestedActions:["Complete remaining steps with smart defaults","Auto-fill forms based on previous inputs","Skip optional steps to speed up completion","Generate summary and next action recommendations"]}};(0,r.useEffect)(()=>{let e=e=>{s&&!N&&("ArrowRight"===e.key&&l<i-1&&A.canProceed?g():"ArrowLeft"===e.key&&l>0?h():"Escape"===e.key?b():("m"===e.key||"M"===e.key)&&D(!0))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[s,l,i,g,h,b,N,A]),(0,r.useEffect)(()=>{y.length>0&&!N&&(C(y[y.length-1]),w(!0))},[y,N]);let E=async()=>{k&&await v(async()=>(await new Promise(e=>setTimeout(e,1e3)),!0),k.step)},F=async()=>{let e=i-l-1;m.Am.success("Mere is taking over the workflow...");for(let s=0;s<e;s++)if(await new Promise(e=>setTimeout(e,1500)),l<i-1){var t;g(),m.Am.success("Mere completed: ".concat(null===(t=c[l+s])||void 0===t?void 0:t.title))}m.Am.success("Workflow completed by Mere!"),setTimeout(()=>p(),1e3)};if(!s)return null;let z=c[l],I=(l+1)/i*100;return(0,a.jsxs)("div",{className:d("bg-white border rounded-lg shadow-sm",t),children:[(0,a.jsxs)("div",{className:"p-4 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-medium",children:null==z?void 0:z.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[A.hasErrors&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-red-600",children:[(0,a.jsx)(Z.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[A.total," error",1!==A.total?"s":""]})]}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[l+1," of ",i]})]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:d("h-2 rounded-full transition-all duration-300",A.hasErrors&&!A.canProceed?"bg-red-500":"bg-primary"),style:{width:"".concat(I,"%")}})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(null==z?void 0:z.aiAssisted)&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{children:"Mere is assisting"})]}),A.hasErrors&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[A.retryable>0&&(0,a.jsxs)("span",{className:"text-yellow-600",children:[A.retryable," retryable"]}),A.critical>0&&(0,a.jsxs)("span",{className:"text-red-600",children:[A.critical," critical"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[f&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{children:"Recovering..."})]}),(0,a.jsxs)("button",{onClick:()=>D(!0),className:"flex items-center gap-2 px-3 py-1 text-sm bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",title:"Press M to open Mere assistant",children:[(0,a.jsx)(M.Z,{className:"h-4 w-4"}),"Ask Mere"]})]})]})]}),(0,a.jsxs)("div",{className:"p-4",children:[(null==z?void 0:z.description)&&(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:z.description}),null==z?void 0:z.component,x&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Processing..."})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-t bg-gray-50",children:[(0,a.jsx)("button",{onClick:h,disabled:0===l||f,className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:c.map((e,t)=>(0,a.jsx)("div",{className:d("w-2 h-2 rounded-full",t<l?"bg-green-500":t===l?A.hasErrors&&!A.canProceed?"bg-red-500":"bg-primary":"bg-gray-300")},t))}),l===i-1?(0,a.jsxs)("button",{onClick:p,disabled:!A.canProceed||f,className:"px-3 py-2 text-sm bg-primary text-primary-foreground rounded-md hover:bg-primary/90 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(R.Z,{className:"h-4 w-4"}),"Complete"]}):(0,a.jsx)("button",{onClick:g,disabled:!A.canProceed||f,className:"px-3 py-2 text-sm bg-primary text-primary-foreground rounded-md hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,a.jsxs)("div",{className:"px-4 py-2 text-xs text-muted-foreground border-t",children:["Progress auto-saved • Use ← → arrows to navigate • Press Esc to cancel • Press M for Mere",A.hasErrors&&(0,a.jsx)("span",{className:"text-red-600",children:" • Resolve errors to continue"})]}),(0,a.jsx)(U,{isOpen:N,error:k,isRecovering:f,onRetry:E,onRollback:h,onSkip:()=>{l<i-1&&g()},onExit:b,onClose:()=>{w(!1),C(null)}}),(0,a.jsx)(G,{isOpen:S,workflowTitle:s||"Unknown Workflow",workflowSummary:T(),onTakeover:F,onSummarize:()=>{let e=T(),t="\nWorkflow Summary: ".concat(s,"\n\nProgress: ").concat(e.completedSteps.length,"/").concat(c.length," steps completed\n\n✅ Completed:\n").concat(e.completedSteps.map(e=>"• ".concat(e)).join("\n"),"\n\n⏳ Remaining:\n").concat(e.remainingSteps.map(e=>"• ".concat(e)).join("\n"),"\n\n\uD83E\uDD16 AI Recommendations:\n").concat(e.suggestedActions.map((e,t)=>"".concat(t+1,". ").concat(e)).join("\n"),"\n\nEstimated completion time: ").concat(e.estimatedTimeRemaining,"\n    ").trim();navigator.clipboard.writeText(t),m.Am.success("Workflow summary copied to clipboard!")},onClose:()=>D(!1)})]})}var K=s(2907),H=s(7011);function J(){let{updateWorkflowData:e,nextStep:t,handleAsyncOperation:s}=(0,u.D)(),[n,l]=(0,r.useState)(""),i=[{id:"network",name:"Network Error",description:"Simulate a network connection failure",icon:K.Z,color:"text-yellow-600",bgColor:"bg-yellow-50"},{id:"permission",name:"Permission Error",description:"Simulate insufficient permissions",icon:H.Z,color:"text-red-600",bgColor:"bg-red-50"},{id:"validation",name:"Validation Error",description:"Simulate invalid input data",icon:Z.Z,color:"text-orange-600",bgColor:"bg-orange-50"},{id:"success",name:"Success Path",description:"Complete the step successfully",icon:Z.Z,color:"text-green-600",bgColor:"bg-green-50"}],c=async()=>{n&&(e({errorDemo:n}),"success"===n?(await s(async()=>(await new Promise(e=>setTimeout(e,1e3)),{success:!0}),"Demo Step",{errorType:n})).success&&t():await s(async()=>{switch(await new Promise(e=>setTimeout(e,1e3)),n){case"network":throw Error("Network request failed: Unable to connect to server");case"permission":throw Error("Permission denied: Insufficient access rights");case"validation":throw Error("Validation failed: Invalid input data format");default:throw Error("Unknown error occurred")}},"Demo Step",{errorType:n}))};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Error Handling Demo"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Select an error type to see how the workflow handles different failure scenarios. Each error type demonstrates different recovery options."})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:i.map(e=>(0,a.jsx)("button",{onClick:()=>l(e.id),className:"p-4 border-2 rounded-lg text-left transition-all ".concat(n===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg ".concat(e.bgColor," flex items-center justify-center"),children:(0,a.jsx)(e.icon,{className:"h-5 w-5 ".concat(e.color)})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),"network"===e.id&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Retryable • Max 3 attempts • Rollback available"}),"permission"===e.id&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Non-retryable • Rollback only • Exit available"}),"validation"===e.id&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Retryable • Max 1 attempt • No skip option"})]})]})},e.id))}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"How Error Recovery Works"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Retry:"})," Attempts the failed operation again (if retryable)"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Rollback:"})," Returns to the previous step"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Skip:"})," Continues without completing the step (when available)"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Exit:"})," Cancels the entire workflow"]})]})]}),(0,a.jsx)("button",{onClick:c,disabled:!n,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"success"===n?"Continue Successfully":"Trigger Error"})]})}function _(){var e;let{updateWorkflowData:t,nextStep:s,finishWorkflow:n}=(0,u.D)(),[l,i]=(0,r.useState)({id:Date.now().toString(),title:"",nodes:[],reasoning:""}),[c,o]=(0,r.useState)([]),[m,x]=(0,r.useState)(0),g=[{id:"1",title:"Project Meeting Notes",content:"Discussed Q4 goals and resource allocation",type:"source",connections:[],confidence:.9},{id:"2",title:"Budget Analysis",content:"Current budget allows for 3 new hires",type:"source",connections:[],confidence:.85},{id:"3",title:"Market Research",content:"Customer demand increased 25% this quarter",type:"source",connections:[],confidence:.8},{id:"4",title:"Team Feedback",content:"Engineering team needs additional support",type:"source",connections:[],confidence:.75}],p=e=>{m>=4||o(t=>{let s=t.includes(e),a=s?t.filter(t=>t!==e):[...t,e];return s?x(e=>e-1):x(e=>e+1),a})},b=l.nodes.length>0&&l.reasoning&&m<=4;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-blue-900",children:"Memory Chain Generation"}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"Create reasoning flows in ≤ 4 actions"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-900",children:[m,"/",4]}),(0,a.jsx)("div",{className:"text-xs text-blue-600",children:"actions used"})]})]}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(m/4*100,"%")}})})})]}),(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-medium",children:"1"}),"Select Source Memories"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3",children:g.map(e=>(0,a.jsx)("button",{onClick:()=>p(e.id),disabled:m>=4&&!c.includes(e.id),className:d("p-3 border-2 rounded-lg text-left transition-all",c.includes(e.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300",m>=4&&!c.includes(e.id)?"opacity-50 cursor-not-allowed":""),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.content})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-3",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[Math.round(100*e.confidence),"%"]}),c.includes(e.id)&&(0,a.jsx)(R.Z,{className:"h-4 w-4 text-blue-600"})]})]})},e.id))})]}),c.length>=2&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-sm font-medium",children:"2"}),"Generate Reasoning"]}),l.reasoning?(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-medium text-green-900 mb-2",children:"AI-Generated Reasoning"}),(0,a.jsx)("p",{className:"text-sm text-green-800 whitespace-pre-line",children:l.reasoning})]}):(0,a.jsxs)("button",{onClick:()=>{var e,t,s,a;if(m>=4)return;let r=g.filter(e=>c.includes(e.id)),n="Based on the selected memories, I can see a clear pattern:\n\n1. ".concat(null===(e=r[0])||void 0===e?void 0:e.title,": ").concat(null===(t=r[0])||void 0===t?void 0:t.content,"\n2. ").concat(null===(s=r[1])||void 0===s?void 0:s.title,": ").concat(null===(a=r[1])||void 0===a?void 0:a.content,"\n\nThese memories suggest that we should prioritize hiring to meet increased demand while staying within budget constraints.");i(e=>({...e,reasoning:n,nodes:r})),x(e=>e+1)},disabled:m>=4,className:"w-full p-4 border-2 border-dashed border-green-300 rounded-lg text-green-700 hover:bg-green-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,a.jsx)(M.Z,{className:"h-5 w-5"}),"Generate AI Reasoning (",m+1,"/",4,")"]})]}),l.reasoning&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center text-sm font-medium",children:"3"}),"Add Conclusion"]}),l.nodes.some(e=>"conclusion"===e.type)?(0,a.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-medium text-purple-900 mb-2",children:"Strategic Conclusion"}),(0,a.jsx)("p",{className:"text-sm text-purple-800",children:null===(e=l.nodes.find(e=>"conclusion"===e.type))||void 0===e?void 0:e.content})]}):(0,a.jsxs)("button",{onClick:()=>{if(m>=4)return;let e={id:"conclusion-"+Date.now(),title:"Strategic Recommendation",content:"Hire 2 engineers and 1 designer to support Q4 goals while maintaining budget compliance",type:"conclusion",connections:c,confidence:.85};i(t=>({...t,nodes:[...t.nodes,e],title:"Q4 Hiring Strategy Chain"})),x(e=>e+1)},disabled:m>=4,className:"w-full p-4 border-2 border-dashed border-purple-300 rounded-lg text-purple-700 hover:bg-purple-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-5 w-5"}),"Add Strategic Conclusion (",m+1,"/",4,")"]})]}),l.nodes.length>0&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 bg-gray-100 text-gray-600 rounded-full flex items-center justify-center text-sm font-medium",children:"4"}),"Memory Chain Visualization"]}),(0,a.jsx)("div",{className:"space-y-3",children:l.nodes.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:d("w-3 h-3 rounded-full","source"===e.type?"bg-blue-500":"reasoning"===e.type?"bg-green-500":"bg-purple-500")}),(0,a.jsxs)("div",{className:"flex-1 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h6",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.content})]}),t<l.nodes.length-1&&(0,a.jsx)(h.Z,{className:"h-4 w-4 text-gray-400"})]},e.id))})]}),b&&(0,a.jsxs)("button",{onClick:()=>{t({memoryChain:l,actionCount:m}),n()},className:"w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center justify-center gap-2",children:[(0,a.jsx)(E.Z,{className:"h-5 w-5"}),"Complete Memory Chain (",m,"/",4," actions)"]}),(0,a.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Chain Progress"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("div",{className:d("w-2 h-2 rounded-full",c.length>=2?"bg-green-500":"bg-gray-300")}),(0,a.jsxs)("span",{className:c.length>=2?"text-green-700":"text-gray-500",children:["Select source memories (",c.length,"/2+)"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("div",{className:d("w-2 h-2 rounded-full",l.reasoning?"bg-green-500":"bg-gray-300")}),(0,a.jsx)("span",{className:l.reasoning?"text-green-700":"text-gray-500",children:"Generate AI reasoning"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("div",{className:d("w-2 h-2 rounded-full",l.nodes.some(e=>"conclusion"===e.type)?"bg-green-500":"bg-gray-300")}),(0,a.jsx)("span",{className:l.nodes.some(e=>"conclusion"===e.type)?"text-green-700":"text-gray-500",children:"Add strategic conclusion"})]})]})]})]})}var Q=s(9967),Y=s(3176),$=s(9833),X=s(1442);function ee(){let{updateWorkflowData:e,nextStep:t,handleAsyncOperation:s,finishWorkflow:n}=(0,u.D)(),[i,c]=(0,r.useState)([]),[o,x]=(0,r.useState)(!1),[g,h]=(0,r.useState)(new Set),[p,b]=(0,r.useState)(new Map),[y,f]=(0,r.useState)(new Set),v=(0,r.useRef)(null),N={"application/pdf":{icon:j.Z,label:"PDF Document",color:"text-red-600"},"application/msword":{icon:j.Z,label:"Word Document",color:"text-blue-600"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{icon:j.Z,label:"Word Document",color:"text-blue-600"},"text/plain":{icon:j.Z,label:"Text File",color:"text-gray-600"},"text/markdown":{icon:j.Z,label:"Markdown File",color:"text-purple-600"},"image/jpeg":{icon:Q.Z,label:"JPEG Image",color:"text-green-600"},"image/png":{icon:Q.Z,label:"PNG Image",color:"text-green-600"},"audio/mpeg":{icon:Y.Z,label:"MP3 Audio",color:"text-orange-600"},"audio/wav":{icon:Y.Z,label:"WAV Audio",color:"text-orange-600"},"video/mp4":{icon:$.Z,label:"MP4 Video",color:"text-purple-600"},"video/quicktime":{icon:$.Z,label:"MOV Video",color:"text-purple-600"}},w=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?x(!0):"dragleave"===e.type&&x(!1)},[]),k=(0,r.useCallback)(async e=>{e.preventDefault(),e.stopPropagation(),x(!1);let t=Array.from(e.dataTransfer.files);await S(t)},[]),C=async e=>{let t=Array.from(e.target.files||[]);await S(t)},S=async e=>{let t=e.map(e=>({id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:e.name,size:e.size,type:e.type,lastModified:e.lastModified}));for(let s of(c(e=>[...e,...t]),t)){let t=e.find(e=>e.name===s.name&&e.size===s.size);t&&D(s,t)}},D=async(e,t)=>{h(t=>{let s=new Set(t);return s.add(e.id),s});let a=await s(async()=>{let s;if(await new Promise(e=>setTimeout(e,2e3+3e3*Math.random())),e.type.startsWith("text/")||e.type.includes("document")){let a="text/plain"===e.type?await t.text():"Extracted text content from ".concat(e.name,". This would contain the actual document content after OCR/parsing.");s={title:e.name.replace(/\.[^/.]+$/,""),content:a,metadata:{fileType:"document",wordCount:a.split(" ").length,language:"en",confidence:.92},tags:["document","uploaded","text"],summary:"Document summary: ".concat(a.substring(0,150),"...")}}else if(e.type.startsWith("audio/"))s={title:"Transcript: ".concat(e.name),content:"[Transcribed audio content from ".concat(e.name,"]\n\nSpeaker 1: Welcome to our meeting today.\nSpeaker 2: Thank you for joining us.\n[AI would provide actual transcription here]"),metadata:{fileType:"audio",duration:"15:30",language:"en",confidence:.87},tags:["audio","transcript","meeting"],summary:"Audio transcript covering meeting discussion and key points."};else if(e.type.startsWith("image/"))s={title:"Image Analysis: ".concat(e.name),content:"[OCR extracted text from ".concat(e.name,"]\n\nDetected text content:\n- Visual elements described\n- Text extraction results\n[AI would provide actual OCR results here]"),metadata:{fileType:"image",language:"en",confidence:.78},tags:["image","ocr","visual"],summary:"Image analysis with extracted text and visual content description."};else if(e.type.startsWith("video/"))s={title:"Video Analysis: ".concat(e.name),content:"[Video content analysis from ".concat(e.name,"]\n\nVideo transcript:\n[Extracted audio would be transcribed here]\n\nVisual analysis:\n[Scene descriptions and key frames]"),metadata:{fileType:"video",duration:"8:45",language:"en",confidence:.82},tags:["video","multimedia","analysis"],summary:"Video content analysis including transcript and visual elements."};else throw Error("Unsupported file type: ".concat(e.type));return s},"Parse ".concat(e.name),{fileName:e.name,fileType:e.type});h(t=>{let s=new Set(t);return s.delete(e.id),s}),a.success&&a.data&&(b(t=>{let s=new Map(t);return s.set(e.id,a.data),s}),f(t=>{let s=new Set(t);return s.add(e.id),s}),m.Am.success("Successfully parsed ".concat(e.name)))},T=e=>{f(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},Z=e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]},E=e=>{let t=N[e];return t?t.icon:j.Z},P=e=>{let t=N[e];return t?t.label:"Unknown File"},R=e=>{let t=N[e];return t?t.color:"text-gray-600"};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:d("border-2 border-dashed rounded-lg p-8 text-center transition-colors",o?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragEnter:w,onDragLeave:w,onDragOver:w,onDrop:k,children:[(0,a.jsx)("input",{ref:v,type:"file",multiple:!0,onChange:C,accept:".pdf,.doc,.docx,.txt,.md,.jpg,.jpeg,.png,.mp3,.wav,.mp4,.mov",className:"hidden"}),(0,a.jsx)(A.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Files for Auto-Processing"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Drag and drop files here, or click to browse. Files will be automatically parsed and converted to memories."}),(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.click()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Choose Files"}),(0,a.jsx)("div",{className:"mt-4 text-sm text-gray-500",children:"Supported: PDF, Word, Text, Markdown, Images (JPG, PNG), Audio (MP3, WAV), Video (MP4, MOV)"})]}),i.length>0&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b bg-gray-50",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Uploaded Files"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[i.length," file",1!==i.length?"s":""," uploaded •",p.size," processed •",y.size," selected for memory creation"]})]}),(0,a.jsx)("div",{className:"divide-y",children:i.map(e=>{let t=E(e.type),s=g.has(e.id),r=p.get(e.id),n=y.has(e.id);return(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:d("w-10 h-10 rounded-lg flex items-center justify-center",r?"bg-green-100":s?"bg-blue-100":"bg-gray-100"),children:s?(0,a.jsx)(M.Z,{className:"h-5 w-5 text-blue-600 animate-pulse"}):r?(0,a.jsx)(X.Z,{className:"h-5 w-5 text-green-600"}):(0,a.jsx)(t,{className:d("h-5 w-5",R(e.type))})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[P(e.type)," • ",Z(e.size)]}),s&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-blue-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),(0,a.jsx)("span",{children:"Processing file..."})]}),r&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-600 mb-1",children:[(0,a.jsx)(X.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["Parsed successfully • ",Math.round(100*r.metadata.confidence),"% confidence"]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:r.summary}),(0,a.jsx)("div",{className:"flex gap-1 mt-2",children:r.tags.slice(0,3).map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:e},e))})]})]}),r&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{let e="Title: ".concat(r.title,"\n\nContent:\n").concat(r.content,"\n\nSummary:\n").concat(r.summary,"\n\nTags: ").concat(r.tags.join(", "));navigator.clipboard.writeText(e),m.Am.success("Content copied to clipboard")},className:"p-1 text-gray-400 hover:text-gray-600",title:"Preview content",children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:n,onChange:()=>T(e.id),className:"sr-only"}),(0,a.jsx)("div",{className:d("w-4 h-4 border-2 rounded flex items-center justify-center",n?"bg-blue-600 border-blue-600":"border-gray-300"),children:n&&(0,a.jsx)(X.Z,{className:"h-3 w-3 text-white"})})]})]})]})})]})},e.id)})})]}),p.size>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[y.size," file",1!==y.size?"s":""," selected for memory creation"]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>f(new Set(p.keys())),className:"px-4 py-2 text-sm text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Select All"}),(0,a.jsxs)("button",{onClick:()=>{let t=Array.from(y).map(e=>({id:e,...p.get(e)})).filter(e=>e.title);e({uploadedFiles:i.filter(e=>y.has(e.id)),parsedContent:t,memoryCount:t.length}),m.Am.success("Created ".concat(t.length," memories from uploaded files")),n()},disabled:0===y.size,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(M.Z,{className:"h-4 w-4"}),"Create ",y.size," Memor",1!==y.size?"ies":"y"]})]})]}),(i.length>0||g.size>0)&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Processing Statistics"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-blue-600 font-medium",children:i.length}),(0,a.jsx)("div",{className:"text-blue-700",children:"Files Uploaded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-blue-600 font-medium",children:g.size}),(0,a.jsx)("div",{className:"text-blue-700",children:"Currently Processing"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-blue-600 font-medium",children:p.size}),(0,a.jsx)("div",{className:"text-blue-700",children:"Successfully Parsed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-blue-600 font-medium",children:y.size}),(0,a.jsx)("div",{className:"text-blue-700",children:"Ready for Memory"})]})]})]})]})}var et=s(9785),es=s(6813),ea=s(8931);function er(){var e;let{updateWorkflowData:t,nextStep:s,finishWorkflow:n,handleAsyncOperation:i}=(0,u.D)(),[c,o]=(0,r.useState)({title:"",description:"",category:"general",privacy:"private",template:"blank",tags:[],color:"blue",collaborators:[]}),[x,g]=(0,r.useState)("setup"),[h,p]=(0,r.useState)(""),[y,f]=(0,r.useState)(!1),[v]=(0,r.useState)([{id:"blank",name:"Blank Notebook",description:"Start from scratch with a clean notebook",sections:["Notes"],icon:"\uD83D\uDCDD",color:"gray"},{id:"research",name:"Research Project",description:"Organize research with references, findings, and conclusions",sections:["Background","Research Notes","Sources","Analysis","Conclusions"],icon:"\uD83D\uDD0D",color:"blue"},{id:"meeting",name:"Meeting Notes",description:"Structure for meeting documentation and follow-ups",sections:["Agenda","Discussion Points","Decisions","Action Items"],icon:"\uD83E\uDD1D",color:"green"},{id:"learning",name:"Learning Journal",description:"Track learning progress with concepts, examples, and practice",sections:["Key Concepts","Examples","Practice Notes","Questions","Summary"],icon:"\uD83D\uDCDA",color:"purple"},{id:"project",name:"Project Planning",description:"Comprehensive project management and documentation",sections:["Overview","Requirements","Timeline","Resources","Progress","Review"],icon:"\uD83C\uDFAF",color:"orange"}]),N=[{id:"general",name:"General",icon:"\uD83D\uDCC4"},{id:"work",name:"Work",icon:"\uD83D\uDCBC"},{id:"personal",name:"Personal",icon:"\uD83D\uDC64"},{id:"education",name:"Education",icon:"\uD83C\uDF93"},{id:"research",name:"Research",icon:"\uD83D\uDD2C"},{id:"creative",name:"Creative",icon:"\uD83C\uDFA8"}],w=[{id:"blue",name:"Blue",class:"bg-blue-500"},{id:"green",name:"Green",class:"bg-green-500"},{id:"purple",name:"Purple",class:"bg-purple-500"},{id:"orange",name:"Orange",class:"bg-orange-500"},{id:"red",name:"Red",class:"bg-red-500"},{id:"gray",name:"Gray",class:"bg-gray-500"}],k=async()=>{if(!c.description.trim())return;f(!0);let e=await i(async()=>{await new Promise(e=>setTimeout(e,1500));let e=c.description.toLowerCase();return e.includes("meeting")||e.includes("discussion")?"Meeting Notes - "+new Date().toLocaleDateString():e.includes("research")||e.includes("study")?"Research Project: "+c.description.split(" ").slice(0,3).join(" "):e.includes("learn")||e.includes("course")?"Learning Journal: "+c.description.split(" ").slice(0,3).join(" "):e.includes("project")||e.includes("plan")?"Project: "+c.description.split(" ").slice(0,3).join(" "):c.description.split(" ").slice(0,4).join(" ").replace(/^\w/,e=>e.toUpperCase())},"Generate semantic title",{description:c.description});f(!1),e.success&&e.data&&(p(e.data),m.Am.success("Generated title suggestion!"))};(0,r.useEffect)(()=>{if(c.description.length>10){let e=setTimeout(k,1e3);return()=>clearTimeout(e)}},[c.description]);let C=e=>{e.trim()&&!c.tags.includes(e.trim())&&o(t=>({...t,tags:[...t.tags,e.trim()]}))},S=e=>{o(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},D=()=>v.find(e=>e.id===c.template)||v[0],A=c.title.trim()&&c.template;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:["Setup","Template","Content","Sharing"].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:d("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",x===e.toLowerCase()?"bg-blue-600 text-white":["setup","template","content","sharing"].indexOf(x)>t?"bg-green-500 text-white":"bg-gray-200 text-gray-600"),children:["setup","template","content","sharing"].indexOf(x)>t?(0,a.jsx)(R.Z,{className:"h-4 w-4"}):t+1}),(0,a.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:e}),t<3&&(0,a.jsx)("div",{className:"w-8 h-px bg-gray-300 mx-4"})]},e))}),"setup"===x&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5 text-blue-600"}),"Notebook Setup"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notebook Title *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:c.title,onChange:e=>o(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter notebook title..."}),h&&h!==c.title&&(0,a.jsxs)("button",{onClick:()=>o(e=>({...e,title:h})),className:"absolute right-2 top-2 px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:['Use: "',h.substring(0,20),'..."']})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("textarea",{value:c.description,onChange:e=>o(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Describe what this notebook will be used for..."}),y&&(0,a.jsxs)("div",{className:"absolute right-2 top-2 flex items-center gap-1 text-xs text-blue-600",children:[(0,a.jsx)(M.Z,{className:"h-3 w-3 animate-pulse"}),"Generating title..."]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Adding a description will help generate a smart title suggestion"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:N.map(e=>(0,a.jsxs)("button",{onClick:()=>o(t=>({...t,category:e.id})),className:d("p-3 border rounded-lg text-sm flex items-center gap-2 transition-colors",c.category===e.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:[(0,a.jsx)("span",{children:e.icon}),e.name]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Privacy"}),(0,a.jsx)("div",{className:"space-y-2",children:[{id:"private",name:"Private",desc:"Only you can access this notebook"},{id:"shared",name:"Shared",desc:"Share with specific people"},{id:"public",name:"Public",desc:"Anyone with the link can view"}].map(e=>(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,a.jsx)("input",{type:"radio",name:"privacy",value:e.id,checked:c.privacy===e.id,onChange:e=>o(t=>({...t,privacy:e.target.value})),className:"mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.desc})]})]},e.id))})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{onClick:()=>g("template"),disabled:!c.title.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue to Template"})})]})]}),"template"===x&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 text-blue-600"}),"Choose Template"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(e=>(0,a.jsx)("button",{onClick:()=>o(t=>({...t,template:e.id})),className:d("p-4 border-2 rounded-lg text-left transition-all",c.template===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"text-2xl",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Includes sections:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.sections.slice(0,3).map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:e},e)),e.sections.length>3&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:["+",e.sections.length-3," more"]})]})]})]}),c.template===e.id&&(0,a.jsx)(R.Z,{className:"h-5 w-5 text-blue-600"})]})},e.id))}),c.template&&(0,a.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Template Preview"}),(0,a.jsx)("div",{className:"space-y-2",children:D().sections.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(et.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-gray-700",children:e})]},e))})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>g("setup"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back"}),(0,a.jsx)("button",{onClick:()=>g("content"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Continue to Content"})]})]})]}),"content"===x&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(es.Z,{className:"h-5 w-5 text-blue-600"}),"Customize Content"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notebook Color"}),(0,a.jsx)("div",{className:"flex gap-2",children:w.map(e=>(0,a.jsx)("button",{onClick:()=>o(t=>({...t,color:e.id})),className:d("w-8 h-8 rounded-full border-2 transition-all",e.class,c.color===e.id?"border-gray-800 scale-110":"border-gray-300"),title:e.name},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:c.tags.map(e=>(0,a.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm flex items-center gap-1",children:[e,(0,a.jsx)("button",{onClick:()=>S(e),className:"text-blue-500 hover:text-blue-700",children:"\xd7"})]},e))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Add tag...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",onKeyDown:e=>{"Enter"===e.key&&(C(e.currentTarget.value),e.currentTarget.value="")}}),(0,a.jsx)("button",{onClick:e=>{let t=e.currentTarget.previousElementSibling;(null==t?void 0:t.value)&&(C(t.value),t.value="")},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Add"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>g("template"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back"}),(0,a.jsx)("button",{onClick:()=>g("sharing"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Continue to Sharing"})]})]})]}),"sharing"===x&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(ea.Z,{className:"h-5 w-5 text-blue-600"}),"Sharing & Collaboration"]}),(0,a.jsxs)("div",{className:"space-y-4",children:["shared"===c.privacy&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Collaborators"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"email",placeholder:"Enter email address...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",onKeyDown:e=>{"Enter"===e.key&&e.currentTarget.value&&(o(t=>({...t,collaborators:[...t.collaborators,e.currentTarget.value]})),e.currentTarget.value="")}}),(0,a.jsx)("div",{className:"space-y-1",children:c.collaborators.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e}),(0,a.jsx)("button",{onClick:()=>o(t=>({...t,collaborators:t.collaborators.filter(t=>t!==e)})),className:"text-red-500 hover:text-red-700 text-sm",children:"Remove"})]},e))})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-4",children:[(0,a.jsxs)("h5",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),"Notebook Preview"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:d("w-4 h-4 rounded",(w.find(e=>e.id===c.color)||w[0]).class)}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:c.title}),(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-200 text-gray-600 text-xs rounded",children:null===(e=N.find(e=>e.id===c.category))||void 0===e?void 0:e.name})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:c.description||"No description"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)("span",{children:D().name}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[D().sections.length," sections"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{className:"capitalize",children:c.privacy}),c.tags.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[c.tags.length," tag",1!==c.tags.length?"s":""]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>g("content"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back"}),(0,a.jsxs)("button",{onClick:()=>{let e=D();t({notebook:{...c,id:"notebook-".concat(Date.now()),template:e,createdAt:new Date().toISOString(),sections:e.sections.map(e=>({id:"section-".concat(Date.now(),"-").concat(e.toLowerCase().replace(/\s+/g,"-")),title:e,content:"",notes:[]}))}}),m.Am.success("Created notebook: ".concat(c.title)),n()},disabled:!A,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4"}),"Create Notebook"]})]})]})]})]})}var en=s(1601);function el(){var e,t,s;let{updateWorkflowData:n,finishWorkflow:i,handleAsyncOperation:c}=(0,u.D)(),[o,x]=(0,r.useState)({id:"study-set-".concat(Date.now()),title:"",description:"",category:"general",cards:[],studyMode:"flashcards",settings:{shuffleCards:!0,showHints:!0,repeatMissed:!0}}),[g,h]=(0,r.useState)("setup"),[p,b]=(0,r.useState)(""),[y,f]=(0,r.useState)(!1),[v,N]=(0,r.useState)({front:"",back:"",hint:""}),[k,C]=(0,r.useState)(0),[S,D]=(0,r.useState)(!1),A=async()=>{if(!p.trim())return;f(!0);let e=await c(async()=>{await new Promise(e=>setTimeout(e,3e3));let e=p.split(/[.!?]+/).filter(e=>e.trim().length>20),t=[];for(let a=0;a<Math.min(e.length,8);a++){let r,n,l;let i=e[a].trim();if(i.includes("because")||i.includes("due to")){var s;let e=i.split(/because|due to/i);r="Why ".concat(e[0].trim().toLowerCase(),"?"),n="Because ".concat((null===(s=e[1])||void 0===s?void 0:s.trim())||"of specific reasons mentioned in the content"),l="Think about cause and effect relationships"}else if(i.includes("is")||i.includes("are")){let e=i.split(/\bis\b|\bare\b/i);e[0]&&e[1]?(r="What ".concat(e[0].trim().toLowerCase(),"?"),n=e[1].trim(),l="Consider the definition or characteristics"):(r="Complete: ".concat(i.substring(0,i.length/2),"..."),n=i,l="Think about the complete statement")}else{let e=i.split(" ");if(e.length>5){let t=Math.floor(e.length/2),s=e[t];e[t]="____",r=e.join(" "),n=s,l="Think about what fits in the context"}else r='What does this statement mean: "'.concat(i,'"'),n="This refers to the concept explained in the source material",l="Consider the main idea being conveyed"}t.push({id:"card-".concat(Date.now(),"-").concat(a),front:r,back:n,category:o.category,difficulty:"medium",tags:["auto-generated"],hint:l})}return t},"Generate flashcards from content",{contentLength:p.length});f(!1),e.success&&e.data&&(x(t=>({...t,cards:[...t.cards,...e.data]})),m.Am.success("Generated ".concat(e.data.length," flashcards!")))},Z=e=>{x(t=>({...t,cards:t.cards.filter(t=>t.id!==e)})),m.Am.success("Flashcard removed")},E=(e,t)=>{x(s=>({...s,cards:s.cards.map(s=>s.id===e?{...s,difficulty:t}:s)}))},P=o.title.trim()&&o.cards.length>0;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:["Setup","Content","Preview"].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:d("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",g===e.toLowerCase()?"bg-purple-600 text-white":["setup","content","preview"].indexOf(g)>t?"bg-green-500 text-white":"bg-gray-200 text-gray-600"),children:["setup","content","preview"].indexOf(g)>t?(0,a.jsx)(R.Z,{className:"h-4 w-4"}):t+1}),(0,a.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:e}),t<2&&(0,a.jsx)("div",{className:"w-8 h-px bg-gray-300 mx-4"})]},e))}),"setup"===g&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(T.Z,{className:"h-5 w-5 text-purple-600"}),"Study Set Setup"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Study Set Title *"}),(0,a.jsx)("input",{type:"text",value:o.title,onChange:e=>x(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter study set title..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("textarea",{value:o.description,onChange:e=>x(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",rows:3,placeholder:"Describe what this study set covers..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[{id:"general",name:"General Knowledge",icon:"\uD83D\uDCDA"},{id:"language",name:"Language",icon:"\uD83C\uDF0D"},{id:"science",name:"Science",icon:"\uD83D\uDD2C"},{id:"history",name:"History",icon:"\uD83C\uDFDB️"},{id:"math",name:"Mathematics",icon:"\uD83D\uDCD0"},{id:"technology",name:"Technology",icon:"\uD83D\uDCBB"},{id:"business",name:"Business",icon:"\uD83D\uDCBC"},{id:"medical",name:"Medical",icon:"\uD83C\uDFE5"}].map(e=>(0,a.jsxs)("button",{onClick:()=>x(t=>({...t,category:e.id})),className:d("p-3 border rounded-lg text-sm flex items-center gap-2 transition-colors",o.category===e.id?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-gray-300"),children:[(0,a.jsx)("span",{children:e.icon}),e.name]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Study Mode"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[{id:"flashcards",name:"Flashcards",desc:"Classic card review"},{id:"quiz",name:"Quiz Mode",desc:"Multiple choice questions"},{id:"review",name:"Review",desc:"Spaced repetition"}].map(e=>(0,a.jsxs)("label",{className:"flex flex-col p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,a.jsx)("input",{type:"radio",name:"studyMode",value:e.id,checked:o.studyMode===e.id,onChange:e=>x(t=>({...t,studyMode:e.target.value})),className:"sr-only"}),(0,a.jsx)("div",{className:d("font-medium",o.studyMode===e.id?"text-purple-700":"text-gray-900"),children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.desc}),o.studyMode===e.id&&(0,a.jsx)(R.Z,{className:"h-4 w-4 text-purple-600 mt-1 self-end"})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Study Settings"}),(0,a.jsx)("div",{className:"space-y-2",children:[{key:"shuffleCards",label:"Shuffle cards during study",desc:"Randomize card order"},{key:"showHints",label:"Show hints when available",desc:"Display helpful hints on cards"},{key:"repeatMissed",label:"Repeat missed cards",desc:"Show incorrect answers again"}].map(e=>(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,a.jsx)("input",{type:"checkbox",checked:o.settings[e.key],onChange:t=>x(s=>({...s,settings:{...s.settings,[e.key]:t.target.checked}})),className:"mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.label}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.desc})]})]},e.key))})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{onClick:()=>h("content"),disabled:!o.title.trim(),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue to Content"})})]})]}),"content"===g&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(M.Z,{className:"h-5 w-5 text-purple-600"}),"Auto-Generate from Content"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Source Content"}),(0,a.jsx)("textarea",{value:p,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",rows:6,placeholder:"Paste your study material here and we'll automatically generate flashcards..."}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"AI will analyze your content and create relevant flashcards automatically"})]}),(0,a.jsx)("button",{onClick:A,disabled:!p.trim()||y,className:"w-full px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.Z,{className:"h-5 w-5 animate-spin"}),"Generating Flashcards..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.Z,{className:"h-5 w-5"}),"Generate Flashcards (Step 1 of 3)"]})})]})]}),(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-5 w-5 text-purple-600"}),"Add Manual Cards"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Front (Question) *"}),(0,a.jsx)("textarea",{value:v.front,onChange:e=>N(t=>({...t,front:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",rows:3,placeholder:"Enter the question or prompt..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Back (Answer) *"}),(0,a.jsx)("textarea",{value:v.back,onChange:e=>N(t=>({...t,back:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",rows:3,placeholder:"Enter the answer or explanation..."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hint (Optional)"}),(0,a.jsx)("input",{type:"text",value:v.hint,onChange:e=>N(t=>({...t,hint:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Add a helpful hint..."})]}),(0,a.jsxs)("button",{onClick:()=>{if(!v.front.trim()||!v.back.trim()){m.Am.error("Both front and back are required");return}let e={id:"card-".concat(Date.now()),front:v.front.trim(),back:v.back.trim(),hint:v.hint.trim()||void 0,category:o.category,difficulty:"medium",tags:["manual"]};x(t=>({...t,cards:[...t.cards,e]})),N({front:"",back:"",hint:""}),m.Am.success("Flashcard added!")},disabled:!v.front.trim()||!v.back.trim(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),"Add Card"]})]})]}),o.cards.length>0&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 text-purple-600"}),"Current Cards (",o.cards.length,")"]})}),(0,a.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:o.cards.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-1",children:"Front:"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:e.front})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-1",children:"Back:"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:e.back})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-3",children:[(0,a.jsxs)("select",{value:e.difficulty,onChange:t=>E(e.id,t.target.value),className:"text-xs border rounded px-2 py-1",children:[(0,a.jsx)("option",{value:"easy",children:"Easy"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"hard",children:"Hard"})]}),(0,a.jsx)("button",{onClick:()=>Z(e.id),className:"text-red-500 hover:text-red-700 p-1",title:"Remove card",children:(0,a.jsx)(en.Z,{className:"h-4 w-4"})})]})]}),e.hint&&(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[(0,a.jsx)("strong",{children:"Hint:"})," ",e.hint]})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>h("setup"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back"}),(0,a.jsx)("button",{onClick:()=>h("preview"),disabled:0===o.cards.length,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue to Preview"})]})]}),"preview"===g&&o.cards.length>0&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(l.Z,{className:"h-5 w-5 text-purple-600"}),"Study Set Preview"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:o.cards.length}),(0,a.jsx)("div",{className:"text-sm text-purple-700",children:"Total Cards"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:o.cards.filter(e=>"easy"===e.difficulty).length}),(0,a.jsx)("div",{className:"text-sm text-green-700",children:"Easy Cards"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:o.cards.filter(e=>"hard"===e.difficulty).length}),(0,a.jsx)("div",{className:"text-sm text-red-700",children:"Hard Cards"})]})]}),(0,a.jsxs)("div",{className:"border-2 border-purple-200 rounded-lg p-6 bg-purple-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h5",{className:"font-medium text-gray-900",children:["Card Preview (",k+1," of ",o.cards.length,")"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>C(Math.max(0,k-1)),disabled:0===k,className:"px-2 py-1 text-sm border rounded disabled:opacity-50",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>C(Math.min(o.cards.length-1,k+1)),disabled:k===o.cards.length-1,className:"px-2 py-1 text-sm border rounded disabled:opacity-50",children:"Next"})]})]}),(0,a.jsx)("div",{className:"bg-white border rounded-lg p-6 min-h-32",children:S?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Back:"}),(0,a.jsx)("div",{className:"text-lg text-gray-900",children:null===(s=o.cards[k])||void 0===s?void 0:s.back})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Front:"}),(0,a.jsx)("div",{className:"text-lg text-gray-900",children:null===(e=o.cards[k])||void 0===e?void 0:e.front}),(null===(t=o.cards[k])||void 0===t?void 0:t.hint)&&o.settings.showHints&&(0,a.jsxs)("div",{className:"mt-3 text-sm text-gray-600 italic",children:["\uD83D\uDCA1 Hint: ",o.cards[k].hint]})]})}),(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsxs)("button",{onClick:()=>D(!S),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2",children:[(0,a.jsx)(O.Z,{className:"h-4 w-4"}),S?"Show Front":"Show Back"]})})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>h("content"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back to Edit"}),(0,a.jsxs)("button",{onClick:()=>{n({studySet:{...o,createdAt:new Date().toISOString()}}),m.Am.success("Created study set with ".concat(o.cards.length," flashcards!")),i()},disabled:!P,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4"}),"Create Study Set"]})]})]})]})}var ei=s(5945),ec=s(7),eo=s(6072),ed=s(338);function em(){let{updateWorkflowData:e,finishWorkflow:t,handleAsyncOperation:s}=(0,u.D)(),[n,l]=(0,r.useState)({id:"voice-note-".concat(Date.now()),title:"",duration:0,transcript:"",summary:"",tags:[],confidence:0}),[i,c]=(0,r.useState)("record"),[o,x]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[p,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(0),k=(0,r.useRef)(null),C=(0,r.useRef)(null),S=(0,r.useRef)(null),D=(0,r.useRef)(null);(0,r.useEffect)(()=>()=>{D.current&&clearInterval(D.current),S.current&&S.current.getTracks().forEach(e=>e.stop())},[]);let A=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});S.current=e;let t=new MediaRecorder(e);k.current=t;let s=[];t.ondataavailable=e=>{s.push(e.data)},t.onstop=()=>{let e=new Blob(s,{type:"audio/wav"}),t=URL.createObjectURL(e);l(s=>({...s,audioBlob:e,audioUrl:t,duration:N}))},t.start(),x(!0),w(0),D.current=setInterval(()=>{w(e=>e+1)},1e3),m.Am.success("Recording started")}catch(e){m.Am.error("Failed to access microphone")}},T=async()=>{if(!n.audioBlob)return;b(!0);let e=await s(async()=>(await new Promise(e=>setTimeout(e,4e3)),{transcript:"Speaker 1: Welcome to our meeting today. I'd like to discuss the quarterly results and our plans for the next phase.\n\nSpeaker 2: Thank you for organizing this. I've been looking at the numbers and we're showing strong growth in the mobile segment.\n\nSpeaker 1: That's excellent news. Can you share more details about the mobile metrics?\n\nSpeaker 2: Certainly. We've seen a 35% increase in mobile engagement and our conversion rates have improved by 12% compared to last quarter.\n\nSpeaker 1: Those are impressive results. What do you think is driving this improvement?\n\nSpeaker 2: I believe it's the combination of our new UI updates and the enhanced onboarding flow we implemented.",speakers:[{id:"speaker-1",name:"Speaker 1",segments:[{start:0,end:8,text:"Welcome to our meeting today. I'd like to discuss the quarterly results and our plans for the next phase."},{start:15,end:22,text:"That's excellent news. Can you share more details about the mobile metrics?"},{start:35,end:42,text:"Those are impressive results. What do you think is driving this improvement?"}]},{id:"speaker-2",name:"Speaker 2",segments:[{start:8,end:15,text:"Thank you for organizing this. I've been looking at the numbers and we're showing strong growth in the mobile segment."},{start:22,end:35,text:"Certainly. We've seen a 35% increase in mobile engagement and our conversion rates have improved by 12% compared to last quarter."},{start:42,end:50,text:"I believe it's the combination of our new UI updates and the enhanced onboarding flow we implemented."}]}],confidence:.89,title:"Meeting Notes - ".concat(new Date().toLocaleDateString())}),"Transcribe audio with speaker detection",{duration:n.duration});if(b(!1),e.success&&e.data){let t=e.data;l(e=>({...e,transcript:t.transcript,speakers:t.speakers,confidence:t.confidence,title:t.title})),m.Am.success("Transcription completed with speaker detection!"),c("enhance")}},Z=async()=>{if(!n.transcript)return;v(!0);let e=await s(async()=>(await new Promise(e=>setTimeout(e,2500)),{summary:"Meeting focused on quarterly results review with strong mobile segment performance. Key highlights include 35% increase in mobile engagement, 12% improvement in conversion rates, driven by UI updates and enhanced onboarding flow. Discussion covered growth metrics and strategic improvements for mobile platform.",tags:["meeting","quarterly-results","mobile-growth","conversion-rates","ui-updates","business-review"],title:n.title||"Enhanced Voice Note - ".concat(new Date().toLocaleDateString())}),"AI-powered enhancement and formatting",{transcriptLength:n.transcript.length});if(v(!1),e.success&&e.data){let t=e.data;l(e=>({...e,summary:t.summary,tags:t.tags,title:t.title})),m.Am.success("Voice note enhanced!")}},E=e=>"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0"));return n.audioUrl||n.transcript,(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:["Record","Transcribe","Enhance"].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:d("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",i===e.toLowerCase()?"bg-purple-600 text-white":["record","transcribe","enhance"].indexOf(i)>t?"bg-green-500 text-white":"bg-gray-200 text-gray-600"),children:["record","transcribe","enhance"].indexOf(i)>t?(0,a.jsx)(R.Z,{className:"h-4 w-4"}):t+1}),(0,a.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:e}),t<2&&(0,a.jsx)("div",{className:"w-8 h-px bg-gray-300 mx-4"})]},e))}),"record"===i&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5 text-purple-600"}),"Record Voice Note"]}),(0,a.jsxs)("div",{className:"text-center space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-center",children:o?(0,a.jsx)("button",{onClick:()=>{k.current&&o&&(k.current.stop(),x(!1),D.current&&clearInterval(D.current),S.current&&S.current.getTracks().forEach(e=>e.stop()),m.Am.success("Recording stopped"),setTimeout(()=>c("transcribe"),1e3))},className:"w-24 h-24 bg-red-600 hover:bg-red-700 rounded-full flex items-center justify-center transition-colors animate-pulse",children:(0,a.jsx)(ei.Z,{className:"h-12 w-12 text-white"})}):(0,a.jsx)("button",{onClick:A,disabled:void 0!==n.audioUrl,className:"w-24 h-24 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 rounded-full flex items-center justify-center transition-colors",children:(0,a.jsx)(f.Z,{className:"h-12 w-12 text-white"})})}),(0,a.jsx)("div",{children:o?(0,a.jsxs)("div",{className:"text-lg font-medium text-red-600 flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-600 rounded-full animate-pulse"}),"Recording: ",E(N)]}):n.audioUrl?(0,a.jsxs)("div",{className:"text-lg font-medium text-green-600 flex items-center justify-center gap-2",children:[(0,a.jsx)(R.Z,{className:"h-5 w-5"}),"Recording Complete: ",E(n.duration)]}):(0,a.jsx)("div",{className:"text-lg font-medium text-gray-600",children:"Press to start recording"})}),n.audioUrl&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("audio",{ref:C,src:n.audioUrl,onEnded:()=>h(!1),onPlay:()=>h(!0),onPause:()=>h(!1)}),(0,a.jsxs)("div",{className:"flex justify-center items-center gap-4",children:[(0,a.jsxs)("button",{onClick:()=>{C.current&&n.audioUrl&&(g?(C.current.pause(),h(!1)):(C.current.play(),h(!0)))},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[g?(0,a.jsx)(ec.Z,{className:"h-4 w-4"}):(0,a.jsx)(V.Z,{className:"h-4 w-4"}),g?"Pause":"Play"]}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Duration: ",E(n.duration)]})]}),(0,a.jsx)("button",{onClick:()=>c("transcribe"),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Continue to Transcription"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 max-w-md mx-auto",children:"Record your voice note by speaking clearly. The recording will be automatically transcribed and enhanced with AI."})]})]}),"transcribe"===i&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 text-purple-600"}),"Transcribe Audio"]}),(0,a.jsx)("div",{className:"space-y-4",children:n.transcript?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(R.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsxs)("span",{className:"font-medium text-green-900",children:["Transcription Complete (",Math.round(100*n.confidence),"% confidence)"]})]}),n.speakers&&n.speakers.length>1&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(eo.Z,{className:"h-4 w-4 text-blue-600"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:["Speaker Detection: ",n.speakers.length," speakers identified"]})]}),(0,a.jsx)("div",{className:"flex gap-2",children:n.speakers.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[(0,a.jsx)(ed.Z,{className:"h-3 w-3"}),e.name]},e.id))})]}),(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto",children:(0,a.jsx)("div",{className:"text-sm text-gray-700 whitespace-pre-line",children:n.transcript})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>c("record"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back to Recording"}),(0,a.jsx)("button",{onClick:()=>c("enhance"),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Continue to Enhancement"})]})]}):(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-gray-600",children:"Convert your recording to text with AI-powered transcription and speaker detection."}),(0,a.jsx)("button",{onClick:T,disabled:p,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 mx-auto",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 animate-spin"}),"Transcribing with AI..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.Z,{className:"h-4 w-4"}),"Start Transcription"]})}),p&&(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Analyzing audio, detecting speakers, and generating transcript..."})]})})]}),"enhance"===i&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(M.Z,{className:"h-5 w-5 text-purple-600"}),"AI Enhancement"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),(0,a.jsx)("input",{type:"text",value:n.title,onChange:e=>l(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter a title for your voice note..."})]}),n.summary?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Summary"}),(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:(0,a.jsx)("div",{className:"text-sm text-green-800",children:n.summary})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Smart Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:n.tags.map(e=>(0,a.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Transcript"}),(0,a.jsx)("div",{className:"bg-gray-50 border rounded-lg p-3 max-h-40 overflow-y-auto",children:(0,a.jsx)("div",{className:"text-sm text-gray-700 whitespace-pre-line",children:n.transcript})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>c("transcribe"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back to Transcript"}),(0,a.jsxs)("button",{onClick:()=>{e({voiceNote:{...n,createdAt:new Date().toISOString()}}),m.Am.success("Voice note created successfully!"),t()},disabled:!n.title.trim(),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(R.Z,{className:"h-4 w-4"}),"Complete Voice Note"]})]})]}):(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-gray-600",children:"Enhance your voice note with AI-powered summarization and smart tagging."}),(0,a.jsx)("button",{onClick:Z,disabled:y,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 mx-auto",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 animate-spin"}),"Enhancing with AI..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.Z,{className:"h-4 w-4"}),"Enhance Voice Note"]})})]})]})]})]})}var eu=s(1556);function ex(){let{updateWorkflowData:e,finishWorkflow:t,handleAsyncOperation:s}=(0,u.D)(),[n,i]=(0,r.useState)({id:"kb-".concat(Date.now()),title:"",description:"",sources:[],categories:["general"],totalDocuments:0,isPublic:!1}),[c,o]=(0,r.useState)("setup"),[x,g]=(0,r.useState)(!1),[h,p]=(0,r.useState)(new Set),[y,f]=(0,r.useState)(new Set),[v,N]=(0,r.useState)(""),w=(0,r.useRef)(null),k={"application/pdf":{icon:j.Z,label:"PDF Document",color:"text-red-600"},"application/msword":{icon:j.Z,label:"Word Document",color:"text-blue-600"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{icon:j.Z,label:"Word Document",color:"text-blue-600"},"text/plain":{icon:j.Z,label:"Text File",color:"text-gray-600"},"text/markdown":{icon:j.Z,label:"Markdown File",color:"text-purple-600"}},C=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?g(!0):"dragleave"===e.type&&g(!1)},[]),S=(0,r.useCallback)(async e=>{e.preventDefault(),e.stopPropagation(),g(!1);let t=Array.from(e.dataTransfer.files);await T(t)},[]),D=async e=>{let t=Array.from(e.target.files||[]);await T(t)},T=async e=>{for(let s of e){var t;let e={id:"source-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:s.name,type:(null===(t=s.name.split(".").pop())||void 0===t?void 0:t.toLowerCase())||"txt",size:s.size,content:"",extractedData:{title:s.name.replace(/\.[^/.]+$/,""),summary:"",keyTopics:[],wordCount:0,sections:[]},tags:[],category:"general",searchable:!0,processed:!1};i(t=>({...t,sources:[...t.sources,e]})),Z(e,s)}},Z=async(e,t)=>{p(t=>{let s=new Set(t);return s.add(e.id),s});let a=await s(async()=>{let s;await new Promise(e=>setTimeout(e,2e3+3e3*Math.random()));let a="";return"pdf"===e.type?(a="[Extracted PDF content from ".concat(e.name,"]\n\nThis document contains detailed information about knowledge management systems and best practices for document organization.\n\nSECTION 1: Introduction to Knowledge Management\nKnowledge management is the process of creating, sharing, using and managing the knowledge and information of an organization...\n\nSECTION 2: Document Classification Systems\nEffective classification enables quick retrieval and proper categorization of documents based on content, purpose, and audience...\n\nSECTION 3: Search and Discovery\nModern knowledge bases implement semantic search capabilities that understand context and meaning beyond keyword matching..."),s={title:"Knowledge Management Guide - ".concat(e.name.replace(".pdf","")),summary:"Comprehensive guide covering knowledge management systems, document classification, and search optimization for organizational knowledge bases.",keyTopics:["knowledge management","document classification","semantic search","information architecture","content organization"],pageCount:45,wordCount:12500,sections:[{title:"Introduction to Knowledge Management",content:"Overview of KM principles and methodologies",page:1},{title:"Document Classification Systems",content:"Taxonomies and categorization strategies",page:15},{title:"Search and Discovery",content:"Semantic search and findability techniques",page:28}]}):"docx"===e.type||"doc"===e.type?(a="[Extracted Word document content from ".concat(e.name,"]\n\nPROJECT PROPOSAL: Enterprise Knowledge Portal\n\nEXECUTIVE SUMMARY\nThis proposal outlines the development of a centralized knowledge portal to improve information sharing and collaboration across departments.\n\nOBJECTIVES\n- Centralize scattered documentation\n- Improve search and discovery capabilities  \n- Enable collaborative content creation\n- Establish knowledge retention processes\n\nTECHNICAL REQUIREMENTS\n- Document management system with version control\n- Full-text search with advanced filtering\n- User access controls and permissions\n- Integration with existing tools and workflows"),s={title:"Project Proposal - ".concat(e.name.replace(/\.(docx?)/g,"")),summary:"Enterprise knowledge portal proposal covering centralized documentation, search capabilities, and collaborative features for organizational knowledge sharing.",keyTopics:["project proposal","knowledge portal","document management","collaboration","enterprise systems"],wordCount:3200,sections:[{title:"Executive Summary",content:"High-level project overview and goals"},{title:"Objectives",content:"Specific aims and success criteria"},{title:"Technical Requirements",content:"System specifications and integration needs"}]}):(a=await t.text(),s={title:e.name.replace(/\.(txt|md)$/g,""),summary:"Text document containing ".concat(Math.floor(a.length/5)," words of content. ").concat(a.includes("\n#")?"Contains structured headings and sections.":"Plain text format."),keyTopics:["text document","notes","reference"],wordCount:a.split(/\s+/).length,sections:a.includes("\n#")?[{title:"Main Content",content:"Structured document with multiple sections"}]:[{title:"Content",content:"Plain text content"}]}),{content:a,extractedData:s,tags:["uploaded","document",e.type],category:a.toLowerCase().includes("project")?"business":a.toLowerCase().includes("guide")||a.toLowerCase().includes("manual")?"documentation":a.toLowerCase().includes("policy")?"policies":"general"}},"Process knowledge source: ".concat(e.name),{fileName:e.name,fileSize:e.size});if(p(t=>{let s=new Set(t);return s.delete(e.id),s}),a.success&&a.data){let t=a.data;i(s=>({...s,sources:s.sources.map(s=>s.id===e.id?{...s,content:t.content,extractedData:t.extractedData,tags:t.tags,category:t.category,processed:!0}:s)})),m.Am.success("Processed ".concat(e.name))}},E=e=>{e.trim()&&!n.categories.includes(e.trim())&&i(t=>({...t,categories:[...t.categories,e.trim()]}))},P=e=>{i(t=>({...t,categories:t.categories.filter(t=>t!==e)}))},F=(e,t)=>{i(s=>({...s,sources:s.sources.map(s=>s.id===e?{...s,category:t}:s)}))},z=n.sources.filter(e=>e.name.toLowerCase().includes(v.toLowerCase())||e.extractedData.title.toLowerCase().includes(v.toLowerCase())||e.extractedData.keyTopics.some(e=>e.toLowerCase().includes(v.toLowerCase()))),O=e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]},B=e=>{let t=k["text/".concat(e)];return t?t.icon:j.Z},W=n.title.trim()&&n.sources.length>0;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:["Setup","Upload","Organize","Review"].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:d("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",c===e.toLowerCase()?"bg-blue-600 text-white":["setup","upload","organize","review"].indexOf(c)>t?"bg-green-500 text-white":"bg-gray-200 text-gray-600"),children:["setup","upload","organize","review"].indexOf(c)>t?(0,a.jsx)(R.Z,{className:"h-4 w-4"}):t+1}),(0,a.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:e}),t<3&&(0,a.jsx)("div",{className:"w-8 h-px bg-gray-300 mx-4"})]},e))}),"setup"===c&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5 text-blue-600"}),"Knowledge Base Setup"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Knowledge Base Title *"}),(0,a.jsx)("input",{type:"text",value:n.title,onChange:e=>i(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter knowledge base title..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("textarea",{value:n.description,onChange:e=>i(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Describe what this knowledge base contains..."})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:n.isPublic,onChange:e=>i(t=>({...t,isPublic:e.target.checked})),className:"rounded"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Make this knowledge base publicly searchable"})]})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{onClick:()=>o("upload"),disabled:!n.title.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue to Upload"})})]})]}),"upload"===c&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"h-5 w-5 text-blue-600"}),"Upload Knowledge Sources"]}),(0,a.jsxs)("div",{className:d("border-2 border-dashed rounded-lg p-8 text-center transition-colors",x?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragEnter:C,onDragLeave:C,onDragOver:C,onDrop:S,children:[(0,a.jsx)("input",{ref:w,type:"file",multiple:!0,onChange:D,accept:".pdf,.doc,.docx,.txt,.md",className:"hidden"}),(0,a.jsx)(A.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Knowledge Documents"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Drag and drop your PDFs, Word documents, and notes here, or click to browse."}),(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Choose Files"}),(0,a.jsx)("div",{className:"mt-4 text-sm text-gray-500",children:"Supported: PDF, Word Documents (.doc, .docx), Text Files (.txt, .md)"})]})]}),n.sources.length>0&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4",children:["Uploaded Sources (",n.sources.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:n.sources.map(e=>{let t=B(e.type),s=h.has(e.id);return(0,a.jsx)("div",{className:"border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:d("w-10 h-10 rounded-lg flex items-center justify-center",e.processed?"bg-green-100":s?"bg-blue-100":"bg-gray-100"),children:s?(0,a.jsx)(M.Z,{className:"h-5 w-5 text-blue-600 animate-pulse"}):e.processed?(0,a.jsx)(R.Z,{className:"h-5 w-5 text-green-600"}):(0,a.jsx)(t,{className:"h-5 w-5 text-gray-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.type.toUpperCase()," • ",O(e.size)]}),s&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-blue-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),(0,a.jsx)("span",{children:"Processing document..."})]}),e.processed&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"text-sm text-green-600 mb-1",children:["✓ Processed • ",e.extractedData.wordCount.toLocaleString()," words"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.extractedData.summary})]})]})]})},e.id)})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>o("setup"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back"}),(0,a.jsx)("button",{onClick:()=>o("organize"),disabled:0===n.sources.filter(e=>e.processed).length,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue to Organization"})]})]}),"organize"===c&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(et.Z,{className:"h-5 w-5 text-blue-600"}),"Organize Knowledge Sources"]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categories"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:n.categories.map(e=>(0,a.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm flex items-center gap-1",children:[e,"general"!==e&&(0,a.jsx)("button",{onClick:()=>P(e),className:"text-blue-500 hover:text-blue-700",children:(0,a.jsx)(I.Z,{className:"h-3 w-3"})})]},e))}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)("select",{onChange:e=>e.target.value&&E(e.target.value),value:"",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Add predefined category..."}),["general","research","documentation","legal","technical","business","education","reference","policies","procedures","templates","guides"].filter(e=>!n.categories.includes(e)).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Sources"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(eu.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:v,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search by filename, title, or topics..."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h5",{className:"font-medium text-gray-900 mb-3",children:["Organize Sources (",z.length,")"]}),(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:z.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h6",{className:"font-medium text-gray-900",children:e.extractedData.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.extractedData.summary}),e.extractedData.keyTopics.length>0&&(0,a.jsxs)("div",{className:"flex gap-1 mt-2",children:[e.extractedData.keyTopics.slice(0,3).map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:e},e)),e.extractedData.keyTopics.length>3&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",e.extractedData.keyTopics.length-3," more"]})]})]}),(0,a.jsx)("div",{className:"ml-4",children:(0,a.jsx)("select",{value:e.category,onChange:t=>F(e.id,t.target.value),className:"text-sm border rounded px-2 py-1",children:n.categories.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})})]})},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>o("upload"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back"}),(0,a.jsx)("button",{onClick:()=>o("review"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Continue to Review"})]})]}),"review"===c&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(l.Z,{className:"h-5 w-5 text-blue-600"}),"Review Knowledge Base"]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-medium text-blue-900 mb-2",children:"Knowledge Base Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:n.sources.filter(e=>e.processed).length}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Documents"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:n.sources.reduce((e,t)=>e+t.extractedData.wordCount,0).toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Total Words"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:n.categories.length}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Categories"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:n.isPublic?"Public":"Private"}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Visibility"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900 mb-3",children:"Categories & Distribution"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:n.categories.map(e=>{let t=n.sources.filter(t=>t.category===e).length;return(0,a.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-3 text-center",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 capitalize",children:e}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[t," document",1!==t?"s":""]})]},e)})})]}),(0,a.jsx)("div",{className:"border-t pt-6",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>o("organize"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back to Organization"}),(0,a.jsxs)("button",{onClick:()=>{let s=n.sources.filter(e=>e.processed);e({knowledgeBase:{...n,sources:s,totalDocuments:s.length,createdAt:new Date().toISOString()}}),m.Am.success("Created knowledge base with ".concat(s.length," sources!")),t()},disabled:!W,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4"}),"Create Knowledge Base"]})]})})]})]})]})}function eg(){let{startWorkflow:e,currentWorkflow:t}=(0,u.D)(),[s,n]=(0,r.useState)(null),l=[{id:"memory-creation",title:"Create Memory",description:"Build memory from transcription + summarization in one flow",icon:j.Z,color:"bg-blue-500",steps:[{id:"input",title:"Capture Content",description:"Add your content via text or voice"},{id:"transcription",title:"Process Audio",description:"Converting audio to text",aiAssisted:!0},{id:"summarization",title:"Generate Summary",description:"AI-powered content summarization",aiAssisted:!0},{id:"tagging",title:"Add Tags",description:"Organize with smart tags"}]},{id:"notebook-creation",title:"Create Notebook",description:"Organize notes and memories into structured notebooks",icon:b.Z,color:"bg-green-500",steps:[{id:"notebook-creation",title:"Create Notebook",description:"Set up your new notebook with templates and organization",component:(0,a.jsx)(er,{})}]},{id:"voice-note",title:"Voice Note",description:"Record and transcribe voice notes instantly",icon:f.Z,color:"bg-purple-500",steps:[{id:"voice-workflow",title:"Voice Note Creation",description:"Record, transcribe and enhance voice notes instantly",component:(0,a.jsx)(em,{}),aiAssisted:!0}]},{id:"file-processing",title:"File Processing",description:"Upload and auto-parse files into memories (PDF, Word, audio, video)",icon:A.Z,color:"bg-orange-500",steps:[{id:"upload",title:"Upload Files",description:"Drag and drop or select files to upload",component:(0,a.jsx)(ee,{})}]},{id:"flashcard-creation",title:"Create Flashcards",description:"Convert notes to flashcards and study materials in ≤3 steps",icon:T.Z,color:"bg-purple-500",steps:[{id:"flashcard-workflow",title:"Create Study Set",description:"Build flashcards from content or create manually",component:(0,a.jsx)(el,{}),aiAssisted:!0}]},{id:"knowledge-upload",title:"Knowledge Upload",description:"Upload PDFs, docs, and notes as searchable knowledge sources",icon:b.Z,color:"bg-indigo-500",steps:[{id:"knowledge-workflow",title:"Upload Knowledge Sources",description:"Create searchable knowledge base from documents",component:(0,a.jsx)(ex,{}),aiAssisted:!0}]},{id:"error-demo",title:"Error Handling Demo",description:"Showcase error recovery with retry, rollback, and exit options",icon:Z.Z,color:"bg-red-500",steps:[{id:"demo",title:"Error Demo",description:"Simulate different error scenarios",component:(0,a.jsx)(J,{})},{id:"recovery",title:"Recovery Success",description:"Workflow completed successfully"}]},{id:"memory-chain",title:"Memory Chain Generation",description:"Create reasoning flows in ≤ 4 actions with AI assistance",icon:E.Z,color:"bg-indigo-500",steps:[{id:"chain-builder",title:"Build Memory Chain",description:"Connect memories to create reasoning flows",component:(0,a.jsx)(_,{}),aiAssisted:!0}]}],i=t=>{e(t.id,t.title,t.steps)};return t?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(q,{})}):(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Ntu Workflows"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"AI-powered workflows for seamless productivity and memory management"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Quick Start"}),(0,a.jsx)("p",{className:"mb-4 opacity-90",children:"Complete any common task in ≤ 3 steps with auto-save progress and AI assistance"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>i(l[0]),className:"bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors",children:"Create Memory"}),(0,a.jsx)("button",{onClick:()=>i(l[2]),className:"bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors",children:"Voice Note"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Available Workflows"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(e=>(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>i(e),children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"".concat(e.color," p-3 rounded-lg"),children:(0,a.jsx)(e.icon,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500 mb-2",children:[e.steps.length," steps • ",e.steps.filter(e=>e.aiAssisted).length," AI-assisted"]}),(0,a.jsxs)("div",{className:"space-y-1",children:[e.steps.slice(0,3).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-gray-100 rounded-full flex items-center justify-center text-xs",children:t+1}),(0,a.jsx)("span",{className:"text-gray-600",children:e.title}),e.aiAssisted&&(0,a.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-1 rounded",children:"AI"})]},e.id)),e.steps.length>3&&(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["+",e.steps.length-3," more steps"]})]})]}),(0,a.jsxs)("button",{className:"w-full mt-4 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),"Start Workflow"]})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Workflow Features"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,a.jsx)("span",{className:"text-green-600 font-semibold",children:"3"})}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"3-Step Completion"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Complete any common task in 3 steps or less"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,a.jsx)("span",{className:"text-blue-600 font-semibold",children:"\uD83D\uDCBE"})}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Auto-Save"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Progress automatically saved at each step"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,a.jsx)("span",{className:"text-purple-600 font-semibold",children:"\uD83E\uDD16"})}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"AI Assistance"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Mere helps with complex processing steps"})]})]})]})]})}function eh(){let[e,t]=(0,r.useState)("dashboard"),{currentWorkflow:s}=(0,u.D)();return s?(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,a.jsx)(D,{onViewChange:t,currentView:e}),(0,a.jsx)("main",{className:"flex-1 overflow-hidden",children:(0,a.jsxs)("div",{className:"flex h-full",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(eg,{})}),(0,a.jsx)("div",{className:"w-96 border-l",children:(0,a.jsx)(x,{})})]})})]}):(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,a.jsx)(D,{onViewChange:t,currentView:e}),(0,a.jsx)("main",{className:"flex-1 overflow-hidden",children:"dashboard"===e?(0,a.jsx)(eg,{}):(0,a.jsx)(x,{})})]})}},2935:function(e,t,s){"use strict";s.d(t,{b:function(){return i},D:function(){return c}});var a=s(7437),r=s(2265),n=s(6175);let l=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,r.useState)(null),[c,o]=(0,r.useState)(""),[d,m]=(0,r.useState)(0),[u,x]=(0,r.useState)(0),[g,h]=(0,r.useState)({}),[p,b]=(0,r.useState)(!1),[y,f]=(0,r.useState)([]),{saveWorkflowState:j,clearWorkflowState:v,loadWorkflowState:N}=function(e){let{workflowId:t,workflowType:s,currentStep:a,totalSteps:l,data:i,autoSaveInterval:c=3e3}=e,o=(0,r.useRef)(""),d=(0,r.useRef)(),m=(0,r.useCallback)(async e=>{try{let s=localStorage.getItem("ntu-workflow-state"),a=s?JSON.parse(s):{};a[t]=e,localStorage.setItem("ntu-workflow-state",JSON.stringify(a)),console.log("Auto-saved workflow ".concat(t," at step ").concat(e.currentStep))}catch(e){console.error("Failed to auto-save workflow:",e),n.Am.error("Failed to auto-save progress")}},[t]),u=(0,r.useCallback)(()=>{try{let e=localStorage.getItem("ntu-workflow-state");if(e){let s=JSON.parse(e);delete s[t],localStorage.setItem("ntu-workflow-state",JSON.stringify(s))}}catch(e){console.error("Failed to clear workflow state:",e)}},[t]),x=(0,r.useCallback)(()=>{try{let e=localStorage.getItem("ntu-workflow-state");if(e)return JSON.parse(e)[t]||null}catch(e){console.error("Failed to load workflow state:",e)}return null},[t]);return(0,r.useEffect)(()=>{let e=JSON.stringify({currentStep:a,data:i});return e!==o.current&&(d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{m({id:t,type:s,currentStep:a,totalSteps:l,data:i,lastSaved:new Date().toISOString()}),o.current=e},c)),()=>{d.current&&clearTimeout(d.current)}},[t,s,a,l,i,c,m]),{saveWorkflowState:m,clearWorkflowState:u,loadWorkflowState:x}}({workflowId:s||"",workflowType:c,currentStep:d,totalSteps:u,data:g}),w=function(){let[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!1),l=(0,r.useCallback)((e,t,s,a)=>({id:"error-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:e,message:t,step:s,timestamp:new Date().toISOString(),recoverable:"permission"!==e,retryCount:0,maxRetries:"network"===e?3:"processing"===e?2:1,context:a}),[]),i=(0,r.useCallback)(e=>{t(t=>[...t,e]),n.Am.error("Error in ".concat(e.step,": ").concat(e.message),{duration:5e3,id:e.id})},[]),c=(0,r.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e)),n.Am.dismiss(e)},[]),o=(0,r.useCallback)(async(s,r)=>{let l=e.find(e=>e.id===s);if(!l||l.retryCount>=l.maxRetries)return!1;a(!0);try{return t(e=>e.map(e=>e.id===s?{...e,retryCount:e.retryCount+1}:e)),await r(),c(s),n.Am.success("Retry successful for ".concat(l.step)),!0}catch(a){let e={...l,retryCount:l.retryCount+1,message:a instanceof Error?a.message:"Retry failed"};return t(t=>t.map(t=>t.id===s?e:t)),e.retryCount>=e.maxRetries&&n.Am.error("Max retries reached for ".concat(l.step)),!1}finally{a(!1)}},[e,c]),d=(0,r.useCallback)((e,t,s,a,r)=>{let n=[];return e.recoverable&&e.retryCount<e.maxRetries&&n.push({type:"retry",label:"Retry (".concat(e.retryCount,"/").concat(e.maxRetries,")"),description:"Try the failed step again",handler:()=>o(e.id,t),primary:!0}),n.push({type:"rollback",label:"Go Back",description:"Return to the previous step",handler:s}),a&&"validation"!==e.type&&n.push({type:"skip",label:"Skip Step",description:"Continue without completing this step",handler:()=>{c(e.id),a()}}),n.push({type:"exit",label:"Exit Workflow",description:"Cancel and return to dashboard",handler:()=>{r&&r(),c(e.id)}}),n},[o,c]),m=(0,r.useCallback)(async(e,t,s)=>{try{let t=await e();return{success:!0,data:t}}catch(n){let e="unknown",a="An unexpected error occurred";n instanceof Error&&(e=(a=n.message).includes("network")||a.includes("fetch")?"network":a.includes("timeout")?"timeout":a.includes("permission")||a.includes("unauthorized")?"permission":a.includes("validation")||a.includes("invalid")?"validation":"processing");let r=l(e,a,t,s);return i(r),{success:!1,error:r}}},[l,i]),u=(0,r.useCallback)(()=>{e.forEach(e=>n.Am.dismiss(e.id)),t([])},[e]),x=(0,r.useCallback)(()=>{let t=e.length,s=e.filter(e=>!e.recoverable||e.retryCount>=e.maxRetries).length;return{total:t,critical:s,retryable:e.filter(e=>e.recoverable&&e.retryCount<e.maxRetries).length,hasErrors:t>0,canProceed:0===s}},[e]);return{errors:e,isRecovering:s,addError:i,removeError:c,retryError:o,getErrorActions:d,handleAsyncOperation:m,clearAllErrors:u,getErrorSummary:x,createError:l}}(),k=(0,r.useCallback)((e,t,s)=>{i(e),o(t),f(s),x(s.length),m(0),h({}),b(!1),w.clearAllErrors()},[w]),C=(0,r.useCallback)(()=>{d<u-1&&m(e=>e+1)},[d,u]),S=(0,r.useCallback)(()=>{d>0&&m(e=>e-1)},[d]),D=(0,r.useCallback)(e=>{h(t=>({...t,...e}))},[]),A=(0,r.useCallback)(()=>{s&&v(),i(null),o(""),m(0),x(0),h({}),f([]),b(!1),w.clearAllErrors()},[s,v,w]),T=(0,r.useCallback)(()=>{A()},[A]),Z={currentWorkflow:s,currentStep:d,totalSteps:u,workflowData:g,isLoading:p,startWorkflow:k,nextStep:C,previousStep:S,updateWorkflowData:D,finishWorkflow:A,cancelWorkflow:T,resumeWorkflow:(0,r.useCallback)(e=>{i(e.id),o(e.type),m(e.currentStep),x(e.totalSteps),h(e.data)},[]),steps:y,errors:w.errors,isRecovering:w.isRecovering,handleAsyncOperation:w.handleAsyncOperation,addError:w.addError,removeError:w.removeError,clearAllErrors:w.clearAllErrors,getErrorSummary:w.getErrorSummary};return(0,a.jsx)(l.Provider,{value:Z,children:t})}function c(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useWorkflow must be used within a WorkflowProvider");return e}}},function(e){e.O(0,[175,755,971,117,744],function(){return e(e.s=6623)}),_N_E=e.O()}]);