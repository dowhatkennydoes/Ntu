(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{223:(e,t,s)=>{Promise.resolve().then(s.bind(s,5976))},1011:(e,t,s)=>{"use strict";s.d(t,{P:()=>l,j:()=>o});var a=s(5155),r=s(2115),n=s(8260);let i=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,r.useState)(null),[o,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(0),[u,x]=(0,r.useState)(0),[p,h]=(0,r.useState)({}),[g,b]=(0,r.useState)(!1),[y,f]=(0,r.useState)([]),{saveWorkflowState:j,clearWorkflowState:v,loadWorkflowState:N}=function(e){let{workflowId:t,workflowType:s,currentStep:a,totalSteps:i,data:l,autoSaveInterval:o=3e3}=e,c=(0,r.useRef)(""),d=(0,r.useRef)(),m=(0,r.useCallback)(async e=>{try{let s=localStorage.getItem("ntu-workflow-state"),a=s?JSON.parse(s):{};a[t]=e,localStorage.setItem("ntu-workflow-state",JSON.stringify(a)),console.log("Auto-saved workflow ".concat(t," at step ").concat(e.currentStep))}catch(e){console.error("Failed to auto-save workflow:",e),n.oR.error("Failed to auto-save progress")}},[t]),u=(0,r.useCallback)(()=>{try{let e=localStorage.getItem("ntu-workflow-state");if(e){let s=JSON.parse(e);delete s[t],localStorage.setItem("ntu-workflow-state",JSON.stringify(s))}}catch(e){console.error("Failed to clear workflow state:",e)}},[t]),x=(0,r.useCallback)(()=>{try{let e=localStorage.getItem("ntu-workflow-state");if(e)return JSON.parse(e)[t]||null}catch(e){console.error("Failed to load workflow state:",e)}return null},[t]);return(0,r.useEffect)(()=>{let e=JSON.stringify({currentStep:a,data:l});return e!==c.current&&(d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{m({id:t,type:s,currentStep:a,totalSteps:i,data:l,lastSaved:new Date().toISOString()}),c.current=e},o)),()=>{d.current&&clearTimeout(d.current)}},[t,s,a,i,l,o,m]),{saveWorkflowState:m,clearWorkflowState:u,loadWorkflowState:x}}({workflowId:s||"",workflowType:o,currentStep:d,totalSteps:u,data:p}),w=function(){let[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!1),i=(0,r.useCallback)((e,t,s,a)=>({id:"error-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:e,message:t,step:s,timestamp:new Date().toISOString(),recoverable:"permission"!==e,retryCount:0,maxRetries:"network"===e?3:"processing"===e?2:1,context:a}),[]),l=(0,r.useCallback)(e=>{t(t=>[...t,e]),n.oR.error("Error in ".concat(e.step,": ").concat(e.message),{duration:5e3,id:e.id})},[]),o=(0,r.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e)),n.oR.dismiss(e)},[]),c=(0,r.useCallback)(async(s,r)=>{let i=e.find(e=>e.id===s);if(!i||i.retryCount>=i.maxRetries)return!1;a(!0);try{return t(e=>e.map(e=>e.id===s?{...e,retryCount:e.retryCount+1}:e)),await r(),o(s),n.oR.success("Retry successful for ".concat(i.step)),!0}catch(a){let e={...i,retryCount:i.retryCount+1,message:a instanceof Error?a.message:"Retry failed"};return t(t=>t.map(t=>t.id===s?e:t)),e.retryCount>=e.maxRetries&&n.oR.error("Max retries reached for ".concat(i.step)),!1}finally{a(!1)}},[e,o]),d=(0,r.useCallback)((e,t,s,a,r)=>{let n=[];return e.recoverable&&e.retryCount<e.maxRetries&&n.push({type:"retry",label:"Retry (".concat(e.retryCount,"/").concat(e.maxRetries,")"),description:"Try the failed step again",handler:()=>c(e.id,t),primary:!0}),n.push({type:"rollback",label:"Go Back",description:"Return to the previous step",handler:s}),a&&"validation"!==e.type&&n.push({type:"skip",label:"Skip Step",description:"Continue without completing this step",handler:()=>{o(e.id),a()}}),n.push({type:"exit",label:"Exit Workflow",description:"Cancel and return to dashboard",handler:()=>{r&&r(),o(e.id)}}),n},[c,o]),m=(0,r.useCallback)(async(e,t,s)=>{try{let t=await e();return{success:!0,data:t}}catch(n){let e="unknown",a="An unexpected error occurred";n instanceof Error&&(e=(a=n.message).includes("network")||a.includes("fetch")?"network":a.includes("timeout")?"timeout":a.includes("permission")||a.includes("unauthorized")?"permission":a.includes("validation")||a.includes("invalid")?"validation":"processing");let r=i(e,a,t,s);return l(r),{success:!1,error:r}}},[i,l]),u=(0,r.useCallback)(()=>{e.forEach(e=>n.oR.dismiss(e.id)),t([])},[e]),x=(0,r.useCallback)(()=>{let t=e.length,s=e.filter(e=>!e.recoverable||e.retryCount>=e.maxRetries).length;return{total:t,critical:s,retryable:e.filter(e=>e.recoverable&&e.retryCount<e.maxRetries).length,hasErrors:t>0,canProceed:0===s}},[e]);return{errors:e,isRecovering:s,addError:l,removeError:o,retryError:c,getErrorActions:d,handleAsyncOperation:m,clearAllErrors:u,getErrorSummary:x,createError:i}}(),k=(0,r.useCallback)((e,t,s)=>{l(e),c(t),f(s),x(s.length),m(0),h({}),b(!1),w.clearAllErrors()},[w]),C=(0,r.useCallback)(()=>{d<u-1&&m(e=>e+1)},[d,u]),S=(0,r.useCallback)(()=>{d>0&&m(e=>e-1)},[d]),A=(0,r.useCallback)(e=>{h(t=>({...t,...e}))},[]),T=(0,r.useCallback)(()=>{s&&v(),l(null),c(""),m(0),x(0),h({}),f([]),b(!1),w.clearAllErrors()},[s,v,w]),D=(0,r.useCallback)(()=>{T()},[T]),M={currentWorkflow:s,currentStep:d,totalSteps:u,workflowData:p,isLoading:g,startWorkflow:k,nextStep:C,previousStep:S,updateWorkflowData:A,finishWorkflow:T,cancelWorkflow:D,resumeWorkflow:(0,r.useCallback)(e=>{l(e.id),c(e.type),m(e.currentStep),x(e.totalSteps),h(e.data)},[]),steps:y,errors:w.errors,isRecovering:w.isRecovering,handleAsyncOperation:w.handleAsyncOperation,addError:w.addError,removeError:w.removeError,clearAllErrors:w.clearAllErrors,getErrorSummary:w.getErrorSummary};return(0,a.jsx)(i.Provider,{value:M,children:t})}function o(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useWorkflow must be used within a WorkflowProvider");return e}},5976:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eE});var a=s(5155),r=s(2115),n=s(5246),i=s(184),l=s(4049),o=s(2596),c=s(9688);function d(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,c.QP)((0,o.$)(t))}var m=s(8260),u=s(1011);function x(){var e,t,s;let[o,c]=(0,r.useState)([]),[x,p]=(0,r.useState)(""),[h,g]=(0,r.useState)(!1),{currentWorkflow:b,currentStep:y,steps:f}=(0,u.j)(),j=async e=>{var t;if(e.preventDefault(),!x.trim()||h)return;let s={id:Date.now().toString(),role:"user",content:x,timestamp:new Date().toISOString(),workflowStep:b?"Step ".concat(y+1,": ").concat(null==(t=f[y])?void 0:t.title):void 0};c(e=>[...e,s]),p(""),g(!0);try{let e=await fetch("/api/mere",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:x})});if(!e.ok)throw Error("Failed to get response from Mere");let t=await e.json();c(e=>{var s;return[...e,{...t,aiProcessing:!0,workflowStep:b?"AI Processing: ".concat(null==(s=f[y])?void 0:s.title):void 0}]})}catch(e){m.oR.error("Failed to get response from Mere"),console.error("Error in Mere chat:",e)}finally{g(!1)}};return(0,a.jsxs)("div",{className:"flex h-full flex-col",children:[b&&(0,a.jsx)("div",{className:"bg-blue-50 border-b border-blue-200 p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-700",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Active Workflow: ",null==(e=f[y])?void 0:e.title]}),(null==(t=f[y])?void 0:t.aiAssisted)&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 rounded-full text-xs",children:[(0,a.jsx)(i.A,{className:"h-3 w-3"}),"AI Assisted"]})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,a.jsxs)("div",{className:"mx-auto max-w-3xl space-y-4",children:[0===o.length&&(0,a.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,a.jsx)("p",{className:"text-lg font-medium",children:"Welcome to Mere"}),(0,a.jsx)("p",{className:"text-sm",children:"Ask me anything to get started"}),b&&(0,a.jsxs)("p",{className:"text-xs mt-2 text-blue-600",children:["Currently assisting with: ",null==(s=f[y])?void 0:s.title]})]}),o.map(e=>(0,a.jsx)("div",{className:d("flex w-full","assistant"===e.role?"justify-start":"justify-end"),children:(0,a.jsxs)("div",{className:"max-w-[80%]",children:[e.workflowStep&&(0,a.jsx)("div",{className:"text-xs text-muted-foreground mb-1 px-1",children:e.workflowStep}),(0,a.jsxs)("div",{className:d("rounded-lg px-4 py-2 relative","assistant"===e.role?"bg-accent text-accent-foreground":"bg-primary text-primary-foreground"),children:[e.aiProcessing&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(n.A,{className:"h-2 w-2 text-white animate-spin"})})}),(0,a.jsx)("p",{children:e.content})]})]})},e.id)),h&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-accent rounded-lg px-4 py-2 text-accent-foreground",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("div",{className:"h-2 w-2 animate-bounce rounded-full bg-current"}),(0,a.jsx)("div",{className:"h-2 w-2 animate-bounce rounded-full bg-current [animation-delay:0.2s]"}),(0,a.jsx)("div",{className:"h-2 w-2 animate-bounce rounded-full bg-current [animation-delay:0.4s]"})]})})})]})}),(0,a.jsx)("div",{className:"border-t bg-background p-4",children:(0,a.jsx)("form",{onSubmit:j,className:"mx-auto max-w-3xl",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:x,onChange:e=>p(e.target.value),placeholder:"Ask me anything...",className:"flex-1 rounded-lg border bg-background px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary"}),(0,a.jsx)("button",{type:"submit",disabled:!x.trim()||h,className:"rounded-lg bg-primary p-2 text-primary-foreground hover:bg-primary/90 disabled:opacity-50",children:(0,a.jsx)(l.A,{className:"h-5 w-5"})})]})})})]})}var p=s(5493),h=s(1442),g=s(6903),b=s(7248),y=s(4274),f=s(4333),j=s(2975);let v=[{id:"notebook",name:"Notebook",icon:b.A,href:"/notebook"},{id:"marathon",name:"Marathon",icon:y.A,href:"/marathon"},{id:"yonder",name:"Yonder",icon:f.A,href:"/yonder"},{id:"junction",name:"Junction",icon:j.A,href:"/junction"}];function N(e){let{isCollapsed:t}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:d("px-2",t?"sr-only":""),children:(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Apps"})}),(0,a.jsx)("nav",{className:"grid gap-1",children:v.map(e=>(0,a.jsxs)("a",{href:e.href,className:d("flex items-center gap-3 rounded-lg px-3 py-2 text-gray-500 transition-all hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-50",t?"justify-center":""),children:[(0,a.jsx)(e.icon,{className:"h-5 w-5"}),!t&&(0,a.jsx)("span",{children:e.name})]},e.id))})]})}var w=s(7765),k=s(276);let C=[{id:"1",title:"Research on AI Memory Systems",timestamp:"2 hours ago",isActive:!0},{id:"2",title:"Project Planning",timestamp:"Yesterday",isActive:!1},{id:"3",title:"Meeting Notes",timestamp:"2 days ago",isActive:!1}];function S(e){let{isCollapsed:t}=e,[s]=(0,r.useState)(C);return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:d("flex items-center justify-between px-2",t?"sr-only":""),children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Sessions"}),(0,a.jsx)("button",{className:"rounded-lg p-1 hover:bg-accent",children:(0,a.jsx)(w.A,{className:"h-5 w-5"})})]}),(0,a.jsx)("nav",{className:"grid gap-1",children:s.map(e=>(0,a.jsxs)("a",{href:"/chat/".concat(e.id),className:d("flex items-center gap-3 rounded-lg px-3 py-2 text-gray-500 transition-all hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-50",e.isActive&&"bg-accent text-accent-foreground",t?"justify-center":""),children:[(0,a.jsx)(k.A,{className:"h-5 w-5"}),!t&&(0,a.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,a.jsx)("span",{className:"text-sm",children:e.title}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:e.timestamp})]})]},e.id))})]})}function A(e){let{onViewChange:t,currentView:s}=e,[n,i]=(0,r.useState)(!1);return(0,a.jsxs)(p.P.div,{initial:!1,animate:{width:n?"4rem":"20rem"},className:"relative flex h-full flex-col border-r bg-card",children:[(0,a.jsx)("button",{onClick:()=>i(!n),className:"absolute -right-4 top-8 z-50 flex h-8 w-8 items-center justify-center rounded-full border bg-background shadow-sm",children:n?(0,a.jsx)(h.A,{className:"h-4 w-4"}):(0,a.jsx)(g.A,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex-1 space-y-4 overflow-auto p-4",children:[!n&&t&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("button",{onClick:()=>t("dashboard"),className:"w-full text-left p-2 rounded-lg transition-colors ".concat("dashboard"===s?"bg-primary text-primary-foreground":"hover:bg-accent"),children:"Dashboard"}),(0,a.jsx)("button",{onClick:()=>t("chat"),className:"w-full text-left p-2 rounded-lg transition-colors ".concat("chat"===s?"bg-primary text-primary-foreground":"hover:bg-accent"),children:"Chat with Mere"})]}),(0,a.jsx)(N,{isCollapsed:n}),(0,a.jsx)(S,{isCollapsed:n})]})]})}var T=s(929),D=s(3742),M=s(4648),P=s(4615),R=s(5628),I=s(192),E=s(8673),L=s(8688),z=s(2771),O=s(6474),F=s(9337),W=s(5939),B=s(280),U=s(4500),q=s(5279),V=s(7655),G=s(4236),H=s(5596);function K(e){let{isOpen:t,error:s,isRecovering:n,onRetry:i,onRollback:l,onSkip:o,onExit:c,onClose:d}=e;if(!s)return null;let m=s.recoverable&&s.retryCount<s.maxRetries;return(0,a.jsx)(W.e,{appear:!0,show:t,as:r.Fragment,children:(0,a.jsxs)(B.lG,{as:"div",className:"relative z-50",onClose:d,children:[(0,a.jsx)(W.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,a.jsx)(W.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(B.lG.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-lg bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(()=>{switch(s.type){case"network":return(0,a.jsx)("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(R.A,{className:"h-6 w-6 text-yellow-600"})});case"permission":return(0,a.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(R.A,{className:"h-6 w-6 text-red-600"})});default:return(0,a.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(R.A,{className:"h-6 w-6 text-orange-600"})})}})(),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(B.lG.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:(()=>{switch(s.type){case"network":return"Network Error";case"permission":return"Permission Error";case"validation":return"Validation Error";case"processing":return"Processing Error";case"timeout":return"Timeout Error";default:return"Unexpected Error"}})()}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Error occurred in: ",(0,a.jsx)("span",{className:"font-medium",children:s.step})]}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-2",children:s.message}),s.retryCount>0&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Retry attempts: ",s.retryCount,"/",s.maxRetries]}),s.context&&(0,a.jsxs)("details",{className:"mt-3",children:[(0,a.jsx)("summary",{className:"text-xs text-gray-500 cursor-pointer",children:"Technical details"}),(0,a.jsx)("pre",{className:"text-xs text-gray-600 mt-1 bg-gray-50 p-2 rounded overflow-auto",children:JSON.stringify(s.context,null,2)})]})]})]}),(0,a.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(U.A,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"mt-6 flex flex-col gap-2",children:[m&&(0,a.jsxs)("button",{onClick:async()=>{await i(),d()},disabled:n,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[n?(0,a.jsx)(q.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(q.A,{className:"h-4 w-4"}),"Retry (",s.retryCount,"/",s.maxRetries,")"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{l(),d()},className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[(0,a.jsx)(V.A,{className:"h-4 w-4"}),"Go Back"]}),o&&"validation"!==s.type&&(0,a.jsxs)("button",{onClick:()=>{o(),d()},className:"flex items-center justify-center gap-2 px-4 py-2 bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200",children:[(0,a.jsx)(G.A,{className:"h-4 w-4"}),"Skip Step"]})]}),(0,a.jsxs)("button",{onClick:()=>{c(),d()},className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200",children:[(0,a.jsx)(H.A,{className:"h-4 w-4"}),"Exit Workflow"]})]}),"network"===s.type&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-blue-700",children:[(0,a.jsx)("strong",{children:"Tip:"})," Check your internet connection and try again."]})}),"validation"===s.type&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-yellow-700",children:[(0,a.jsx)("strong",{children:"Tip:"})," Please check your input and correct any errors before proceeding."]})})]})})})})]})})}var J=s(3603);function Q(e){let{isOpen:t,workflowTitle:s,workflowSummary:n,onTakeover:l,onSummarize:o,onClose:c}=e,[d,m]=(0,r.useState)(null);return(0,a.jsx)(W.e,{appear:!0,show:t,as:r.Fragment,children:(0,a.jsxs)(B.lG,{as:"div",className:"relative z-50",onClose:c,children:[(0,a.jsx)(W.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,a.jsx)(W.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(B.lG.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-lg bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(O.A,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(B.lG.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Mere AI Assistant"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:['Help with "',s,'" workflow']})]})]}),(0,a.jsx)("button",{onClick:c,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(U.A,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Workflow Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Current Step"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:n.currentStep})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Estimated Time Remaining"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:n.estimatedTimeRemaining})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Completed (",n.completedSteps.length,")"]}),(0,a.jsx)("ul",{className:"text-sm text-gray-600 space-y-1",children:n.completedSteps.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Remaining (",n.remainingSteps.length,")"]}),(0,a.jsx)("ul",{className:"text-sm text-gray-600 space-y-1",children:n.remainingSteps.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-300 rounded-full"}),e]},t))})]})]})]}),n.suggestedActions.length>0&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"AI Suggestions"}),(0,a.jsx)("ul",{className:"text-sm text-blue-800 space-y-1",children:n.suggestedActions.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"w-4 h-4 bg-blue-200 rounded-full flex items-center justify-center text-xs font-medium text-blue-700 mt-0.5",children:t+1}),e]},t))})]}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"How can Mere help?"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,a.jsx)("button",{onClick:()=>m("takeover"),className:"p-4 border-2 rounded-lg text-left transition-all ".concat("takeover"===d?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(J.A,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900",children:"Complete Workflow"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Let Mere take over and complete the remaining steps automatically using your existing data and preferences."}),(0,a.jsxs)("p",{className:"text-xs text-blue-600 mt-2",children:["Estimated completion: ",n.estimatedTimeRemaining]})]})]})}),(0,a.jsx)("button",{onClick:()=>m("summarize"),className:"p-4 border-2 rounded-lg text-left transition-all ".concat("summarize"===d?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(j.A,{className:"h-5 w-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900",children:"Summarize Progress"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Generate a detailed summary of your progress and provide recommendations for next steps."}),(0,a.jsx)("p",{className:"text-xs text-green-600 mt-2",children:"You retain full control • Continue manually when ready"})]})]})})]})]}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),(0,a.jsxs)("div",{className:"text-xs text-yellow-800",children:[(0,a.jsx)("p",{className:"font-medium",children:"Privacy Notice"}),(0,a.jsx)("p",{children:"Mere will only access data you've already provided in this workflow. No external data will be accessed without explicit permission."})]})]})}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:c,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,a.jsxs)("button",{onClick:()=>{"takeover"===d?l():"summarize"===d&&o(),c()},disabled:!d,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(O.A,{className:"h-4 w-4"}),"takeover"===d?"Let Mere Complete":"summarize"===d?"Generate Summary":"Select Action"]})]})]})})})})]})})}function Y(e){let{className:t}=e,{currentWorkflow:s,currentStep:i,totalSteps:l,steps:o,workflowData:c,isLoading:x,nextStep:p,previousStep:h,finishWorkflow:g,cancelWorkflow:b,errors:y,isRecovering:f,getErrorSummary:j,handleAsyncOperation:v}=(0,u.j)(),[N,w]=(0,r.useState)(!1),[k,C]=(0,r.useState)(null),[S,A]=(0,r.useState)(!1),T=j(),D=()=>{var e;let t=o.slice(0,i).map(e=>e.title),s=o.slice(i+1).map(e=>e.title);return{currentStep:(null==(e=o[i])?void 0:e.title)||"Unknown",completedSteps:t,remainingSteps:s,workflowData:c,estimatedTimeRemaining:"".concat(2*s.length," minutes"),suggestedActions:["Complete remaining steps with smart defaults","Auto-fill forms based on previous inputs","Skip optional steps to speed up completion","Generate summary and next action recommendations"]}};(0,r.useEffect)(()=>{let e=e=>{s&&!N&&("ArrowRight"===e.key&&i<l-1&&T.canProceed?p():"ArrowLeft"===e.key&&i>0?h():"Escape"===e.key?b():("m"===e.key||"M"===e.key)&&A(!0))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[s,i,l,p,h,b,N,T]),(0,r.useEffect)(()=>{y.length>0&&!N&&(C(y[y.length-1]),w(!0))},[y,N]);let M=async()=>{k&&await v(async()=>(await new Promise(e=>setTimeout(e,1e3)),!0),k.step)},P=async()=>{let e=l-i-1;m.oR.success("Mere is taking over the workflow...");for(let s=0;s<e;s++)if(await new Promise(e=>setTimeout(e,1500)),i<l-1){var t;p(),m.oR.success("Mere completed: ".concat(null==(t=o[i+s])?void 0:t.title))}m.oR.success("Workflow completed by Mere!"),setTimeout(()=>g(),1e3)};if(!s)return null;let I=o[i],E=(i+1)/l*100;return(0,a.jsxs)("div",{className:d("bg-white border rounded-lg shadow-sm",t),children:[(0,a.jsxs)("div",{className:"p-4 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-medium",children:null==I?void 0:I.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[T.hasErrors&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-red-600",children:[(0,a.jsx)(R.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[T.total," error",1!==T.total?"s":""]})]}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[i+1," of ",l]})]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:d("h-2 rounded-full transition-all duration-300",T.hasErrors&&!T.canProceed?"bg-red-500":"bg-primary"),style:{width:"".concat(E,"%")}})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(null==I?void 0:I.aiAssisted)&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{children:"Mere is assisting"})]}),T.hasErrors&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[T.retryable>0&&(0,a.jsxs)("span",{className:"text-yellow-600",children:[T.retryable," retryable"]}),T.critical>0&&(0,a.jsxs)("span",{className:"text-red-600",children:[T.critical," critical"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[f&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[(0,a.jsx)(z.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{children:"Recovering..."})]}),(0,a.jsxs)("button",{onClick:()=>A(!0),className:"flex items-center gap-2 px-3 py-1 text-sm bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",title:"Press M to open Mere assistant",children:[(0,a.jsx)(O.A,{className:"h-4 w-4"}),"Ask Mere"]})]})]})]}),(0,a.jsxs)("div",{className:"p-4",children:[(null==I?void 0:I.description)&&(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:I.description}),null==I?void 0:I.component,x&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(z.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Processing..."})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-t bg-gray-50",children:[(0,a.jsx)("button",{onClick:h,disabled:0===i||f,className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:o.map((e,t)=>(0,a.jsx)("div",{className:d("w-2 h-2 rounded-full",t<i?"bg-green-500":t===i?T.hasErrors&&!T.canProceed?"bg-red-500":"bg-primary":"bg-gray-300")},t))}),i===l-1?(0,a.jsxs)("button",{onClick:g,disabled:!T.canProceed||f,className:"px-3 py-2 text-sm bg-primary text-primary-foreground rounded-md hover:bg-primary/90 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(F.A,{className:"h-4 w-4"}),"Complete"]}):(0,a.jsx)("button",{onClick:p,disabled:!T.canProceed||f,className:"px-3 py-2 text-sm bg-primary text-primary-foreground rounded-md hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,a.jsxs)("div",{className:"px-4 py-2 text-xs text-muted-foreground border-t",children:["Progress auto-saved • Use ← → arrows to navigate • Press Esc to cancel • Press M for Mere",T.hasErrors&&(0,a.jsx)("span",{className:"text-red-600",children:" • Resolve errors to continue"})]}),(0,a.jsx)(K,{isOpen:N,error:k,isRecovering:f,onRetry:M,onRollback:h,onSkip:()=>{i<l-1&&p()},onExit:b,onClose:()=>{w(!1),C(null)}}),(0,a.jsx)(Q,{isOpen:S,workflowTitle:s||"Unknown Workflow",workflowSummary:D(),onTakeover:P,onSummarize:()=>{let e=D(),t="\nWorkflow Summary: ".concat(s,"\n\nProgress: ").concat(e.completedSteps.length,"/").concat(o.length," steps completed\n\n✅ Completed:\n").concat(e.completedSteps.map(e=>"• ".concat(e)).join("\n"),"\n\n⏳ Remaining:\n").concat(e.remainingSteps.map(e=>"• ".concat(e)).join("\n"),"\n\n\uD83E\uDD16 AI Recommendations:\n").concat(e.suggestedActions.map((e,t)=>"".concat(t+1,". ").concat(e)).join("\n"),"\n\nEstimated completion time: ").concat(e.estimatedTimeRemaining,"\n    ").trim();navigator.clipboard.writeText(t),m.oR.success("Workflow summary copied to clipboard!")},onClose:()=>A(!1)})]})}var X=s(2612),_=s(2247);function $(){let{updateWorkflowData:e,nextStep:t,handleAsyncOperation:s}=(0,u.j)(),[n,i]=(0,r.useState)(""),l=[{id:"network",name:"Network Error",description:"Simulate a network connection failure",icon:X.A,color:"text-yellow-600",bgColor:"bg-yellow-50"},{id:"permission",name:"Permission Error",description:"Simulate insufficient permissions",icon:_.A,color:"text-red-600",bgColor:"bg-red-50"},{id:"validation",name:"Validation Error",description:"Simulate invalid input data",icon:R.A,color:"text-orange-600",bgColor:"bg-orange-50"},{id:"success",name:"Success Path",description:"Complete the step successfully",icon:R.A,color:"text-green-600",bgColor:"bg-green-50"}],o=async()=>{n&&(e({errorDemo:n}),"success"===n?(await s(async()=>(await new Promise(e=>setTimeout(e,1e3)),{success:!0}),"Demo Step",{errorType:n})).success&&t():await s(async()=>{switch(await new Promise(e=>setTimeout(e,1e3)),n){case"network":throw Error("Network request failed: Unable to connect to server");case"permission":throw Error("Permission denied: Insufficient access rights");case"validation":throw Error("Validation failed: Invalid input data format");default:throw Error("Unknown error occurred")}},"Demo Step",{errorType:n}))};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Error Handling Demo"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Select an error type to see how the workflow handles different failure scenarios. Each error type demonstrates different recovery options."})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:l.map(e=>(0,a.jsx)("button",{onClick:()=>i(e.id),className:"p-4 border-2 rounded-lg text-left transition-all ".concat(n===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg ".concat(e.bgColor," flex items-center justify-center"),children:(0,a.jsx)(e.icon,{className:"h-5 w-5 ".concat(e.color)})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),"network"===e.id&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Retryable • Max 3 attempts • Rollback available"}),"permission"===e.id&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Non-retryable • Rollback only • Exit available"}),"validation"===e.id&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Retryable • Max 1 attempt • No skip option"})]})]})},e.id))}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"How Error Recovery Works"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Retry:"})," Attempts the failed operation again (if retryable)"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Rollback:"})," Returns to the previous step"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Skip:"})," Continues without completing the step (when available)"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Exit:"})," Cancels the entire workflow"]})]})]}),(0,a.jsx)("button",{onClick:o,disabled:!n,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"success"===n?"Continue Successfully":"Trigger Error"})]})}function Z(){var e;let{updateWorkflowData:t,nextStep:s,finishWorkflow:n}=(0,u.j)(),[i,l]=(0,r.useState)({id:Date.now().toString(),title:"",nodes:[],reasoning:""}),[o,c]=(0,r.useState)([]),[m,x]=(0,r.useState)(0),p=[{id:"1",title:"Project Meeting Notes",content:"Discussed Q4 goals and resource allocation",type:"source",connections:[],confidence:.9},{id:"2",title:"Budget Analysis",content:"Current budget allows for 3 new hires",type:"source",connections:[],confidence:.85},{id:"3",title:"Market Research",content:"Customer demand increased 25% this quarter",type:"source",connections:[],confidence:.8},{id:"4",title:"Team Feedback",content:"Engineering team needs additional support",type:"source",connections:[],confidence:.75}],g=i.nodes.length>0&&i.reasoning&&m<=4;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-blue-900",children:"Memory Chain Generation"}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"Create reasoning flows in ≤ 4 actions"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-900",children:[m,"/",4]}),(0,a.jsx)("div",{className:"text-xs text-blue-600",children:"actions used"})]})]}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(m/4*100,"%")}})})})]}),(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-medium",children:"1"}),"Select Source Memories"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3",children:p.map(e=>(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void(!(m>=4)&&c(e=>{let s=e.includes(t),a=s?e.filter(e=>e!==t):[...e,t];return s?x(e=>e-1):x(e=>e+1),a}))},disabled:m>=4&&!o.includes(e.id),className:d("p-3 border-2 rounded-lg text-left transition-all",o.includes(e.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300",m>=4&&!o.includes(e.id)?"opacity-50 cursor-not-allowed":""),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.content})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-3",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[Math.round(100*e.confidence),"%"]}),o.includes(e.id)&&(0,a.jsx)(F.A,{className:"h-4 w-4 text-blue-600"})]})]})},e.id))})]}),o.length>=2&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-sm font-medium",children:"2"}),"Generate Reasoning"]}),i.reasoning?(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-medium text-green-900 mb-2",children:"AI-Generated Reasoning"}),(0,a.jsx)("p",{className:"text-sm text-green-800 whitespace-pre-line",children:i.reasoning})]}):(0,a.jsxs)("button",{onClick:()=>{var e,t,s,a;if(m>=4)return;let r=p.filter(e=>o.includes(e.id)),n="Based on the selected memories, I can see a clear pattern:\n\n1. ".concat(null==(e=r[0])?void 0:e.title,": ").concat(null==(t=r[0])?void 0:t.content,"\n2. ").concat(null==(s=r[1])?void 0:s.title,": ").concat(null==(a=r[1])?void 0:a.content,"\n\nThese memories suggest that we should prioritize hiring to meet increased demand while staying within budget constraints.");l(e=>({...e,reasoning:n,nodes:r})),x(e=>e+1)},disabled:m>=4,className:"w-full p-4 border-2 border-dashed border-green-300 rounded-lg text-green-700 hover:bg-green-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,a.jsx)(O.A,{className:"h-5 w-5"}),"Generate AI Reasoning (",m+1,"/",4,")"]})]}),i.reasoning&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center text-sm font-medium",children:"3"}),"Add Conclusion"]}),i.nodes.some(e=>"conclusion"===e.type)?(0,a.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-medium text-purple-900 mb-2",children:"Strategic Conclusion"}),(0,a.jsx)("p",{className:"text-sm text-purple-800",children:null==(e=i.nodes.find(e=>"conclusion"===e.type))?void 0:e.content})]}):(0,a.jsxs)("button",{onClick:()=>{if(m>=4)return;let e={id:"conclusion-"+Date.now(),title:"Strategic Recommendation",content:"Hire 2 engineers and 1 designer to support Q4 goals while maintaining budget compliance",type:"conclusion",connections:o,confidence:.85};l(t=>({...t,nodes:[...t.nodes,e],title:"Q4 Hiring Strategy Chain"})),x(e=>e+1)},disabled:m>=4,className:"w-full p-4 border-2 border-dashed border-purple-300 rounded-lg text-purple-700 hover:bg-purple-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,a.jsx)(w.A,{className:"h-5 w-5"}),"Add Strategic Conclusion (",m+1,"/",4,")"]})]}),i.nodes.length>0&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-6 h-6 bg-gray-100 text-gray-600 rounded-full flex items-center justify-center text-sm font-medium",children:"4"}),"Memory Chain Visualization"]}),(0,a.jsx)("div",{className:"space-y-3",children:i.nodes.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:d("w-3 h-3 rounded-full","source"===e.type?"bg-blue-500":"reasoning"===e.type?"bg-green-500":"bg-purple-500")}),(0,a.jsxs)("div",{className:"flex-1 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h6",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.content})]}),t<i.nodes.length-1&&(0,a.jsx)(h.A,{className:"h-4 w-4 text-gray-400"})]},e.id))})]}),g&&(0,a.jsxs)("button",{onClick:()=>{t({memoryChain:i,actionCount:m}),n()},className:"w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center justify-center gap-2",children:[(0,a.jsx)(E.A,{className:"h-5 w-5"}),"Complete Memory Chain (",m,"/",4," actions)"]}),(0,a.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Chain Progress"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("div",{className:d("w-2 h-2 rounded-full",o.length>=2?"bg-green-500":"bg-gray-300")}),(0,a.jsxs)("span",{className:o.length>=2?"text-green-700":"text-gray-500",children:["Select source memories (",o.length,"/2+)"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("div",{className:d("w-2 h-2 rounded-full",i.reasoning?"bg-green-500":"bg-gray-300")}),(0,a.jsx)("span",{className:i.reasoning?"text-green-700":"text-gray-500",children:"Generate AI reasoning"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("div",{className:d("w-2 h-2 rounded-full",i.nodes.some(e=>"conclusion"===e.type)?"bg-green-500":"bg-gray-300")}),(0,a.jsx)("span",{className:i.nodes.some(e=>"conclusion"===e.type)?"text-green-700":"text-gray-500",children:"Add strategic conclusion"})]})]})]})]})}var ee=s(6465),et=s(9735),es=s(7761),ea=s(6865);function er(){let{updateWorkflowData:e,nextStep:t,handleAsyncOperation:s,finishWorkflow:n}=(0,u.j)(),[l,o]=(0,r.useState)([]),[c,x]=(0,r.useState)(!1),[p,h]=(0,r.useState)(new Set),[g,b]=(0,r.useState)(new Map),[y,f]=(0,r.useState)(new Set),v=(0,r.useRef)(null),N={"application/pdf":{icon:j.A,label:"PDF Document",color:"text-red-600"},"application/msword":{icon:j.A,label:"Word Document",color:"text-blue-600"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{icon:j.A,label:"Word Document",color:"text-blue-600"},"text/plain":{icon:j.A,label:"Text File",color:"text-gray-600"},"text/markdown":{icon:j.A,label:"Markdown File",color:"text-purple-600"},"image/jpeg":{icon:ee.A,label:"JPEG Image",color:"text-green-600"},"image/png":{icon:ee.A,label:"PNG Image",color:"text-green-600"},"audio/mpeg":{icon:et.A,label:"MP3 Audio",color:"text-orange-600"},"audio/wav":{icon:et.A,label:"WAV Audio",color:"text-orange-600"},"video/mp4":{icon:es.A,label:"MP4 Video",color:"text-purple-600"},"video/quicktime":{icon:es.A,label:"MOV Video",color:"text-purple-600"}},w=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?x(!0):"dragleave"===e.type&&x(!1)},[]),k=(0,r.useCallback)(async e=>{e.preventDefault(),e.stopPropagation(),x(!1);let t=Array.from(e.dataTransfer.files);await S(t)},[]),C=async e=>{let t=Array.from(e.target.files||[]);await S(t)},S=async e=>{let t=e.map(e=>({id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:e.name,size:e.size,type:e.type,lastModified:e.lastModified}));for(let s of(o(e=>[...e,...t]),t)){let t=e.find(e=>e.name===s.name&&e.size===s.size);t&&A(s,t)}},A=async(e,t)=>{h(t=>{let s=new Set(t);return s.add(e.id),s});let a=await s(async()=>{let s;if(await new Promise(e=>setTimeout(e,2e3+3e3*Math.random())),e.type.startsWith("text/")||e.type.includes("document")){let a="text/plain"===e.type?await t.text():"Extracted text content from ".concat(e.name,". This would contain the actual document content after OCR/parsing.");s={title:e.name.replace(/\.[^/.]+$/,""),content:a,metadata:{fileType:"document",wordCount:a.split(" ").length,language:"en",confidence:.92},tags:["document","uploaded","text"],summary:"Document summary: ".concat(a.substring(0,150),"...")}}else if(e.type.startsWith("audio/"))s={title:"Transcript: ".concat(e.name),content:"[Transcribed audio content from ".concat(e.name,"]\n\nSpeaker 1: Welcome to our meeting today.\nSpeaker 2: Thank you for joining us.\n[AI would provide actual transcription here]"),metadata:{fileType:"audio",duration:"15:30",language:"en",confidence:.87},tags:["audio","transcript","meeting"],summary:"Audio transcript covering meeting discussion and key points."};else if(e.type.startsWith("image/"))s={title:"Image Analysis: ".concat(e.name),content:"[OCR extracted text from ".concat(e.name,"]\n\nDetected text content:\n- Visual elements described\n- Text extraction results\n[AI would provide actual OCR results here]"),metadata:{fileType:"image",language:"en",confidence:.78},tags:["image","ocr","visual"],summary:"Image analysis with extracted text and visual content description."};else if(e.type.startsWith("video/"))s={title:"Video Analysis: ".concat(e.name),content:"[Video content analysis from ".concat(e.name,"]\n\nVideo transcript:\n[Extracted audio would be transcribed here]\n\nVisual analysis:\n[Scene descriptions and key frames]"),metadata:{fileType:"video",duration:"8:45",language:"en",confidence:.82},tags:["video","multimedia","analysis"],summary:"Video content analysis including transcript and visual elements."};else throw Error("Unsupported file type: ".concat(e.type));return s},"Parse ".concat(e.name),{fileName:e.name,fileType:e.type});h(t=>{let s=new Set(t);return s.delete(e.id),s}),a.success&&a.data&&(b(t=>{let s=new Map(t);return s.set(e.id,a.data),s}),f(t=>{let s=new Set(t);return s.add(e.id),s}),m.oR.success("Successfully parsed ".concat(e.name)))};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:d("border-2 border-dashed rounded-lg p-8 text-center transition-colors",c?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragEnter:w,onDragLeave:w,onDragOver:w,onDrop:k,children:[(0,a.jsx)("input",{ref:v,type:"file",multiple:!0,onChange:C,accept:".pdf,.doc,.docx,.txt,.md,.jpg,.jpeg,.png,.mp3,.wav,.mp4,.mov",className:"hidden"}),(0,a.jsx)(D.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Files for Auto-Processing"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Drag and drop files here, or click to browse. Files will be automatically parsed and converted to memories."}),(0,a.jsx)("button",{onClick:()=>{var e;return null==(e=v.current)?void 0:e.click()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Choose Files"}),(0,a.jsx)("div",{className:"mt-4 text-sm text-gray-500",children:"Supported: PDF, Word, Text, Markdown, Images (JPG, PNG), Audio (MP3, WAV), Video (MP4, MOV)"})]}),l.length>0&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b bg-gray-50",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Uploaded Files"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[l.length," file",1!==l.length?"s":""," uploaded •",g.size," processed •",y.size," selected for memory creation"]})]}),(0,a.jsx)("div",{className:"divide-y",children:l.map(e=>{let t=(e=>{let t=N[e];return t?t.icon:j.A})(e.type),s=p.has(e.id),r=g.get(e.id),n=y.has(e.id);return(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:d("w-10 h-10 rounded-lg flex items-center justify-center",r?"bg-green-100":s?"bg-blue-100":"bg-gray-100"),children:s?(0,a.jsx)(O.A,{className:"h-5 w-5 text-blue-600 animate-pulse"}):r?(0,a.jsx)(ea.A,{className:"h-5 w-5 text-green-600"}):(0,a.jsx)(t,{className:d("h-5 w-5",(e=>{let t=N[e];return t?t.color:"text-gray-600"})(e.type))})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(e=>{let t=N[e];return t?t.label:"Unknown File"})(e.type)," • ",(e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]})(e.size)]}),s&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-blue-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),(0,a.jsx)("span",{children:"Processing file..."})]}),r&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-600 mb-1",children:[(0,a.jsx)(ea.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["Parsed successfully • ",Math.round(100*r.metadata.confidence),"% confidence"]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:r.summary}),(0,a.jsx)("div",{className:"flex gap-1 mt-2",children:r.tags.slice(0,3).map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:e},e))})]})]}),r&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{let e="Title: ".concat(r.title,"\n\nContent:\n").concat(r.content,"\n\nSummary:\n").concat(r.summary,"\n\nTags: ").concat(r.tags.join(", "));navigator.clipboard.writeText(e),m.oR.success("Content copied to clipboard")},className:"p-1 text-gray-400 hover:text-gray-600",title:"Preview content",children:(0,a.jsx)(i.A,{className:"h-4 w-4"})}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:n,onChange:()=>{var t;return t=e.id,void f(e=>{let s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s})},className:"sr-only"}),(0,a.jsx)("div",{className:d("w-4 h-4 border-2 rounded flex items-center justify-center",n?"bg-blue-600 border-blue-600":"border-gray-300"),children:n&&(0,a.jsx)(ea.A,{className:"h-3 w-3 text-white"})})]})]})]})})]})},e.id)})})]}),g.size>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[y.size," file",1!==y.size?"s":""," selected for memory creation"]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>f(new Set(g.keys())),className:"px-4 py-2 text-sm text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Select All"}),(0,a.jsxs)("button",{onClick:()=>{let t=Array.from(y).map(e=>({id:e,...g.get(e)})).filter(e=>e.title);e({uploadedFiles:l.filter(e=>y.has(e.id)),parsedContent:t,memoryCount:t.length}),m.oR.success("Created ".concat(t.length," memories from uploaded files")),n()},disabled:0===y.size,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(O.A,{className:"h-4 w-4"}),"Create ",y.size," Memor",1!==y.size?"ies":"y"]})]})]}),(l.length>0||p.size>0)&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Processing Statistics"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-blue-600 font-medium",children:l.length}),(0,a.jsx)("div",{className:"text-blue-700",children:"Files Uploaded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-blue-600 font-medium",children:p.size}),(0,a.jsx)("div",{className:"text-blue-700",children:"Currently Processing"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-blue-600 font-medium",children:g.size}),(0,a.jsx)("div",{className:"text-blue-700",children:"Successfully Parsed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-blue-600 font-medium",children:y.size}),(0,a.jsx)("div",{className:"text-blue-700",children:"Ready for Memory"})]})]})]})]})}var en=s(5433),ei=s(4393),el=s(4219);function eo(){var e;let{updateWorkflowData:t,nextStep:s,finishWorkflow:n,handleAsyncOperation:l}=(0,u.j)(),[o,c]=(0,r.useState)({title:"",description:"",category:"general",privacy:"private",template:"blank",tags:[],color:"blue",collaborators:[]}),[x,p]=(0,r.useState)("setup"),[h,g]=(0,r.useState)(""),[y,f]=(0,r.useState)(!1),[v]=(0,r.useState)([{id:"blank",name:"Blank Notebook",description:"Start from scratch with a clean notebook",sections:["Notes"],icon:"\uD83D\uDCDD",color:"gray"},{id:"research",name:"Research Project",description:"Organize research with references, findings, and conclusions",sections:["Background","Research Notes","Sources","Analysis","Conclusions"],icon:"\uD83D\uDD0D",color:"blue"},{id:"meeting",name:"Meeting Notes",description:"Structure for meeting documentation and follow-ups",sections:["Agenda","Discussion Points","Decisions","Action Items"],icon:"\uD83E\uDD1D",color:"green"},{id:"learning",name:"Learning Journal",description:"Track learning progress with concepts, examples, and practice",sections:["Key Concepts","Examples","Practice Notes","Questions","Summary"],icon:"\uD83D\uDCDA",color:"purple"},{id:"project",name:"Project Planning",description:"Comprehensive project management and documentation",sections:["Overview","Requirements","Timeline","Resources","Progress","Review"],icon:"\uD83C\uDFAF",color:"orange"}]),N=[{id:"general",name:"General",icon:"\uD83D\uDCC4"},{id:"work",name:"Work",icon:"\uD83D\uDCBC"},{id:"personal",name:"Personal",icon:"\uD83D\uDC64"},{id:"education",name:"Education",icon:"\uD83C\uDF93"},{id:"research",name:"Research",icon:"\uD83D\uDD2C"},{id:"creative",name:"Creative",icon:"\uD83C\uDFA8"}],w=[{id:"blue",name:"Blue",class:"bg-blue-500"},{id:"green",name:"Green",class:"bg-green-500"},{id:"purple",name:"Purple",class:"bg-purple-500"},{id:"orange",name:"Orange",class:"bg-orange-500"},{id:"red",name:"Red",class:"bg-red-500"},{id:"gray",name:"Gray",class:"bg-gray-500"}],k=async()=>{if(!o.description.trim())return;f(!0);let e=await l(async()=>{await new Promise(e=>setTimeout(e,1500));let e=o.description.toLowerCase();return e.includes("meeting")||e.includes("discussion")?"Meeting Notes - "+new Date().toLocaleDateString():e.includes("research")||e.includes("study")?"Research Project: "+o.description.split(" ").slice(0,3).join(" "):e.includes("learn")||e.includes("course")?"Learning Journal: "+o.description.split(" ").slice(0,3).join(" "):e.includes("project")||e.includes("plan")?"Project: "+o.description.split(" ").slice(0,3).join(" "):o.description.split(" ").slice(0,4).join(" ").replace(/^\w/,e=>e.toUpperCase())},"Generate semantic title",{description:o.description});f(!1),e.success&&e.data&&(g(e.data),m.oR.success("Generated title suggestion!"))};(0,r.useEffect)(()=>{if(o.description.length>10){let e=setTimeout(k,1e3);return()=>clearTimeout(e)}},[o.description]);let C=e=>{e.trim()&&!o.tags.includes(e.trim())&&c(t=>({...t,tags:[...t.tags,e.trim()]}))},S=()=>v.find(e=>e.id===o.template)||v[0],A=o.title.trim()&&o.template;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:["Setup","Template","Content","Sharing"].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:d("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",x===e.toLowerCase()?"bg-blue-600 text-white":["setup","template","content","sharing"].indexOf(x)>t?"bg-green-500 text-white":"bg-gray-200 text-gray-600"),children:["setup","template","content","sharing"].indexOf(x)>t?(0,a.jsx)(F.A,{className:"h-4 w-4"}):t+1}),(0,a.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:e}),t<3&&(0,a.jsx)("div",{className:"w-8 h-px bg-gray-300 mx-4"})]},e))}),"setup"===x&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(b.A,{className:"h-5 w-5 text-blue-600"}),"Notebook Setup"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notebook Title *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:o.title,onChange:e=>c(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter notebook title..."}),h&&h!==o.title&&(0,a.jsxs)("button",{onClick:()=>c(e=>({...e,title:h})),className:"absolute right-2 top-2 px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:['Use: "',h.substring(0,20),'..."']})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("textarea",{value:o.description,onChange:e=>c(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Describe what this notebook will be used for..."}),y&&(0,a.jsxs)("div",{className:"absolute right-2 top-2 flex items-center gap-1 text-xs text-blue-600",children:[(0,a.jsx)(O.A,{className:"h-3 w-3 animate-pulse"}),"Generating title..."]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Adding a description will help generate a smart title suggestion"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:N.map(e=>(0,a.jsxs)("button",{onClick:()=>c(t=>({...t,category:e.id})),className:d("p-3 border rounded-lg text-sm flex items-center gap-2 transition-colors",o.category===e.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:[(0,a.jsx)("span",{children:e.icon}),e.name]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Privacy"}),(0,a.jsx)("div",{className:"space-y-2",children:[{id:"private",name:"Private",desc:"Only you can access this notebook"},{id:"shared",name:"Shared",desc:"Share with specific people"},{id:"public",name:"Public",desc:"Anyone with the link can view"}].map(e=>(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,a.jsx)("input",{type:"radio",name:"privacy",value:e.id,checked:o.privacy===e.id,onChange:e=>c(t=>({...t,privacy:e.target.value})),className:"mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.desc})]})]},e.id))})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{onClick:()=>p("template"),disabled:!o.title.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue to Template"})})]})]}),"template"===x&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"h-5 w-5 text-blue-600"}),"Choose Template"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(e=>(0,a.jsx)("button",{onClick:()=>c(t=>({...t,template:e.id})),className:d("p-4 border-2 rounded-lg text-left transition-all",o.template===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"text-2xl",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Includes sections:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.sections.slice(0,3).map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:e},e)),e.sections.length>3&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:["+",e.sections.length-3," more"]})]})]})]}),o.template===e.id&&(0,a.jsx)(F.A,{className:"h-5 w-5 text-blue-600"})]})},e.id))}),o.template&&(0,a.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Template Preview"}),(0,a.jsx)("div",{className:"space-y-2",children:S().sections.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(en.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-gray-700",children:e})]},e))})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>p("setup"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back"}),(0,a.jsx)("button",{onClick:()=>p("content"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Continue to Content"})]})]})]}),"content"===x&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(ei.A,{className:"h-5 w-5 text-blue-600"}),"Customize Content"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notebook Color"}),(0,a.jsx)("div",{className:"flex gap-2",children:w.map(e=>(0,a.jsx)("button",{onClick:()=>c(t=>({...t,color:e.id})),className:d("w-8 h-8 rounded-full border-2 transition-all",e.class,o.color===e.id?"border-gray-800 scale-110":"border-gray-300"),title:e.name},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:o.tags.map(e=>(0,a.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm flex items-center gap-1",children:[e,(0,a.jsx)("button",{onClick:()=>{c(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},className:"text-blue-500 hover:text-blue-700",children:"\xd7"})]},e))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Add tag...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",onKeyDown:e=>{"Enter"===e.key&&(C(e.currentTarget.value),e.currentTarget.value="")}}),(0,a.jsx)("button",{onClick:e=>{let t=e.currentTarget.previousElementSibling;(null==t?void 0:t.value)&&(C(t.value),t.value="")},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Add"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>p("template"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back"}),(0,a.jsx)("button",{onClick:()=>p("sharing"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Continue to Sharing"})]})]})]}),"sharing"===x&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(el.A,{className:"h-5 w-5 text-blue-600"}),"Sharing & Collaboration"]}),(0,a.jsxs)("div",{className:"space-y-4",children:["shared"===o.privacy&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Collaborators"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"email",placeholder:"Enter email address...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",onKeyDown:e=>{"Enter"===e.key&&e.currentTarget.value&&(c(t=>({...t,collaborators:[...t.collaborators,e.currentTarget.value]})),e.currentTarget.value="")}}),(0,a.jsx)("div",{className:"space-y-1",children:o.collaborators.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e}),(0,a.jsx)("button",{onClick:()=>c(t=>({...t,collaborators:t.collaborators.filter(t=>t!==e)})),className:"text-red-500 hover:text-red-700 text-sm",children:"Remove"})]},e))})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-4",children:[(0,a.jsxs)("h5",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),"Notebook Preview"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:d("w-4 h-4 rounded",(w.find(e=>e.id===o.color)||w[0]).class)}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:o.title}),(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-200 text-gray-600 text-xs rounded",children:null==(e=N.find(e=>e.id===o.category))?void 0:e.name})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:o.description||"No description"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)("span",{children:S().name}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[S().sections.length," sections"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{className:"capitalize",children:o.privacy}),o.tags.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[o.tags.length," tag",1!==o.tags.length?"s":""]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>p("content"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back"}),(0,a.jsxs)("button",{onClick:()=>{let e=S();t({notebook:{...o,id:"notebook-".concat(Date.now()),template:e,createdAt:new Date().toISOString(),sections:e.sections.map(e=>({id:"section-".concat(Date.now(),"-").concat(e.toLowerCase().replace(/\s+/g,"-")),title:e,content:"",notes:[]}))}}),m.oR.success("Created notebook: ".concat(o.title)),n()},disabled:!A,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(b.A,{className:"h-4 w-4"}),"Create Notebook"]})]})]})]})]})}var ec=s(1151);function ed(){var e,t,s;let{updateWorkflowData:n,finishWorkflow:l,handleAsyncOperation:o}=(0,u.j)(),[c,x]=(0,r.useState)({id:"study-set-".concat(Date.now()),title:"",description:"",category:"general",cards:[],studyMode:"flashcards",settings:{shuffleCards:!0,showHints:!0,repeatMissed:!0}}),[p,h]=(0,r.useState)("setup"),[g,b]=(0,r.useState)(""),[y,f]=(0,r.useState)(!1),[v,N]=(0,r.useState)({front:"",back:"",hint:""}),[k,C]=(0,r.useState)(0),[S,A]=(0,r.useState)(!1),T=async()=>{if(!g.trim())return;f(!0);let e=await o(async()=>{await new Promise(e=>setTimeout(e,3e3));let e=g.split(/[.!?]+/).filter(e=>e.trim().length>20),t=[];for(let a=0;a<Math.min(e.length,8);a++){let r,n,i,l=e[a].trim();if(l.includes("because")||l.includes("due to")){var s;let e=l.split(/because|due to/i);r="Why ".concat(e[0].trim().toLowerCase(),"?"),n="Because ".concat((null==(s=e[1])?void 0:s.trim())||"of specific reasons mentioned in the content"),i="Think about cause and effect relationships"}else if(l.includes("is")||l.includes("are")){let e=l.split(/\bis\b|\bare\b/i);e[0]&&e[1]?(r="What ".concat(e[0].trim().toLowerCase(),"?"),n=e[1].trim(),i="Consider the definition or characteristics"):(r="Complete: ".concat(l.substring(0,l.length/2),"..."),n=l,i="Think about the complete statement")}else{let e=l.split(" ");if(e.length>5){let t=Math.floor(e.length/2),s=e[t];e[t]="____",r=e.join(" "),n=s,i="Think about what fits in the context"}else r='What does this statement mean: "'.concat(l,'"'),n="This refers to the concept explained in the source material",i="Consider the main idea being conveyed"}t.push({id:"card-".concat(Date.now(),"-").concat(a),front:r,back:n,category:c.category,difficulty:"medium",tags:["auto-generated"],hint:i})}return t},"Generate flashcards from content",{contentLength:g.length});f(!1),e.success&&e.data&&(x(t=>({...t,cards:[...t.cards,...e.data]})),m.oR.success("Generated ".concat(e.data.length," flashcards!")))},D=c.title.trim()&&c.cards.length>0;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:["Setup","Content","Preview"].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:d("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",p===e.toLowerCase()?"bg-purple-600 text-white":["setup","content","preview"].indexOf(p)>t?"bg-green-500 text-white":"bg-gray-200 text-gray-600"),children:["setup","content","preview"].indexOf(p)>t?(0,a.jsx)(F.A,{className:"h-4 w-4"}):t+1}),(0,a.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:e}),t<2&&(0,a.jsx)("div",{className:"w-8 h-px bg-gray-300 mx-4"})]},e))}),"setup"===p&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(M.A,{className:"h-5 w-5 text-purple-600"}),"Study Set Setup"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Study Set Title *"}),(0,a.jsx)("input",{type:"text",value:c.title,onChange:e=>x(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter study set title..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("textarea",{value:c.description,onChange:e=>x(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",rows:3,placeholder:"Describe what this study set covers..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[{id:"general",name:"General Knowledge",icon:"\uD83D\uDCDA"},{id:"language",name:"Language",icon:"\uD83C\uDF0D"},{id:"science",name:"Science",icon:"\uD83D\uDD2C"},{id:"history",name:"History",icon:"\uD83C\uDFDB️"},{id:"math",name:"Mathematics",icon:"\uD83D\uDCD0"},{id:"technology",name:"Technology",icon:"\uD83D\uDCBB"},{id:"business",name:"Business",icon:"\uD83D\uDCBC"},{id:"medical",name:"Medical",icon:"\uD83C\uDFE5"}].map(e=>(0,a.jsxs)("button",{onClick:()=>x(t=>({...t,category:e.id})),className:d("p-3 border rounded-lg text-sm flex items-center gap-2 transition-colors",c.category===e.id?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-gray-300"),children:[(0,a.jsx)("span",{children:e.icon}),e.name]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Study Mode"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[{id:"flashcards",name:"Flashcards",desc:"Classic card review"},{id:"quiz",name:"Quiz Mode",desc:"Multiple choice questions"},{id:"review",name:"Review",desc:"Spaced repetition"}].map(e=>(0,a.jsxs)("label",{className:"flex flex-col p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,a.jsx)("input",{type:"radio",name:"studyMode",value:e.id,checked:c.studyMode===e.id,onChange:e=>x(t=>({...t,studyMode:e.target.value})),className:"sr-only"}),(0,a.jsx)("div",{className:d("font-medium",c.studyMode===e.id?"text-purple-700":"text-gray-900"),children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.desc}),c.studyMode===e.id&&(0,a.jsx)(F.A,{className:"h-4 w-4 text-purple-600 mt-1 self-end"})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Study Settings"}),(0,a.jsx)("div",{className:"space-y-2",children:[{key:"shuffleCards",label:"Shuffle cards during study",desc:"Randomize card order"},{key:"showHints",label:"Show hints when available",desc:"Display helpful hints on cards"},{key:"repeatMissed",label:"Repeat missed cards",desc:"Show incorrect answers again"}].map(e=>(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,a.jsx)("input",{type:"checkbox",checked:c.settings[e.key],onChange:t=>x(s=>({...s,settings:{...s.settings,[e.key]:t.target.checked}})),className:"mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.label}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.desc})]})]},e.key))})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{onClick:()=>h("content"),disabled:!c.title.trim(),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue to Content"})})]})]}),"content"===p&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(O.A,{className:"h-5 w-5 text-purple-600"}),"Auto-Generate from Content"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Source Content"}),(0,a.jsx)("textarea",{value:g,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",rows:6,placeholder:"Paste your study material here and we'll automatically generate flashcards..."}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"AI will analyze your content and create relevant flashcards automatically"})]}),(0,a.jsx)("button",{onClick:T,disabled:!g.trim()||y,className:"w-full px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.A,{className:"h-5 w-5 animate-spin"}),"Generating Flashcards..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.A,{className:"h-5 w-5"}),"Generate Flashcards (Step 1 of 3)"]})})]})]}),(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"h-5 w-5 text-purple-600"}),"Add Manual Cards"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Front (Question) *"}),(0,a.jsx)("textarea",{value:v.front,onChange:e=>N(t=>({...t,front:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",rows:3,placeholder:"Enter the question or prompt..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Back (Answer) *"}),(0,a.jsx)("textarea",{value:v.back,onChange:e=>N(t=>({...t,back:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",rows:3,placeholder:"Enter the answer or explanation..."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hint (Optional)"}),(0,a.jsx)("input",{type:"text",value:v.hint,onChange:e=>N(t=>({...t,hint:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Add a helpful hint..."})]}),(0,a.jsxs)("button",{onClick:()=>{if(!v.front.trim()||!v.back.trim())return void m.oR.error("Both front and back are required");let e={id:"card-".concat(Date.now()),front:v.front.trim(),back:v.back.trim(),hint:v.hint.trim()||void 0,category:c.category,difficulty:"medium",tags:["manual"]};x(t=>({...t,cards:[...t.cards,e]})),N({front:"",back:"",hint:""}),m.oR.success("Flashcard added!")},disabled:!v.front.trim()||!v.back.trim(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"h-4 w-4"}),"Add Card"]})]})]}),c.cards.length>0&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"h-5 w-5 text-purple-600"}),"Current Cards (",c.cards.length,")"]})}),(0,a.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:c.cards.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-1",children:"Front:"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:e.front})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-1",children:"Back:"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:e.back})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-3",children:[(0,a.jsxs)("select",{value:e.difficulty,onChange:t=>{var s,a;return s=e.id,a=t.target.value,void x(e=>({...e,cards:e.cards.map(e=>e.id===s?{...e,difficulty:a}:e)}))},className:"text-xs border rounded px-2 py-1",children:[(0,a.jsx)("option",{value:"easy",children:"Easy"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"hard",children:"Hard"})]}),(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void(x(e=>({...e,cards:e.cards.filter(e=>e.id!==t)})),m.oR.success("Flashcard removed"))},className:"text-red-500 hover:text-red-700 p-1",title:"Remove card",children:(0,a.jsx)(ec.A,{className:"h-4 w-4"})})]})]}),e.hint&&(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[(0,a.jsx)("strong",{children:"Hint:"})," ",e.hint]})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>h("setup"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back"}),(0,a.jsx)("button",{onClick:()=>h("preview"),disabled:0===c.cards.length,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue to Preview"})]})]}),"preview"===p&&c.cards.length>0&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-5 w-5 text-purple-600"}),"Study Set Preview"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:c.cards.length}),(0,a.jsx)("div",{className:"text-sm text-purple-700",children:"Total Cards"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:c.cards.filter(e=>"easy"===e.difficulty).length}),(0,a.jsx)("div",{className:"text-sm text-green-700",children:"Easy Cards"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:c.cards.filter(e=>"hard"===e.difficulty).length}),(0,a.jsx)("div",{className:"text-sm text-red-700",children:"Hard Cards"})]})]}),(0,a.jsxs)("div",{className:"border-2 border-purple-200 rounded-lg p-6 bg-purple-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h5",{className:"font-medium text-gray-900",children:["Card Preview (",k+1," of ",c.cards.length,")"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>C(Math.max(0,k-1)),disabled:0===k,className:"px-2 py-1 text-sm border rounded disabled:opacity-50",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>C(Math.min(c.cards.length-1,k+1)),disabled:k===c.cards.length-1,className:"px-2 py-1 text-sm border rounded disabled:opacity-50",children:"Next"})]})]}),(0,a.jsx)("div",{className:"bg-white border rounded-lg p-6 min-h-32",children:S?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Back:"}),(0,a.jsx)("div",{className:"text-lg text-gray-900",children:null==(s=c.cards[k])?void 0:s.back})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Front:"}),(0,a.jsx)("div",{className:"text-lg text-gray-900",children:null==(e=c.cards[k])?void 0:e.front}),(null==(t=c.cards[k])?void 0:t.hint)&&c.settings.showHints&&(0,a.jsxs)("div",{className:"mt-3 text-sm text-gray-600 italic",children:["\uD83D\uDCA1 Hint: ",c.cards[k].hint]})]})}),(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsxs)("button",{onClick:()=>A(!S),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2",children:[(0,a.jsx)(q.A,{className:"h-4 w-4"}),S?"Show Front":"Show Back"]})})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>h("content"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back to Edit"}),(0,a.jsxs)("button",{onClick:()=>{n({studySet:{...c,createdAt:new Date().toISOString()}}),m.oR.success("Created study set with ".concat(c.cards.length," flashcards!")),l()},disabled:!D,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(M.A,{className:"h-4 w-4"}),"Create Study Set"]})]})]})]})}var em=s(4625),eu=s(4395),ex=s(4170);function ep(){let{updateWorkflowData:e,finishWorkflow:t,handleAsyncOperation:s}=(0,u.j)(),[n,i]=(0,r.useState)({id:"voice-note-".concat(Date.now()),title:"",duration:0,transcript:"",summary:"",tags:[],confidence:0}),[l,o]=(0,r.useState)("record"),[c,x]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),[g,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(0),k=(0,r.useRef)(null),C=(0,r.useRef)(null),S=(0,r.useRef)(null),A=(0,r.useRef)(null);(0,r.useEffect)(()=>()=>{A.current&&clearInterval(A.current),S.current&&S.current.getTracks().forEach(e=>e.stop())},[]);let D=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});S.current=e;let t=new MediaRecorder(e);k.current=t;let s=[];t.ondataavailable=e=>{s.push(e.data)},t.onstop=()=>{let e=new Blob(s,{type:"audio/wav"}),t=URL.createObjectURL(e);i(s=>({...s,audioBlob:e,audioUrl:t,duration:N}))},t.start(),x(!0),w(0),A.current=setInterval(()=>{w(e=>e+1)},1e3),m.oR.success("Recording started")}catch(e){m.oR.error("Failed to access microphone")}},M=async()=>{if(!n.audioBlob)return;b(!0);let e=await s(async()=>(await new Promise(e=>setTimeout(e,4e3)),{transcript:"Speaker 1: Welcome to our meeting today. I'd like to discuss the quarterly results and our plans for the next phase.\n\nSpeaker 2: Thank you for organizing this. I've been looking at the numbers and we're showing strong growth in the mobile segment.\n\nSpeaker 1: That's excellent news. Can you share more details about the mobile metrics?\n\nSpeaker 2: Certainly. We've seen a 35% increase in mobile engagement and our conversion rates have improved by 12% compared to last quarter.\n\nSpeaker 1: Those are impressive results. What do you think is driving this improvement?\n\nSpeaker 2: I believe it's the combination of our new UI updates and the enhanced onboarding flow we implemented.",speakers:[{id:"speaker-1",name:"Speaker 1",segments:[{start:0,end:8,text:"Welcome to our meeting today. I'd like to discuss the quarterly results and our plans for the next phase."},{start:15,end:22,text:"That's excellent news. Can you share more details about the mobile metrics?"},{start:35,end:42,text:"Those are impressive results. What do you think is driving this improvement?"}]},{id:"speaker-2",name:"Speaker 2",segments:[{start:8,end:15,text:"Thank you for organizing this. I've been looking at the numbers and we're showing strong growth in the mobile segment."},{start:22,end:35,text:"Certainly. We've seen a 35% increase in mobile engagement and our conversion rates have improved by 12% compared to last quarter."},{start:42,end:50,text:"I believe it's the combination of our new UI updates and the enhanced onboarding flow we implemented."}]}],confidence:.89,title:"Meeting Notes - ".concat(new Date().toLocaleDateString())}),"Transcribe audio with speaker detection",{duration:n.duration});if(b(!1),e.success&&e.data){let t=e.data;i(e=>({...e,transcript:t.transcript,speakers:t.speakers,confidence:t.confidence,title:t.title})),m.oR.success("Transcription completed with speaker detection!"),o("enhance")}},P=async()=>{if(!n.transcript)return;v(!0);let e=await s(async()=>(await new Promise(e=>setTimeout(e,2500)),{summary:"Meeting focused on quarterly results review with strong mobile segment performance. Key highlights include 35% increase in mobile engagement, 12% improvement in conversion rates, driven by UI updates and enhanced onboarding flow. Discussion covered growth metrics and strategic improvements for mobile platform.",tags:["meeting","quarterly-results","mobile-growth","conversion-rates","ui-updates","business-review"],title:n.title||"Enhanced Voice Note - ".concat(new Date().toLocaleDateString())}),"AI-powered enhancement and formatting",{transcriptLength:n.transcript.length});if(v(!1),e.success&&e.data){let t=e.data;i(e=>({...e,summary:t.summary,tags:t.tags,title:t.title})),m.oR.success("Voice note enhanced!")}},R=e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))};return n.audioUrl||n.transcript,(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:["Record","Transcribe","Enhance"].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:d("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",l===e.toLowerCase()?"bg-purple-600 text-white":["record","transcribe","enhance"].indexOf(l)>t?"bg-green-500 text-white":"bg-gray-200 text-gray-600"),children:["record","transcribe","enhance"].indexOf(l)>t?(0,a.jsx)(F.A,{className:"h-4 w-4"}):t+1}),(0,a.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:e}),t<2&&(0,a.jsx)("div",{className:"w-8 h-px bg-gray-300 mx-4"})]},e))}),"record"===l&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"h-5 w-5 text-purple-600"}),"Record Voice Note"]}),(0,a.jsxs)("div",{className:"text-center space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-center",children:c?(0,a.jsx)("button",{onClick:()=>{k.current&&c&&(k.current.stop(),x(!1),A.current&&clearInterval(A.current),S.current&&S.current.getTracks().forEach(e=>e.stop()),m.oR.success("Recording stopped"),setTimeout(()=>o("transcribe"),1e3))},className:"w-24 h-24 bg-red-600 hover:bg-red-700 rounded-full flex items-center justify-center transition-colors animate-pulse",children:(0,a.jsx)(em.A,{className:"h-12 w-12 text-white"})}):(0,a.jsx)("button",{onClick:D,disabled:void 0!==n.audioUrl,className:"w-24 h-24 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 rounded-full flex items-center justify-center transition-colors",children:(0,a.jsx)(f.A,{className:"h-12 w-12 text-white"})})}),(0,a.jsx)("div",{children:c?(0,a.jsxs)("div",{className:"text-lg font-medium text-red-600 flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-600 rounded-full animate-pulse"}),"Recording: ",R(N)]}):n.audioUrl?(0,a.jsxs)("div",{className:"text-lg font-medium text-green-600 flex items-center justify-center gap-2",children:[(0,a.jsx)(F.A,{className:"h-5 w-5"}),"Recording Complete: ",R(n.duration)]}):(0,a.jsx)("div",{className:"text-lg font-medium text-gray-600",children:"Press to start recording"})}),n.audioUrl&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("audio",{ref:C,src:n.audioUrl,onEnded:()=>h(!1),onPlay:()=>h(!0),onPause:()=>h(!1)}),(0,a.jsxs)("div",{className:"flex justify-center items-center gap-4",children:[(0,a.jsxs)("button",{onClick:()=>{C.current&&n.audioUrl&&(p?(C.current.pause(),h(!1)):(C.current.play(),h(!0)))},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[p?(0,a.jsx)(eu.A,{className:"h-4 w-4"}):(0,a.jsx)(J.A,{className:"h-4 w-4"}),p?"Pause":"Play"]}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Duration: ",R(n.duration)]})]}),(0,a.jsx)("button",{onClick:()=>o("transcribe"),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Continue to Transcription"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 max-w-md mx-auto",children:"Record your voice note by speaking clearly. The recording will be automatically transcribed and enhanced with AI."})]})]}),"transcribe"===l&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"h-5 w-5 text-purple-600"}),"Transcribe Audio"]}),(0,a.jsx)("div",{className:"space-y-4",children:n.transcript?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(F.A,{className:"h-4 w-4 text-green-600"}),(0,a.jsxs)("span",{className:"font-medium text-green-900",children:["Transcription Complete (",Math.round(100*n.confidence),"% confidence)"]})]}),n.speakers&&n.speakers.length>1&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 text-blue-600"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:["Speaker Detection: ",n.speakers.length," speakers identified"]})]}),(0,a.jsx)("div",{className:"flex gap-2",children:n.speakers.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[(0,a.jsx)(ex.A,{className:"h-3 w-3"}),e.name]},e.id))})]}),(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto",children:(0,a.jsx)("div",{className:"text-sm text-gray-700 whitespace-pre-line",children:n.transcript})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>o("record"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back to Recording"}),(0,a.jsx)("button",{onClick:()=>o("enhance"),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Continue to Enhancement"})]})]}):(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-gray-600",children:"Convert your recording to text with AI-powered transcription and speaker detection."}),(0,a.jsx)("button",{onClick:M,disabled:g,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 mx-auto",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.A,{className:"h-4 w-4 animate-spin"}),"Transcribing with AI..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.A,{className:"h-4 w-4"}),"Start Transcription"]})}),g&&(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Analyzing audio, detecting speakers, and generating transcript..."})]})})]}),"enhance"===l&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(O.A,{className:"h-5 w-5 text-purple-600"}),"AI Enhancement"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),(0,a.jsx)("input",{type:"text",value:n.title,onChange:e=>i(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter a title for your voice note..."})]}),n.summary?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"AI Summary"}),(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:(0,a.jsx)("div",{className:"text-sm text-green-800",children:n.summary})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Smart Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:n.tags.map(e=>(0,a.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Transcript"}),(0,a.jsx)("div",{className:"bg-gray-50 border rounded-lg p-3 max-h-40 overflow-y-auto",children:(0,a.jsx)("div",{className:"text-sm text-gray-700 whitespace-pre-line",children:n.transcript})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>o("transcribe"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back to Transcript"}),(0,a.jsxs)("button",{onClick:()=>{e({voiceNote:{...n,createdAt:new Date().toISOString()}}),m.oR.success("Voice note created successfully!"),t()},disabled:!n.title.trim(),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(F.A,{className:"h-4 w-4"}),"Complete Voice Note"]})]})]}):(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-gray-600",children:"Enhance your voice note with AI-powered summarization and smart tagging."}),(0,a.jsx)("button",{onClick:P,disabled:y,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 mx-auto",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.A,{className:"h-4 w-4 animate-spin"}),"Enhancing with AI..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.A,{className:"h-4 w-4"}),"Enhance Voice Note"]})})]})]})]})]})}var eh=s(8046);function eg(){let{updateWorkflowData:e,finishWorkflow:t,handleAsyncOperation:s}=(0,u.j)(),[n,l]=(0,r.useState)({id:"kb-".concat(Date.now()),title:"",description:"",sources:[],categories:["general"],totalDocuments:0,isPublic:!1}),[o,c]=(0,r.useState)("setup"),[x,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)(new Set),[y,f]=(0,r.useState)(new Set),[v,N]=(0,r.useState)(""),w=(0,r.useRef)(null),k={"application/pdf":{icon:j.A,label:"PDF Document",color:"text-red-600"},"application/msword":{icon:j.A,label:"Word Document",color:"text-blue-600"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{icon:j.A,label:"Word Document",color:"text-blue-600"},"text/plain":{icon:j.A,label:"Text File",color:"text-gray-600"},"text/markdown":{icon:j.A,label:"Markdown File",color:"text-purple-600"}},C=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?p(!0):"dragleave"===e.type&&p(!1)},[]),S=(0,r.useCallback)(async e=>{e.preventDefault(),e.stopPropagation(),p(!1);let t=Array.from(e.dataTransfer.files);await T(t)},[]),A=async e=>{let t=Array.from(e.target.files||[]);await T(t)},T=async e=>{for(let s of e){var t;let e={id:"source-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:s.name,type:(null==(t=s.name.split(".").pop())?void 0:t.toLowerCase())||"txt",size:s.size,content:"",extractedData:{title:s.name.replace(/\.[^/.]+$/,""),summary:"",keyTopics:[],wordCount:0,sections:[]},tags:[],category:"general",searchable:!0,processed:!1};l(t=>({...t,sources:[...t.sources,e]})),M(e,s)}},M=async(e,t)=>{g(t=>{let s=new Set(t);return s.add(e.id),s});let a=await s(async()=>{let s;await new Promise(e=>setTimeout(e,2e3+3e3*Math.random()));let a="";return"pdf"===e.type?(a="[Extracted PDF content from ".concat(e.name,"]\n\nThis document contains detailed information about knowledge management systems and best practices for document organization.\n\nSECTION 1: Introduction to Knowledge Management\nKnowledge management is the process of creating, sharing, using and managing the knowledge and information of an organization...\n\nSECTION 2: Document Classification Systems\nEffective classification enables quick retrieval and proper categorization of documents based on content, purpose, and audience...\n\nSECTION 3: Search and Discovery\nModern knowledge bases implement semantic search capabilities that understand context and meaning beyond keyword matching..."),s={title:"Knowledge Management Guide - ".concat(e.name.replace(".pdf","")),summary:"Comprehensive guide covering knowledge management systems, document classification, and search optimization for organizational knowledge bases.",keyTopics:["knowledge management","document classification","semantic search","information architecture","content organization"],pageCount:45,wordCount:12500,sections:[{title:"Introduction to Knowledge Management",content:"Overview of KM principles and methodologies",page:1},{title:"Document Classification Systems",content:"Taxonomies and categorization strategies",page:15},{title:"Search and Discovery",content:"Semantic search and findability techniques",page:28}]}):"docx"===e.type||"doc"===e.type?(a="[Extracted Word document content from ".concat(e.name,"]\n\nPROJECT PROPOSAL: Enterprise Knowledge Portal\n\nEXECUTIVE SUMMARY\nThis proposal outlines the development of a centralized knowledge portal to improve information sharing and collaboration across departments.\n\nOBJECTIVES\n- Centralize scattered documentation\n- Improve search and discovery capabilities  \n- Enable collaborative content creation\n- Establish knowledge retention processes\n\nTECHNICAL REQUIREMENTS\n- Document management system with version control\n- Full-text search with advanced filtering\n- User access controls and permissions\n- Integration with existing tools and workflows"),s={title:"Project Proposal - ".concat(e.name.replace(/\.(docx?)/g,"")),summary:"Enterprise knowledge portal proposal covering centralized documentation, search capabilities, and collaborative features for organizational knowledge sharing.",keyTopics:["project proposal","knowledge portal","document management","collaboration","enterprise systems"],wordCount:3200,sections:[{title:"Executive Summary",content:"High-level project overview and goals"},{title:"Objectives",content:"Specific aims and success criteria"},{title:"Technical Requirements",content:"System specifications and integration needs"}]}):(a=await t.text(),s={title:e.name.replace(/\.(txt|md)$/g,""),summary:"Text document containing ".concat(Math.floor(a.length/5)," words of content. ").concat(a.includes("\n#")?"Contains structured headings and sections.":"Plain text format."),keyTopics:["text document","notes","reference"],wordCount:a.split(/\s+/).length,sections:a.includes("\n#")?[{title:"Main Content",content:"Structured document with multiple sections"}]:[{title:"Content",content:"Plain text content"}]}),{content:a,extractedData:s,tags:["uploaded","document",e.type],category:a.toLowerCase().includes("project")?"business":a.toLowerCase().includes("guide")||a.toLowerCase().includes("manual")?"documentation":a.toLowerCase().includes("policy")?"policies":"general"}},"Process knowledge source: ".concat(e.name),{fileName:e.name,fileSize:e.size});if(g(t=>{let s=new Set(t);return s.delete(e.id),s}),a.success&&a.data){let t=a.data;l(s=>({...s,sources:s.sources.map(s=>s.id===e.id?{...s,content:t.content,extractedData:t.extractedData,tags:t.tags,category:t.category,processed:!0}:s)})),m.oR.success("Processed ".concat(e.name))}},P=n.sources.filter(e=>e.name.toLowerCase().includes(v.toLowerCase())||e.extractedData.title.toLowerCase().includes(v.toLowerCase())||e.extractedData.keyTopics.some(e=>e.toLowerCase().includes(v.toLowerCase()))),R=n.title.trim()&&n.sources.length>0;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:["Setup","Upload","Organize","Review"].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:d("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",o===e.toLowerCase()?"bg-blue-600 text-white":["setup","upload","organize","review"].indexOf(o)>t?"bg-green-500 text-white":"bg-gray-200 text-gray-600"),children:["setup","upload","organize","review"].indexOf(o)>t?(0,a.jsx)(F.A,{className:"h-4 w-4"}):t+1}),(0,a.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:e}),t<3&&(0,a.jsx)("div",{className:"w-8 h-px bg-gray-300 mx-4"})]},e))}),"setup"===o&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(b.A,{className:"h-5 w-5 text-blue-600"}),"Knowledge Base Setup"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Knowledge Base Title *"}),(0,a.jsx)("input",{type:"text",value:n.title,onChange:e=>l(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter knowledge base title..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("textarea",{value:n.description,onChange:e=>l(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Describe what this knowledge base contains..."})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:n.isPublic,onChange:e=>l(t=>({...t,isPublic:e.target.checked})),className:"rounded"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Make this knowledge base publicly searchable"})]})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{onClick:()=>c("upload"),disabled:!n.title.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue to Upload"})})]})]}),"upload"===o&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"h-5 w-5 text-blue-600"}),"Upload Knowledge Sources"]}),(0,a.jsxs)("div",{className:d("border-2 border-dashed rounded-lg p-8 text-center transition-colors",x?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragEnter:C,onDragLeave:C,onDragOver:C,onDrop:S,children:[(0,a.jsx)("input",{ref:w,type:"file",multiple:!0,onChange:A,accept:".pdf,.doc,.docx,.txt,.md",className:"hidden"}),(0,a.jsx)(D.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Knowledge Documents"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Drag and drop your PDFs, Word documents, and notes here, or click to browse."}),(0,a.jsx)("button",{onClick:()=>{var e;return null==(e=w.current)?void 0:e.click()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Choose Files"}),(0,a.jsx)("div",{className:"mt-4 text-sm text-gray-500",children:"Supported: PDF, Word Documents (.doc, .docx), Text Files (.txt, .md)"})]})]}),n.sources.length>0&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4",children:["Uploaded Sources (",n.sources.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:n.sources.map(e=>{let t=(e=>{let t=k["text/".concat(e)];return t?t.icon:j.A})(e.type),s=h.has(e.id);return(0,a.jsx)("div",{className:"border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:d("w-10 h-10 rounded-lg flex items-center justify-center",e.processed?"bg-green-100":s?"bg-blue-100":"bg-gray-100"),children:s?(0,a.jsx)(O.A,{className:"h-5 w-5 text-blue-600 animate-pulse"}):e.processed?(0,a.jsx)(F.A,{className:"h-5 w-5 text-green-600"}):(0,a.jsx)(t,{className:"h-5 w-5 text-gray-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.type.toUpperCase()," • ",(e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]})(e.size)]}),s&&(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-blue-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),(0,a.jsx)("span",{children:"Processing document..."})]}),e.processed&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"text-sm text-green-600 mb-1",children:["✓ Processed • ",e.extractedData.wordCount.toLocaleString()," words"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.extractedData.summary})]})]})]})},e.id)})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>c("setup"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back"}),(0,a.jsx)("button",{onClick:()=>c("organize"),disabled:0===n.sources.filter(e=>e.processed).length,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue to Organization"})]})]}),"organize"===o&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(en.A,{className:"h-5 w-5 text-blue-600"}),"Organize Knowledge Sources"]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categories"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:n.categories.map(e=>(0,a.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm flex items-center gap-1",children:[e,"general"!==e&&(0,a.jsx)("button",{onClick:()=>{l(t=>({...t,categories:t.categories.filter(t=>t!==e)}))},className:"text-blue-500 hover:text-blue-700",children:(0,a.jsx)(U.A,{className:"h-3 w-3"})})]},e))}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)("select",{onChange:e=>{var t;return e.target.value&&void((t=e.target.value).trim()&&!n.categories.includes(t.trim())&&l(e=>({...e,categories:[...e.categories,t.trim()]})))},value:"",className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Add predefined category..."}),["general","research","documentation","legal","technical","business","education","reference","policies","procedures","templates","guides"].filter(e=>!n.categories.includes(e)).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Sources"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(eh.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:v,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search by filename, title, or topics..."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h5",{className:"font-medium text-gray-900 mb-3",children:["Organize Sources (",P.length,")"]}),(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:P.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h6",{className:"font-medium text-gray-900",children:e.extractedData.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.extractedData.summary}),e.extractedData.keyTopics.length>0&&(0,a.jsxs)("div",{className:"flex gap-1 mt-2",children:[e.extractedData.keyTopics.slice(0,3).map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:e},e)),e.extractedData.keyTopics.length>3&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",e.extractedData.keyTopics.length-3," more"]})]})]}),(0,a.jsx)("div",{className:"ml-4",children:(0,a.jsx)("select",{value:e.category,onChange:t=>{var s,a;return s=e.id,a=t.target.value,void l(e=>({...e,sources:e.sources.map(e=>e.id===s?{...e,category:a}:e)}))},className:"text-sm border rounded px-2 py-1",children:n.categories.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})})]})},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>c("upload"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back"}),(0,a.jsx)("button",{onClick:()=>c("review"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Continue to Review"})]})]}),"review"===o&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-5 w-5 text-blue-600"}),"Review Knowledge Base"]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-medium text-blue-900 mb-2",children:"Knowledge Base Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:n.sources.filter(e=>e.processed).length}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Documents"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:n.sources.reduce((e,t)=>e+t.extractedData.wordCount,0).toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Total Words"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:n.categories.length}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Categories"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:n.isPublic?"Public":"Private"}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Visibility"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900 mb-3",children:"Categories & Distribution"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:n.categories.map(e=>{let t=n.sources.filter(t=>t.category===e).length;return(0,a.jsxs)("div",{className:"bg-gray-50 border rounded-lg p-3 text-center",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 capitalize",children:e}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[t," document",1!==t?"s":""]})]},e)})})]}),(0,a.jsx)("div",{className:"border-t pt-6",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>c("organize"),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Back to Organization"}),(0,a.jsxs)("button",{onClick:()=>{let s=n.sources.filter(e=>e.processed);e({knowledgeBase:{...n,sources:s,totalDocuments:s.length,createdAt:new Date().toISOString()}}),m.oR.success("Created knowledge base with ".concat(s.length," sources!")),t()},disabled:!R,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(b.A,{className:"h-4 w-4"}),"Create Knowledge Base"]})]})})]})]})]})}var eb=s(4881),ey=s(4001),ef=s(406);function ej(){let{nextStep:e,addError:t,updateWorkflowData:s}=(0,u.j)(),[n,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(0),[m,x]=(0,r.useState)(0),[p,h]=(0,r.useState)(0),[g,b]=(0,r.useState)([]),[y,j]=(0,r.useState)([{id:"speaker1",name:"Speaker 1",color:"bg-blue-500",segments:0,totalDuration:0,averageConfidence:0},{id:"speaker2",name:"Speaker 2",color:"bg-green-500",segments:0,totalDuration:0,averageConfidence:0},{id:"speaker3",name:"Speaker 3",color:"bg-purple-500",segments:0,totalDuration:0,averageConfidence:0}]),[v,N]=(0,r.useState)([]),[w,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)(""),[A,M]=(0,r.useState)(new Date),[P,R]=(0,r.useState)(.7),[I,E]=(0,r.useState)(!0),[L,O]=(0,r.useState)(new Date),[F,W]=(0,r.useState)(!1),[B,U]=(0,r.useState)(null),[q,V]=(0,r.useState)({overall:0,bySpeaker:{},recentChanges:[]}),[G,H]=(0,r.useState)([]),[K,Q]=(0,r.useState)([]),[Y,X]=(0,r.useState)([]),_=(0,r.useRef)(null),$=(0,r.useRef)([]),Z=(0,r.useRef)(null),ee=(0,r.useRef)(null),et=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e;return n&&(e=setInterval(()=>{h(e=>e+1)},1e3)),()=>clearInterval(e)},[n]),(0,r.useEffect)(()=>{let e=setInterval(()=>{g.length>0&&ea()},5e3);return()=>clearInterval(e)},[g]),(0,r.useEffect)(()=>{ee.current&&n&&ee.current.scrollIntoView({behavior:"smooth"})},[g,n]);let es=e=>{let t=Math.floor(e/60),s=Math.floor(e%60);return"".concat(t,":").concat(s.toString().padStart(2,"0"))},ea=(0,r.useCallback)(()=>{let e={segments:g,speakers:y,bookmarks:v,timestamp:new Date().toISOString()};localStorage.setItem("voice-transcript-autosave",JSON.stringify(e)),M(new Date),s(e)},[g,y,v,s]),er=e=>{let t=["good","great","excellent","happy","love","amazing","wonderful","fantastic","perfect","awesome"],s=["bad","terrible","awful","hate","horrible","disappointing","frustrated","angry","sad","worried"],a=["what","how","when","where","why","who","can","could","would","should"],r=["urgent","emergency","asap","immediately","critical","important","quick","fast","now","help"],n=["thank","thanks","appreciate","grateful","excellent","outstanding","impressed"],i=["problem","issue","wrong","broken","error","bug","complaint","dissatisfied"],l=e.toLowerCase().split(/\s+/),o=0,c={happy:0,angry:0,worried:0,confused:0,excited:0,neutral:0},d={request:0,complaint:0,praise:0,confusion:0,urgency:0,neutral:0};l.forEach(e=>{t.includes(e)&&(o+=.1,c.happy++),s.includes(e)&&(o-=.1,c.angry++),a.includes(e)&&(c.confused++,d.confusion++),r.includes(e)&&(c.excited++,d.urgency++),n.includes(e)&&(d.praise++,c.happy++),i.includes(e)&&(d.complaint++,c.angry++)}),o=Math.max(-1,Math.min(1,o));let m=Object.entries(c).reduce((e,t)=>c[e[0]]>c[t[0]]?e:t)[0],u=Object.entries(d).reduce((e,t)=>d[e[0]]>d[t[0]]?e:t)[0];return{sentiment:o,emotion:m,intent:u}},en=async()=>{try{S("Requesting microphone access...");let e=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:16e3,echoCancellation:!0,noiseSuppression:!0}}),t=new MediaRecorder(e,{mimeType:"audio/webm;codecs=opus"});_.current=t,$.current=[],t.ondataavailable=e=>{e.data.size>0&&($.current.push(e.data),ei(e.data))},t.onstop=()=>{let e=new Blob($.current,{type:"audio/webm"});eo(e)},t.start(1e3),i(!0),h(0),S("Recording and transcribing...")}catch(e){t({id:"recording-error",type:"permission",step:"start-recording",message:"Failed to access microphone. Please check permissions.",timestamp:new Date().toISOString(),recoverable:!1,retryCount:0,maxRetries:0,context:{error:e instanceof Error?e.message:String(e)}})}},ei=(0,r.useCallback)(e=>{setTimeout(()=>{let e=["Thank you for joining today's meeting.","Let's start by reviewing our quarterly progress.","The metrics show significant improvement this quarter.","We need to discuss the upcoming project timeline.","I have some questions about the implementation strategy.","Could you elaborate on that point?","I think we should consider alternative approaches.","The deadline seems aggressive given our current resources."],t=e[Math.floor(Math.random()*e.length)],s=Math.random()>.5?"speaker1":"speaker2",a=.75+.2*Math.random(),r=.8+.15*Math.random();if(a>=P){let e=t.toLowerCase().replace(/[.,!?]/g,""),n=el(e),i=3+4*Math.random(),l=er(n),o={id:"segment-".concat(Date.now()),speaker:s,speakerConfidence:r,startTime:p-i,endTime:p,text:n,confidence:a,isLive:!0,punctuationCorrected:!0,originalText:e,sentimentScore:l.sentiment,emotionalTone:l.emotion,intentCategory:l.intent};b(e=>[...e,o]),j(e=>e.map(e=>{if(e.id===s){let t=e.segments+1,s=e.totalDuration+i,a=(e.averageConfidence*e.segments+r)/t;return{...e,segments:t,totalDuration:s,averageConfidence:a}}return e}))}},800)},[p,P]),el=e=>{let t=e.charAt(0).toUpperCase()+e.slice(1);return t=(t=t.replace(/\b(however|therefore|meanwhile|furthermore)\b/gi,". $1")).replace(/\b(what|how|why|when|where|who|could|would|should|can|will|do|does|did|is|are|was|were)\b([^.!?]*?)$/gi,"$1$2?"),/[.!?]$/.test(t)||(t+="."),t},eo=async e=>{k(!0),S("Running Whisper model locally..."),setTimeout(()=>{b(e=>e.map(e=>({...e,isLive:!1,confidence:Math.min(e.confidence+.1,1)}))),k(!1),S("Transcription complete!"),ea()},Math.min(.3*m,3e4))},ec=(0,r.useCallback)(()=>{let e=n?p:c,t={id:"bookmark-".concat(Date.now()),timestamp:e,label:"Bookmark at ".concat(es(e))};if(N(e=>[...e,t]),g.length>0){let e=g[g.length-1];b(t=>t.map(t=>t.id===e.id?{...t,isBookmarked:!0}:t))}},[n,p,c,g]);(0,r.useEffect)(()=>{let e=e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"b":e.preventDefault(),ec();break;case"Enter":e.preventDefault()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[ec]);let ed=e=>{Z.current&&(Z.current.currentTime=e,d(e))};return(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Voice Transcription"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Record live audio or upload files for real-time AI transcription with Whisper"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eb.A,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:n?"Live Recording":w?"Processing":"Ready"})]}),C&&(0,a.jsx)("span",{className:"text-sm text-gray-600",children:C})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["Auto-saved: ",es(Math.floor((Date.now()-A.getTime())/1e3))," ago"]}),(0,a.jsxs)("span",{children:["Confidence: ",Math.floor(100*P),"%+"]})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,a.jsx)(f.A,{className:"h-5 w-5 mr-2"}),"Audio Input"]}),n&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-red-600",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"font-mono",children:es(p)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Live Recording"}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[n?(0,a.jsxs)("button",{onClick:()=>{_.current&&n&&(_.current.stop(),_.current.stream.getTracks().forEach(e=>e.stop()),i(!1),S("Processing final audio..."))},className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[(0,a.jsx)(em.A,{className:"h-4 w-4 mr-2"}),"Stop Recording"]}):(0,a.jsxs)("button",{onClick:en,disabled:w,className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Start Recording"]}),(0,a.jsxs)("button",{onClick:ec,disabled:!n,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",title:"Ctrl+B",children:[(0,a.jsx)(ey.A,{className:"h-4 w-4 mr-2"}),"Bookmark"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Upload Audio/Video"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[(0,a.jsx)("input",{ref:et,type:"file",accept:"audio/*,video/*,.mp3,.wav,.m4a,.mp4,.mov,.webm",onChange:e=>{var s;let a=null==(s=e.target.files)?void 0:s[0];if(!a)return;if(!a.type.match(/(audio|video)\/(mp3|wav|m4a|mp4|mov|webm)/))return void t({id:"unsupported-format",type:"validation",step:"file-upload",message:"Unsupported file format. Please use MP3, WAV, M4A, MP4, MOV, or WebM.",timestamp:new Date().toISOString(),recoverable:!0,retryCount:0,maxRetries:1});S("Processing ".concat(a.name,"...")),k(!0);let r=URL.createObjectURL(a);Z.current&&(Z.current.src=r,Z.current.load()),setTimeout(()=>{var e=a;let t=Math.min(e.size/1e5,600);setTimeout(()=>{let e=["Welcome everyone to today's presentation. We have several important topics to cover.","Thank you for the introduction. I'm excited to share our recent findings with the team.","Let's begin with the quarterly metrics. As you can see on slide one, we've exceeded our targets."].map((e,t)=>{let s=er(e);return{id:"upload-".concat(t+1),speaker:t%2==0?"speaker1":"speaker2",startTime:15*t,endTime:(t+1)*15,text:e,confidence:.92-.02*t,isLive:!1,speakerConfidence:.9-.02*t,punctuationCorrected:!0,originalText:e.toLowerCase(),sentimentScore:s.sentiment,emotionalTone:s.emotion,intentCategory:s.intent}});b(e),x(t),k(!1),S("File processed successfully!"),j(t=>t.map(t=>({...t,segments:e.filter(e=>e.speaker===t.id).length})))},Math.min(.3*t,3e4))},2e3)},className:"hidden"}),(0,a.jsxs)("button",{onClick:()=>{var e;return null==(e=et.current)?void 0:e.click()},disabled:n||w,className:"flex items-center justify-center w-full px-4 py-2 text-blue-600 hover:text-blue-700 disabled:opacity-50 transition-colors",children:[(0,a.jsx)(ef.A,{className:"h-5 w-5 mr-2"}),"Upload File (MP3, WAV, M4A, MP4, MOV)"]})]})]})]})]}),m>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,a.jsx)(T.A,{className:"h-5 w-5 mr-2"}),"Playback"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)(z.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[es(c)," / ",es(m)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>{Z.current&&(l?Z.current.pause():Z.current.play(),o(!l))},className:"flex items-center justify-center w-10 h-10 rounded-full bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:l?(0,a.jsx)(eu.A,{className:"h-5 w-5"}):(0,a.jsx)(J.A,{className:"h-5 w-5 ml-1"})}),(0,a.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2 cursor-pointer",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(c/m*100,"%")}})})]}),(0,a.jsx)("audio",{ref:Z,onTimeUpdate:e=>d(e.target.currentTime),onLoadedMetadata:e=>x(e.target.duration),className:"hidden"})]}),y.some(e=>e.segments>0)&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,a.jsx)(ex.A,{className:"h-5 w-5 mr-2"}),"Speaker Identification & Analytics"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Speakers"}),y.filter(e=>e.segments>0).map(e=>(0,a.jsxs)("div",{className:"p-4 border rounded-lg space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full ".concat(e.color)}),(0,a.jsx)("input",{type:"text",value:e.name,onChange:t=>j(s=>s.map(s=>s.id===e.id?{...s,name:t.target.value}:s)),className:"flex-1 px-2 py-1 border-b border-gray-300 focus:border-blue-500 focus:outline-none"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:e.segments})," segments"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:es(e.totalDuration)})," duration"]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"font-medium",children:[Math.round(100*e.averageConfidence),"%"]})," ID confidence"]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"font-medium",children:[Math.round(e.totalDuration/g.reduce((e,t)=>e+(t.endTime-t.startTime),0)*100),"%"]})," talk time"]})]})]},e.id))]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Talk Time Distribution"}),(0,a.jsx)("div",{className:"space-y-2",children:y.filter(e=>e.segments>0).map(e=>{let t=y.reduce((e,t)=>e+t.totalDuration,0),s=t>0?e.totalDuration/t*100:0;return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.color)}),(0,a.jsx)("span",{children:e.name})]}),(0,a.jsxs)("span",{children:[Math.round(s),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat(e.color.replace("bg-","bg-")),style:{width:"".concat(s,"%")}})})]},e.id)})})]})]})]}),v.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,a.jsx)(ey.A,{className:"h-5 w-5 mr-2"}),"Bookmarks (",v.length,")"]}),(0,a.jsx)("div",{className:"space-y-2",children:v.map(e=>(0,a.jsxs)("button",{onClick:()=>ed(e.timestamp),className:"w-full text-left p-2 hover:bg-gray-50 rounded border flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:e.label}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:es(e.timestamp)})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold",children:["Live Transcript (",g.length," segments)"]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("label",{className:"text-sm text-gray-600",children:["Confidence threshold:",(0,a.jsxs)("select",{value:P,onChange:e=>R(Number(e.target.value)),className:"ml-2 border rounded px-2 py-1",children:[(0,a.jsx)("option",{value:.5,children:"50%"}),(0,a.jsx)("option",{value:.7,children:"70%"}),(0,a.jsx)("option",{value:.8,children:"80%"}),(0,a.jsx)("option",{value:.9,children:"90%"})]})]})})]}),(0,a.jsx)("div",{className:"p-4 space-y-4 max-h-96 overflow-y-auto",children:0===g.length?(0,a.jsx)("div",{className:"text-center text-gray-500 py-8",children:n?"Listening...":"Start recording or upload a file to begin transcription"}):(0,a.jsxs)(a.Fragment,{children:[g.map(e=>(y.find(t=>t.id===e.speaker),(0,a.jsxs)("div",{className:"border-l-4 pl-4 ".concat(e.isLive?"border-green-400 bg-green-50":"border-gray-200"," hover:bg-gray-50 group"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("select",{value:e.speaker,onChange:t=>{var s,a;return s=e.id,a=t.target.value,void(b(e=>e.map(e=>e.id===s?{...e,speaker:a}:e)),j(e=>e.map(e=>({...e,segments:g.filter(t=>t.speaker===e.id).length}))))},className:"text-sm border rounded px-2 py-1 bg-white",children:y.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,a.jsx)("button",{onClick:()=>ed(e.startTime),className:"text-xs text-blue-600 hover:text-blue-800",children:es(e.startTime)}),e.isLive&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-800 rounded",children:"LIVE"}),e.punctuationCorrected&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded",title:"Auto-corrected punctuation",children:"CORRECTED"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded",title:"Transcription confidence",children:[Math.round(100*e.confidence),"%"]}),(0,a.jsxs)("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 rounded",title:"Speaker ID confidence",children:["ID: ",Math.round(100*e.speakerConfidence),"%"]}),(0,a.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex space-x-1",children:(0,a.jsx)("button",{onClick:()=>((e,t)=>{let s=g.find(t=>t.id===e);if(!s||t<=s.startTime||t>=s.endTime)return;let a=s.text.split(" "),r=Math.floor(a.length/2),n={...s,id:"".concat(s.id,"-part1"),endTime:t,text:a.slice(0,r).join(" ")},i={...s,id:"".concat(s.id,"-part2"),startTime:t,text:a.slice(r).join(" ")};b(t=>[...t.filter(t=>t.id!==e),n,i])})(e.id,e.startTime+(e.endTime-e.startTime)/2),className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200",title:"Split segment",children:"Split"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("textarea",{value:e.text,onChange:t=>b(s=>s.map(s=>s.id===e.id?{...s,text:t.target.value}:s)),className:"w-full text-gray-800 leading-relaxed bg-transparent border-none resize-none focus:outline-none focus:ring-1 focus:ring-blue-500 rounded p-1",rows:Math.max(1,Math.ceil(e.text.length/80))}),e.originalText&&e.originalText!==e.text&&(0,a.jsxs)("details",{className:"text-xs text-gray-500",children:[(0,a.jsx)("summary",{className:"cursor-pointer hover:text-gray-700",children:"Original text"}),(0,a.jsx)("p",{className:"mt-1 italic",children:e.originalText})]})]})]},e.id))),(0,a.jsx)("div",{ref:ee})]})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[g.length," segments • ",y.filter(e=>e.segments>0).length," speakers • ",v.length," bookmarks"]}),(0,a.jsxs)("button",{onClick:()=>{ea(),e()},disabled:n||w,className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[(0,a.jsx)(D.A,{className:"h-5 w-5 mr-2"}),"Complete Transcription"]})]})]})}var ev=s(9089),eN=s(7305),ew=s(8),ek=s(7740);function eC(){let e,{nextStep:t,addError:s,updateWorkflowData:n}=(0,u.j)(),[i,l]=(0,r.useState)([]),[o,c]=(0,r.useState)(new Set),[d,m]=(0,r.useState)({}),[x,p]=(0,r.useState)(""),[h,g]=(0,r.useState)([]),[y,f]=(0,r.useState)(!1),[j,v]=(0,r.useState)("gpt-4"),[N,w]=(0,r.useState)("comprehensive"),[C,S]=(0,r.useState)([]),[A,T]=(0,r.useState)([]),[D,M]=(0,r.useState)([]),[R,I]=(0,r.useState)(!1),[L,z]=(0,r.useState)(null),[O,F]=(0,r.useState)(!1),[W,B]=(0,r.useState)([]),[U,q]=(0,r.useState)(""),[V,G]=(0,r.useState)(""),[H,K]=(0,r.useState)([]),[J,Q]=(0,r.useState)([]),[Y,X]=(0,r.useState)([]),[_,$]=(0,r.useState)([]),[Z,ee]=(0,r.useState)(!1),[et,es]=(0,r.useState)(!1),[ea,er]=(0,r.useState)("qa"),en=(0,r.useRef)(null),[ei,el]=(0,r.useState)("academic"),[eo,ec]=(0,r.useState)("medium"),[ed,em]=(0,r.useState)(""),[eu,ex]=(0,r.useState)("intermediate"),[ep,eg]=(0,r.useState)(""),[eb,ey]=(0,r.useState)("automatic"),[ej,eC]=(0,r.useState)("table"),[eS,eA]=(0,r.useState)(null),[eT,eD]=(0,r.useState)([]),[eM,eP]=(0,r.useState)(new Set),[eR,eI]=(0,r.useState)("all"),[eE,eL]=(0,r.useState)("medium"),[ez,eO]=(0,r.useState)([{id:"gpt-4",name:"GPT-4",description:"Most capable model for complex reasoning",status:"available"},{id:"claude",name:"Claude",description:"Excellent for analysis and writing",status:"available"},{id:"gemini",name:"Gemini",description:"Fast and efficient for general tasks",status:"available"},{id:"llama",name:"Llama 2",description:"Open source alternative",status:"available"}]),[eF,eW]=(0,r.useState)({}),eB=(0,r.useCallback)(e=>[{id:"concept-1",term:"Transformer Architecture",definition:"A neural network architecture that relies entirely on attention mechanisms",frequency:15,importance:.95,category:"technical",relatedTerms:["attention mechanism","self-attention","encoder-decoder"]},{id:"concept-2",term:"Attention Mechanism",definition:"A technique that allows models to focus on relevant parts of input",frequency:23,importance:.88,category:"technical",relatedTerms:["transformer","neural networks","deep learning"]},{id:"concept-3",term:"Natural Language Processing",definition:"Field of AI focused on interaction between computers and human language",frequency:31,importance:.92,category:"academic",relatedTerms:["machine learning","linguistics","AI"]}],[]),eU=(0,r.useCallback)(e=>[{id:"entity-1",name:"Google",type:"organization",mentions:8,contexts:["developed the Transformer architecture","published research on attention"],confidence:.94},{id:"entity-2",name:"BERT",type:"technology",mentions:12,contexts:["bidirectional encoder","pre-trained language model"],confidence:.91},{id:"entity-3",name:"2017",type:"date",mentions:5,contexts:["Attention is All You Need paper","transformer introduction"],confidence:.89}],[]),eq=(0,r.useCallback)(async e=>{l(t=>t.map(t=>t.id===e.id?{...t,processingStatus:"processing"}:t)),await new Promise(e=>setTimeout(e,2e3));let t=eB(e),s=eU(e),a=[{id:"rel-1",fromConcept:"Transformer Architecture",toConcept:"Attention Mechanism",relationshipType:"requires",strength:.95,evidence:["Transformers rely entirely on attention mechanisms"]}];l(r=>r.map(r=>r.id===e.id?{...r,processingStatus:"indexed",extractedConcepts:t,entities:s,relationships:a}:r)),S(e=>[...e,...t]),T(e=>[...e,...s]),M(e=>[...e,...a])},[eB,eU]),eV=e=>{e&&Array.from(e).forEach(async e=>{var t;if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/markdown"].includes(e.type)&&!e.name.match(/\.(pdf|doc|docx|txt|md)$/i))return void s({id:"unsupported-format",type:"validation",step:"file-upload",message:"Unsupported file format: ".concat(e.name,". Please use PDF, DOC, DOCX, TXT, or MD files."),timestamp:new Date().toISOString(),recoverable:!0,retryCount:0,maxRetries:1});let a={id:"source-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:e.name,type:null==(t=e.name.split(".").pop())?void 0:t.toLowerCase(),content:"",uploadedAt:new Date,pages:"application/pdf"===e.type?Math.ceil(e.size/5e4):void 0,size:e.size,processingStatus:"uploading"};l(e=>[...e,a]),c(e=>new Set([...Array.from(e),a.id])),m(e=>({...e,[a.id]:0}));let r=new FileReader;r.onprogress=e=>{if(e.lengthComputable){let t=e.loaded/e.total*100;m(e=>({...e,[a.id]:t}))}},r.onload=async e=>{var t;let s={...a,content:null==(t=e.target)?void 0:t.result,processingStatus:"processing"};l(e=>e.map(e=>e.id===a.id?s:e)),await eq(s),m(e=>{let t={...e};return delete t[a.id],t})},r.readAsText(e)})},eG=(e,t)=>{let s={id:"note-".concat(Date.now()),userId:"user-1",userName:"You",content:e,timestamp:new Date,type:t};B(e=>[...e,s])};(0,r.useEffect)(()=>{let e=[{id:"source-1",name:"AI Research Paper - Transformers.pdf",type:"pdf",content:"The Transformer architecture has revolutionized natural language processing...",uploadedAt:new Date(Date.now()-864e5),pages:15,size:2516582.4,processingStatus:"indexed"},{id:"source-2",name:"Machine Learning Notes.docx",type:"doc",content:"Deep learning models require large amounts of training data...",uploadedAt:new Date(Date.now()-1728e5),size:876544,processingStatus:"indexed"},{id:"source-3",name:"Industry Report - AI Trends.txt",type:"txt",content:"Current trends in artificial intelligence show exponential growth...",uploadedAt:new Date(Date.now()-2592e5),size:126976,processingStatus:"indexed"}];l(e),c(new Set(e.map(e=>e.id)))},[]);let eH=async()=>{x.trim()&&0!==o.size&&(f(!0),setTimeout(()=>{var e,t,s;let a=Array.from(o),r=a.slice(0,2).map((e,t)=>{let s=i.find(t=>t.id===e);return{sourceId:e,sourceName:(null==s?void 0:s.name)||"Unknown",pageNumber:Math.floor(10*Math.random())+1,paragraph:t+1,confidence:.85+.15*Math.random(),text:"This section discusses ".concat(x.toLowerCase().includes("transformer")?"transformer architectures and their applications":"the relevant concepts"," in detail..."),context:"The surrounding context provides additional insights about the methodology and implications.",highlightedTerms:["transformer","attention","architecture"],conceptsReferenced:["Transformer Architecture","Attention Mechanism"]}}),l={id:"insight-".concat(Date.now()),topic:x,sources:a,agreements:["All sources agree on the importance of attention mechanisms"],contradictions:["Sources differ on optimal model size"],gaps:["Limited discussion of computational efficiency"],synthesisScore:.78},c="Based on analysis across ".concat(o.size," sources, ").concat(x.toLowerCase().includes("transformer")?"Transformer architectures represent a paradigm shift in NLP":"the topic demonstrates significant complexity",". Key concepts identified include: ").concat(C.slice(0,3).map(e=>e.term).join(", "),". ").concat("concise"===N?"The evidence strongly supports this conclusion.":"analytical"===N?"From multiple analytical perspectives, we can identify several key patterns and relationships.":"This comprehensive analysis reveals nuanced insights across technical, practical, and theoretical dimensions."),d={id:"qa-".concat(Date.now()),question:x,answer:c,citations:r,timestamp:new Date,model:j,tone:N,isPinned:!1,conceptsDiscussed:C.slice(0,5).map(e=>e.term),crossSourceInsights:[l],confidence:.85+.15*Math.random(),unusedSources:i.filter(e=>!Array.from(o).includes(e.id)).map(e=>e.name),auditTrail:[{id:"audit-".concat(Date.now()),timestamp:new Date,action:"answer_generated",model:j,prompt:x,sources:Array.from(o),metadata:{tokensUsed:Math.floor(1e3*Math.random())+500,responseTime:2500,confidence:.85+.15*Math.random(),retrievalMethod:"semantic_search"}}],followUpSuggestions:["What are the implications of ".concat((null==(e=C[0])?void 0:e.term)||"this","?"),"How does ".concat((null==(t=C[1])?void 0:t.term)||"this"," compare to other approaches?"),"What are the limitations of ".concat((null==(s=C[2])?void 0:s.term)||"this","?")],exportFormats:[]};g(e=>[d,...e]),Q(e=>[...e,l]),p(""),f(!1),O&&L&&z(e=>e?{...e,sharedQuestions:[...e.sharedQuestions,x]}:null),n({sources:i.length,qaHistory:h.length+1,pinnedInsights:_.length,conceptsExtracted:C.length,entitiesExtracted:A.length})},2500))},eK=e=>{let t=h.find(t=>t.id===e);t&&(t.isPinned?$(t=>t.filter(t=>t.id!==e)):$(e=>[...e,{...t,isPinned:!0}]),g(t=>t.map(t=>t.id===e?{...t,isPinned:!t.isPinned}:t)))},eJ=async(e,t)=>{if(v(e),t){let s=h.find(e=>e.id===t);if(s){let a={id:"audit-".concat(Date.now()),timestamp:new Date,action:"model_switched",model:e,sources:s.citations.map(e=>e.sourceId),metadata:{tokensUsed:0,responseTime:0,confidence:.85,retrievalMethod:"model_switch"}};g(e=>e.map(e=>e.id===t?{...e,auditTrail:[...e.auditTrail||[],a]}:e))}}let s=Date.now();setTimeout(()=>{let t=Date.now()-s;eW(s=>({...s,[e]:{avgResponseTime:t,avgConfidence:.85}}))},1e3)};return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Junction - Semantic Research"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Upload documents and ask AI questions with precise citations and analysis"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,a.jsx)(b.A,{className:"h-5 w-5 mr-2"}),"Knowledge Sources (",i.length,")"]}),(0,a.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors ".concat(Z?"border-blue-500 bg-blue-50":"border-gray-300"),onDragOver:e=>{e.preventDefault(),ee(!0)},onDragLeave:e=>{e.preventDefault(),ee(!1)},onDrop:e=>{e.preventDefault(),ee(!1),eV(e.dataTransfer.files)},children:[(0,a.jsx)("input",{ref:en,type:"file",multiple:!0,accept:".pdf,.doc,.docx,.txt,.md",onChange:e=>eV(e.target.files),className:"hidden"}),(0,a.jsx)(ef.A,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Drag files here or"," ",(0,a.jsx)("button",{onClick:()=>{var e;return null==(e=en.current)?void 0:e.click()},className:"text-blue-600 hover:text-blue-700 underline",children:"browse to upload"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX, TXT, MD files"})]}),(0,a.jsx)("div",{className:"mt-6 space-y-3 max-h-64 overflow-y-auto",children:i.map(e=>{var t;return(0,a.jsx)("div",{className:"p-3 border rounded-lg transition-colors ".concat(o.has(e.id)?"border-blue-500 bg-blue-50":"border-gray-200"),children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer flex-1",children:[(0,a.jsx)("input",{type:"checkbox",checked:o.has(e.id),onChange:t=>{let s=new Set(o);t.target.checked?s.add(e.id):s.delete(e.id),c(s)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[(t=e.size)<1024?"".concat(t," B"):t<1048576?"".concat((t/1024).toFixed(1)," KB"):"".concat((t/1048576).toFixed(1)," MB"),e.pages&&" • ".concat(e.pages," pages")]})]})]})})},e.id)})})]})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>er("qa"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("qa"===ea?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"),children:[(0,a.jsx)(k.A,{className:"h-4 w-4 inline mr-2"}),"Q&A"]}),(0,a.jsxs)("button",{onClick:()=>er("concepts"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("concepts"===ea?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"),children:[(0,a.jsx)(P.A,{className:"h-4 w-4 inline mr-2"}),"Concepts (",C.length,")"]}),(0,a.jsxs)("button",{onClick:()=>er("collaborate"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("collaborate"===ea?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"),children:[(0,a.jsx)(E.A,{className:"h-4 w-4 inline mr-2"}),"Collaborate",O&&(0,a.jsx)("span",{className:"ml-1 w-2 h-2 bg-green-500 rounded-full inline-block"})]})]}),(0,a.jsxs)("button",{onClick:()=>es(!et),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[(0,a.jsx)(ev.A,{className:"h-4 w-4 mr-1"}),"Settings"]})]}),"qa"===ea&&(0,a.jsxs)(a.Fragment,{children:[et&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Model"}),(0,a.jsxs)("select",{value:j,onChange:e=>v(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"gpt-4",children:"GPT-4"}),(0,a.jsx)("option",{value:"claude",children:"Claude"}),(0,a.jsx)("option",{value:"gemini",children:"Gemini"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Response Tone"}),(0,a.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"comprehensive",children:"Comprehensive"}),(0,a.jsx)("option",{value:"analytical",children:"Analytical"}),(0,a.jsx)("option",{value:"concise",children:"Concise"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Selected Sources"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 py-2",children:[o.size," of ",i.length," sources"]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Summary Customization"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("select",{value:ei,onChange:e=>el(e.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[(0,a.jsx)("option",{value:"academic",children:"Academic"}),(0,a.jsx)("option",{value:"business",children:"Business"}),(0,a.jsx)("option",{value:"casual",children:"Casual"}),(0,a.jsx)("option",{value:"technical",children:"Technical"}),(0,a.jsx)("option",{value:"creative",children:"Creative"})]}),(0,a.jsxs)("select",{value:eu,onChange:e=>ex(e.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[(0,a.jsx)("option",{value:"expert",children:"Expert"}),(0,a.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,a.jsx)("option",{value:"beginner",children:"Beginner"})]})]}),(0,a.jsx)("input",{type:"text",value:ep,onChange:e=>eg(e.target.value),placeholder:"Custom focus area...",className:"w-full mt-2 border border-gray-300 rounded px-2 py-1 text-sm"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comparison Settings"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("select",{value:eb,onChange:e=>ey(e.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[(0,a.jsx)("option",{value:"automatic",children:"Automatic"}),(0,a.jsx)("option",{value:"manual",children:"Manual"})]}),(0,a.jsxs)("select",{value:ej,onChange:e=>eC(e.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[(0,a.jsx)("option",{value:"table",children:"Table"}),(0,a.jsx)("option",{value:"venn",children:"Venn Diagram"}),(0,a.jsx)("option",{value:"timeline",children:"Timeline"}),(0,a.jsx)("option",{value:"radar",children:"Radar Chart"})]})]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Model Selection"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:ez.map(e=>(0,a.jsxs)("button",{onClick:()=>eJ(e.id),className:"p-2 border rounded text-sm text-left transition-colors ".concat(j===e.id?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:e.description}),eF[e.id]&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[Math.round(eF[e.id].avgResponseTime),"ms avg"]})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("textarea",{value:x,onChange:e=>p(e.target.value),placeholder:"Ask a question about your uploaded documents...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3,disabled:0===o.size})}),(0,a.jsx)("div",{className:"flex flex-col space-y-2",children:(0,a.jsx)("button",{onClick:eH,disabled:!x.trim()||0===o.size||y,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:y?"Processing...":"Ask"})})]}),0===o.size&&(0,a.jsx)("p",{className:"text-sm text-amber-600 mt-2",children:"Please select at least one knowledge source to ask questions."})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Search"}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("input",{type:"text",value:V,onChange:e=>G(e.target.value),placeholder:"Search across all sources...",className:"flex-1 px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,a.jsx)("button",{onClick:()=>{V.trim()&&K(i.filter(e=>Array.from(o).includes(e.id)).flatMap(e=>[{sourceId:e.id,sourceName:e.name,pageNumber:Math.floor(10*Math.random())+1,paragraph:Math.floor(5*Math.random())+1,confidence:.8+.2*Math.random(),text:"...".concat(V," appears in this context with relevant information about the topic..."),context:"Additional context surrounding the search term provides deeper insights.",highlightedTerms:[V],conceptsReferenced:C.slice(0,2).map(e=>e.term)}]))},disabled:!V.trim(),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 disabled:opacity-50 transition-colors",children:(0,a.jsx)(eh.A,{className:"h-4 w-4"})})]}),H.length>0&&(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["Search Results (",H.length,")"]}),H.slice(0,3).map((e,t)=>(0,a.jsxs)("div",{className:"p-2 bg-white rounded border text-sm",children:[(0,a.jsx)("p",{className:"text-gray-800",children:e.text}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.sourceName," • Page ",e.pageNumber," • ",Math.round(100*e.confidence),"% match"]})]},t))]})]})]}),"concepts"===ea&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Extracted Concepts & Entities"}),(0,a.jsxs)("button",{onClick:()=>I(!R),className:"text-sm text-blue-600 hover:text-blue-700",children:[R?"Hide":"Show"," Concept Map"]})]}),R&&(0,a.jsx)("div",{className:"p-6 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)(P.A,{className:"h-12 w-12 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"Concept Relationship Map"}),(0,a.jsx)("p",{className:"text-sm",children:"Visual representation of concept relationships would appear here"}),(0,a.jsxs)("div",{className:"mt-4 flex justify-center space-x-4 text-xs",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-1"}),"Technical Concepts"]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-1"}),"Academic Concepts"]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full mr-1"}),"Business Concepts"]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-3",children:["Key Concepts (",C.length,")"]}),(0,a.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:C.map(e=>(0,a.jsxs)("div",{className:"p-3 bg-white border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h5",{className:"font-medium text-sm text-gray-900",children:e.term}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("technical"===e.category?"bg-blue-100 text-blue-800":"academic"===e.category?"bg-green-100 text-green-800":"business"===e.category?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.category})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:e.definition}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Frequency: ",e.frequency]}),(0,a.jsxs)("span",{children:["Importance: ",Math.round(100*e.importance),"%"]})]})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-3",children:["Entities (",A.length,")"]}),(0,a.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:A.map(e=>(0,a.jsxs)("div",{className:"p-3 bg-white border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h5",{className:"font-medium text-sm text-gray-900",children:e.name}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("organization"===e.type?"bg-blue-100 text-blue-800":"technology"===e.type?"bg-green-100 text-green-800":"person"===e.type?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.type})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Mentions: ",e.mentions]}),(0,a.jsxs)("span",{children:["Confidence: ",Math.round(100*e.confidence),"%"]})]})]},e.id))})]})]}),J.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Cross-Source Insights"}),(0,a.jsx)("div",{className:"space-y-3",children:J.map(e=>(0,a.jsxs)("div",{className:"p-4 bg-white border rounded-lg",children:[(0,a.jsx)("h5",{className:"font-medium text-sm text-gray-900 mb-2",children:e.topic}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-green-700",children:"Agreements:"}),(0,a.jsx)("ul",{className:"mt-1 space-y-1",children:e.agreements.map((e,t)=>(0,a.jsxs)("li",{className:"text-gray-600",children:["• ",e]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-red-700",children:"Contradictions:"}),(0,a.jsx)("ul",{className:"mt-1 space-y-1",children:e.contradictions.map((e,t)=>(0,a.jsxs)("li",{className:"text-gray-600",children:["• ",e]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-amber-700",children:"Gaps:"}),(0,a.jsx)("ul",{className:"mt-1 space-y-1",children:e.gaps.map((e,t)=>(0,a.jsxs)("li",{className:"text-gray-600",children:["• ",e]},t))})]})]}),(0,a.jsx)("div",{className:"mt-3 pt-3 border-t",children:(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Synthesis Score: ",Math.round(100*e.synthesisScore),"%"]})})]},e.id))})]})]}),"collaborate"===ea&&(0,a.jsx)("div",{className:"space-y-6",children:O?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-green-800",children:"Active Collaborative Session"}),(0,a.jsxs)("span",{className:"flex items-center text-sm text-green-700",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Live"]})]}),(0,a.jsx)("p",{className:"text-sm text-green-700 mb-3",children:null==L?void 0:L.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("input",{type:"text",value:U,readOnly:!0,className:"flex-1 px-3 py-2 bg-white border border-green-300 rounded text-sm"}),(0,a.jsx)("button",{onClick:()=>navigator.clipboard.writeText(U),className:"px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:"Copy"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-3",children:["Participants (",(null==L?void 0:L.participants.length)||0,")"]}),(0,a.jsx)("div",{className:"flex space-x-2",children:null==L?void 0:L.participants.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 rounded-lg",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:e.charAt(0)}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e})]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Shared Notes"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("input",{type:"text",placeholder:"Add a collaborative note...",className:"flex-1 px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onKeyPress:e=>{"Enter"===e.key&&e.currentTarget.value.trim()&&(eG(e.currentTarget.value,"annotation"),e.currentTarget.value="")}}),(0,a.jsx)("button",{onClick:()=>{let e=document.querySelector('input[placeholder="Add a collaborative note..."]');e&&e.value.trim()&&(eG(e.value,"annotation"),e.value="")},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add"})]}),W.map(e=>(0,a.jsxs)("div",{className:"p-3 bg-white border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"font-medium text-sm",children:e.userName}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp.toLocaleTimeString()})]}),(0,a.jsx)("p",{className:"text-sm text-gray-800",children:e.content})]},e.id)),0===W.length&&(0,a.jsx)("p",{className:"text-center text-gray-500 py-4",children:"No collaborative notes yet"})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(E.A,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Start Collaborative Session"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Share your research session with others for real-time collaboration"}),(0,a.jsx)("button",{onClick:()=>{let e="session-".concat(Date.now());z({id:e,name:"Junction Session ".concat(new Date().toLocaleString()),participants:["You"],sharedQuestions:[],sharedInsights:[],isActive:!0}),F(!0),q("https://junction.example.com/session/".concat(e))},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Shareable Link"})]})})]})})]}),_.length>0&&(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center text-yellow-800",children:[(0,a.jsx)(eN.A,{className:"h-5 w-5 mr-2"}),"Pinned Insights (",_.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:_.map(e=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,a.jsx)("p",{className:"font-medium text-sm text-gray-900 mb-2",children:e.question}),(0,a.jsxs)("p",{className:"text-sm text-gray-700 mb-3",children:[e.answer.substring(0,150),"..."]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[e.citations.length," citations"]}),(0,a.jsx)("button",{onClick:()=>eK(e.id),className:"text-yellow-600 hover:text-yellow-700",children:"Unpin"})]})]},e.id))})]}),eT.length>0&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold flex items-center text-blue-800",children:[(0,a.jsx)(eN.A,{className:"h-5 w-5 mr-2"}),"Enhanced Insights (",eT.length,")"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("select",{value:eR,onChange:e=>eI(e.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Categories"}),Array.from(eM).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{value:eE,onChange:e=>eL(e.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"}),(0,a.jsx)("option",{value:"critical",children:"Critical"})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(e=eT,"all"!==eR&&(e=e.filter(e=>e.category===eR)),"medium"!==eE&&(e=e.filter(e=>e.importance===eE)),e).map(e=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("critical"===e.importance?"bg-red-100 text-red-800":"high"===e.importance?"bg-orange-100 text-orange-800":"medium"===e.importance?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.importance}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs bg-blue-100 text-blue-800",children:e.category})]}),(0,a.jsx)("p",{className:"font-medium text-sm text-gray-900 mb-2",children:e.question}),(0,a.jsxs)("p",{className:"text-sm text-gray-700 mb-3",children:[e.answer.substring(0,150),"..."]}),e.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:e},e))}),e.notes&&(0,a.jsxs)("p",{className:"text-xs text-gray-600 mb-3 italic",children:['"',e.notes,'"']}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[e.exportHistory.length," exports"]}),(0,a.jsx)("span",{children:e.pinnedAt.toLocaleDateString()})]})]},e.id))})]}),eS&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold flex items-center text-green-800",children:[(0,a.jsx)(P.A,{className:"h-5 w-5 mr-2"}),"Cross-Source Comparison: ",eS.topic]}),(0,a.jsx)("button",{onClick:()=>eA(null),className:"text-green-600 hover:text-green-700 text-sm",children:"Close"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[eS.comparisonMatrix&&(0,a.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Comparison Matrix"}),(0,a.jsx)("div",{className:"space-y-2",children:eS.comparisonMatrix.comparisonPoints.map((e,t)=>(0,a.jsxs)("div",{className:"border-b pb-2",children:[(0,a.jsx)("div",{className:"font-medium text-sm text-gray-700 mb-1",children:e.aspect}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,a.jsx)("div",{className:"font-medium",children:eS.comparisonMatrix.sources[0]}),(0,a.jsx)("div",{className:"text-gray-600",children:e.source1Value})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,a.jsx)("div",{className:"font-medium",children:eS.comparisonMatrix.sources[1]}),(0,a.jsx)("div",{className:"text-gray-600",children:e.source2Value})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(e.agreement?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.agreement?"Agreement":"Disagreement"}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[Math.round(100*e.confidence),"% confidence"]})]})]},t))})]}),eS.visualComparison&&(0,a.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 mb-3",children:["venn"===eS.visualComparison.type&&"Venn Diagram","timeline"===eS.visualComparison.type&&"Timeline View","radar"===eS.visualComparison.type&&"Radar Chart","table"===eS.visualComparison.type&&"Comparison Table"]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded text-center",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Visualization: ",eS.visualComparison.type]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:eS.visualComparison.highlights.map((e,t)=>(0,a.jsxs)("div",{className:"mb-1",children:["• ",e]},t))})]})]})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-white rounded border",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Synthesis Score"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-green-600",children:[Math.round(100*eS.synthesisScore),"%"]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsxs)("h3",{className:"text-lg font-semibold",children:["Conversation History (",h.length,")"]})}),(0,a.jsx)("div",{className:"p-6 space-y-6 max-h-96 overflow-y-auto",children:0===h.length?(0,a.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,a.jsx)(ew.A,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),(0,a.jsx)("p",{children:"Ask your first question to get started"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:'Try: "What are the main themes in these documents?"'})]}):h.map(e=>(0,a.jsxs)("div",{className:"border-l-4 border-blue-500 pl-6 py-4 bg-blue-50 rounded-r-lg",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900",children:["Q: ",e.question]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>eK(e.id),className:"p-1 rounded ".concat(e.isPinned?"text-yellow-500":"text-gray-400 hover:text-yellow-500"),title:e.isPinned?"Unpin":"Pin insight",children:(0,a.jsx)(eN.A,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.model," • ",e.tone]})]})]})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("p",{className:"text-gray-800 leading-relaxed",children:e.answer})}),e.citations.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("h5",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,a.jsx)(E.A,{className:"h-4 w-4 mr-1"}),"Citations (",e.citations.length,")"]}),(0,a.jsx)("div",{className:"space-y-2",children:e.citations.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white p-3 rounded border text-sm",children:[(0,a.jsxs)("p",{className:"text-gray-800 mb-1",children:['"',e.text,'"']}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[e.sourceName,e.pageNumber&&" • Page ".concat(e.pageNumber)," • Paragraph ",e.paragraph]}),(0,a.jsxs)("span",{className:"bg-gray-100 px-2 py-1 rounded",children:[Math.round(100*e.confidence),"% confidence"]})]})]},t))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,a.jsx)("button",{onClick:()=>{p('Following up on "'.concat(e.question,'": ').concat("Can you elaborate on this?")),setTimeout(()=>eH(),100)},className:"text-blue-600 hover:text-blue-700",children:"Follow up"}),(0,a.jsx)("button",{onClick:()=>((e,t)=>{v(t);let s=h.find(t=>t.id===e);s&&(p(s.question),setTimeout(()=>{eH(),v(j)},100))})(e.id,"gpt-4"===e.model?"claude":"gpt-4"),className:"text-blue-600 hover:text-blue-700",children:"Try different model"}),(0,a.jsx)("span",{className:"text-gray-500 text-xs",children:e.timestamp.toLocaleTimeString()})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[i.length," sources • ",h.length," questions • ",_.length," pinned"]}),(0,a.jsxs)("button",{onClick:()=>{n({totalSources:i.length,totalQuestions:h.length,pinnedInsights:_.length,searchQueries:+(H.length>0)}),t()},className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,a.jsx)(ek.A,{className:"h-5 w-5 mr-2"}),"Complete Research Session"]})]})]})}var eS=s(7186),eA=s(8397);function eT(){var e,t;let{nextStep:s,updateWorkflowData:n}=(0,u.j)(),[i,l]=(0,r.useState)({topics:[],entities:[],sentiment:"neutral",intent:"",previousQueries:[]}),[o,c]=(0,r.useState)(null),[d,m]=(0,r.useState)([]),[x,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)(new Date),[b]=(0,r.useState)([{id:"gpt-4",name:"GPT-4",provider:"OpenAI",status:"online",speed:"fast"},{id:"claude-3",name:"Claude 3",provider:"Anthropic",status:"online",speed:"medium"},{id:"gemini-pro",name:"Gemini Pro",provider:"Google",status:"online",speed:"fast"},{id:"llama-local",name:"Llama (Local)",provider:"Meta",status:"offline",speed:"slow"}]),[j,v]=(0,r.useState)([{id:"mem-1",title:"Project Planning Best Practices",relevanceScore:.9,snippet:"Key strategies for effective project planning include stakeholder mapping, risk assessment...",source:"notebook"},{id:"mem-2",title:"Team Meeting Notes - Q4 Strategy",relevanceScore:.8,snippet:"Discussion about automation workflows and productivity improvements...",source:"voice-note"}]),[N,k]=(0,r.useState)(""),[C,S]=(0,r.useState)(!1),[A,T]=(0,r.useState)(!1),[D,M]=(0,r.useState)(!1),[P,R]=(0,r.useState)({}),[E,L]=(0,r.useState)(!1),[z,O]=(0,r.useState)([]),[F,W]=(0,r.useState)("gpt-4"),[B,U]=(0,r.useState)("friendly"),[q,V]=(0,r.useState)("balanced"),G=(0,r.useRef)(null),H=(0,r.useRef)(null);(0,r.useEffect)(()=>{0===d.length&&J(!0)},[]),(0,r.useEffect)(()=>{G.current&&G.current.scrollIntoView({behavior:"smooth"})},[null==o?void 0:o.messages]),(0,r.useEffect)(()=>{let e=setInterval(()=>{o&&o.messages.length>0&&(p(!0),setTimeout(()=>{p(!1),g(new Date),localStorage.setItem("mere-sessions",JSON.stringify(d))},500))},3e4);return()=>clearInterval(e)},[o,d]),(0,r.useEffect)(()=>{let e=localStorage.getItem("mere-sessions");if(e)try{let t=JSON.parse(e);m(t.map(e=>({...e,timestamp:new Date(e.timestamp),messages:e.messages.map(e=>({...e,timestamp:new Date(e.timestamp)}))})))}catch(e){console.warn("Failed to load saved sessions:",e)}0===d.length&&J(!0)},[]);let K=(0,r.useCallback)((e,t)=>{l(s=>{let a=e.toLowerCase().match(/\b(workflow|automation|transcription|research|planning|meeting|project)\w*\b/g)||[],r=t.toLowerCase().match(/\b(workflow|automation|transcription|research|planning|meeting|project)\w*\b/g)||[],n=[...e.match(/\b[A-Z][a-z]+\b/g)||[],...t.match(/\b[A-Z][a-z]+\b/g)||[]],i=["good","great","excellent","perfect","amazing","helpful"].some(t=>e.toLowerCase().includes(t)),l=["bad","terrible","awful","wrong","problem","issue","error"].some(t=>e.toLowerCase().includes(t)),o="neutral";return i&&!l?o="positive":l&&!i&&(o="negative"),{topics:Array.from(new Set([...s.topics,...a,...r])).slice(-10),entities:Array.from(new Set([...s.entities,...n])).slice(-20),sentiment:o,intent:e.toLowerCase().includes("?")?"question":"statement",previousQueries:[...s.previousQueries,e].slice(-5)}})},[]),J=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={id:"session-".concat(Date.now()),title:e?"Welcome to Mere":"New Chat",timestamp:new Date,messages:e?[{id:"welcome",type:"assistant",content:"Hello! I'm Mere, your AI assistant. I can help you with research, writing, planning, and managing your workflows across the Ntu platform. Here are some things you can try:",timestamp:new Date,model:F,appSuggestions:[{action:"Create a voice note and transcribe it",app:"Yonder",description:"Record and automatically transcribe audio",permission:"ask"},{action:"Research a topic with document upload",app:"Junction",description:"Upload documents and ask semantic questions",permission:"ask"},{action:"Build an automation workflow",app:"Marathon",description:"Create automated workflows and triggers",permission:"ask"}]}]:[],settings:{tone:B,verbosity:q,model:F,memoryBinding:D,appIntegration:!0},memoryAware:D};m(e=>[t,...e]),c(t)},Q=(0,r.useCallback)(e=>{if(!D)return[];let t=e.toLowerCase().split(" ").filter(e=>e.length>2);return j.map(e=>{let s=e.title.toLowerCase().split(" "),a=e.snippet.toLowerCase().split(" "),r=(2*s.filter(e=>t.some(t=>e.includes(t))).length+a.filter(e=>t.some(t=>e.includes(t))).length)/t.length;return{...e,relevanceScore:r}}).filter(e=>e.relevanceScore>.1).sort((e,t)=>t.relevanceScore-e.relevanceScore).slice(0,3)},[j,D]),Y=(0,r.useCallback)(async e=>{T(!0);let t=Q(e);"\n      Previous topics: ".concat(i.topics.join(", "),"\n      Previous queries: ").concat(i.previousQueries.slice(-2).join("; "),"\n      Current sentiment: ").concat(i.sentiment,"\n      User query: ").concat(e,"\n      ").concat(t.length>0?"Relevant memories: ".concat(t.map(e=>e.snippet).join("; ")):"","\n    ");let s="llama-local"===F?3e3:"claude-3"===F?1500:1200;await new Promise(e=>setTimeout(e,s));let a="",r=[];if(e.toLowerCase().includes("transcribe")||e.toLowerCase().includes("voice"))a="I can help you with voice transcription! ".concat(t.length>0?'Based on your previous work with "'.concat(t[0].title,'", '):"","The Yonder app provides real-time transcription with speaker identification and confidence scoring."),i.previousQueries.some(e=>e.includes("meeting"))&&(a+=" Since you mentioned meetings earlier, you might find the speaker diarization feature particularly useful."),r=[{action:"Start voice transcription",app:"Yonder",description:"Open Yonder for real-time voice transcription",permission:"ask"}];else if(e.toLowerCase().includes("research")||e.toLowerCase().includes("document"))a="For research and document analysis, Junction offers semantic Q&A capabilities. ".concat(t.length>0?"I can see you've worked on \"".concat(t[0].title,'" before - '):"","You can upload multiple documents and ask questions with precise citations."),i.topics.includes("project")&&(a+=" This would be perfect for your project research needs."),r=[{action:"Start research session",app:"Junction",description:"Open Junction for semantic document research",permission:"ask"}];else if(e.toLowerCase().includes("automat")||e.toLowerCase().includes("workflow"))a="Marathon is perfect for creating automated workflows! ".concat(t.length>0?'Building on your previous work with "'.concat(t[0].title,'", '):"","You can build visual automation flows with drag-and-drop nodes, triggers, and actions."),"positive"===i.sentiment&&(a+=" I can tell you're excited about automation - Marathon will definitely help streamline your processes!"),r=[{action:"Create automation workflow",app:"Marathon",description:"Open Marathon workflow builder",permission:"ask"}];else{let e=[];t.length>0&&e.push('building on your previous work with "'.concat(t[0].title,'"')),i.topics.length>0&&e.push("considering your interest in ".concat(i.topics.slice(-2).join(" and ")));let s=e.length>0?"".concat(e.join(", "),", "):"",r=["That's an interesting question! ".concat(s).concat("detailed"===q?"Let me provide a comprehensive analysis. ":"concise"===q?"Here's a quick answer: ":"","Based on current best practices, I'd recommend..."),"I can help you with that! ".concat(s).concat("analytical"===B?"From an analytical perspective,":"creative"===B?"Here's a creative approach:":"professional"===B?"Professionally speaking,":""," this is what I suggest..."),"Great question! ".concat(s).concat("detailed"===q?"Let me break this down into several key components.":"Here's what you need to know.")];a=r[Math.floor(Math.random()*r.length)]}T(!1);let n={id:"msg-".concat(Date.now()),type:"assistant",content:a,timestamp:new Date,model:F,tokenCount:Math.floor(a.length/4),memoryContext:D,conversationContext:i.topics,memoryReferences:t,appSuggestions:r};return K(e,a),n},[F,q,B,D,i,Q,K]),X=async()=>{if(!N.trim()||!o)return;let e={id:"msg-".concat(Date.now(),"-user"),type:"user",content:N,timestamp:new Date,model:F},t={...o,messages:[...o.messages,e]};c(t),m(e=>e.map(e=>e.id===o.id?t:e)),k(""),S(!0);try{let e=await Y(N),s={...t,messages:[...t.messages,e]};c(s),m(e=>e.map(e=>e.id===o.id?s:e)),S(!1)}catch(e){S(!1)}},_=e=>{let t={id:"system-".concat(Date.now()),type:"system",content:"✓ ".concat(e.action," initiated in ").concat(e.app),timestamp:new Date,model:F};if(o){let e={...o,messages:[...o.messages,t]};c(e),m(t=>t.map(t=>t.id===o.id?e:t))}};return o?(0,a.jsxs)("div",{className:"max-w-6xl mx-auto h-screen flex flex-col",children:[(0,a.jsxs)("div",{className:"text-center py-6 border-b bg-white",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Mere - AI Assistant"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Your intelligent companion for research, planning, and workflow automation"})]}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,a.jsxs)("div",{className:"w-80 bg-gray-50 border-r flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsxs)("button",{onClick:()=>J(),className:"w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"New Chat"]})}),(0,a.jsxs)("div",{className:"p-4 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Settings"}),(0,a.jsx)("button",{onClick:()=>L(!E),className:"p-1 text-gray-500 hover:text-gray-700",children:(0,a.jsx)(eS.A,{className:"h-5 w-5"})})]}),E&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Memory Context"}),(0,a.jsx)("button",{onClick:()=>M(!D),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(D?"bg-blue-600":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(D?"translate-x-6":"translate-x-1")})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Model"}),(0,a.jsx)("select",{value:F,onChange:e=>W(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",children:b.map(e=>(0,a.jsxs)("option",{value:e.id,disabled:"offline"===e.status,children:[e.name," (",e.provider,") - ",e.speed]},e.id))}),(0,a.jsxs)("div",{className:"mt-2 flex items-center text-xs",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat((null==(e=b.find(e=>e.id===F))?void 0:e.status)==="online"?"bg-green-500":"bg-red-500")}),(0,a.jsx)("span",{className:"text-gray-600",children:(null==(t=b.find(e=>e.id===F))?void 0:t.status)==="online"?"Online":"Offline"}),x&&(0,a.jsx)("span",{className:"ml-2 text-blue-600",children:"Auto-saving..."})]})]}),D&&(0,a.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(eA.A,{className:"h-4 w-4 text-green-600 mr-2"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-800",children:"Memory Context Active"})]}),(0,a.jsxs)("div",{className:"text-xs text-green-700 space-y-1",children:[(0,a.jsxs)("div",{children:["Available memories: ",j.length]}),i.topics.length>0&&(0,a.jsxs)("div",{children:["Active topics: ",i.topics.slice(-3).join(", ")]}),(0,a.jsxs)("div",{children:["Last saved: ",h.toLocaleTimeString()]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Response Tone"}),(0,a.jsxs)("select",{value:B,onChange:e=>U(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"friendly",children:"Friendly"}),(0,a.jsx)("option",{value:"professional",children:"Professional"}),(0,a.jsx)("option",{value:"analytical",children:"Analytical"}),(0,a.jsx)("option",{value:"creative",children:"Creative"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Response Length"}),(0,a.jsxs)("select",{value:q,onChange:e=>V(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"concise",children:"Concise"}),(0,a.jsx)("option",{value:"balanced",children:"Balanced"}),(0,a.jsx)("option",{value:"detailed",children:"Detailed"})]})]})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3",children:["Sessions (",d.length,")"]}),(0,a.jsx)("div",{className:"space-y-2",children:d.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-lg cursor-pointer transition-colors ".concat((null==o?void 0:o.id)===e.id?"bg-blue-100 border border-blue-300":"bg-white border border-gray-200 hover:bg-gray-50"),onClick:()=>c(e),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm truncate",children:e.title}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation();var s=e.id;if(confirm("Are you sure you want to delete this session?")&&(m(e=>e.filter(e=>e.id!==s)),(null==o?void 0:o.id)===s)){let e=d.filter(e=>e.id!==s);c(e[0]||null),0===e.length&&J()}},className:"text-gray-400 hover:text-red-500 text-xs",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[e.messages.length," messages"]}),(0,a.jsx)("span",{children:e.timestamp.toLocaleDateString()})]}),e.memoryAware&&(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-800",children:[(0,a.jsx)(eA.A,{className:"h-3 w-3 mr-1"}),"Memory-aware"]})})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col bg-white",children:[(0,a.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:o.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(eA.A,{className:"h-4 w-4 mr-1"}),F]}),(0,a.jsxs)("span",{children:[o.messages.length," messages"]}),z.length>0&&(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(eN.A,{className:"h-4 w-4 mr-1"}),z.length," pinned"]})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:D&&(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800",children:[(0,a.jsx)(ea.A,{className:"h-4 w-4 mr-1"}),"Memory Active"]})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.messages.map(e=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.type?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-3xl ".concat("user"===e.type?"bg-blue-600 text-white":"system"===e.type?"bg-gray-100 text-gray-700 border":"bg-gray-100 text-gray-900"," rounded-lg p-4 relative group"),children:["assistant"===e.type&&(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2 text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(eA.A,{className:"h-3 w-3 mr-1"}),e.model]}),e.tokenCount&&(0,a.jsxs)("span",{children:[e.tokenCount," tokens"]}),e.memoryContext&&(0,a.jsxs)("span",{className:"flex items-center text-green-600",children:[(0,a.jsx)(y.A,{className:"h-3 w-3 mr-1"}),"Memory"]}),e.conversationContext&&e.conversationContext.length>0&&(0,a.jsxs)("span",{className:"flex items-center text-blue-600",children:[(0,a.jsx)(I.A,{className:"h-3 w-3 mr-1"}),"Context"]})]}),(0,a.jsx)("button",{onClick:()=>(e=>{if(!o)return;let t=o.messages.find(t=>t.id===e);t&&(z.some(t=>t.id===e)?O(t=>t.filter(t=>t.id!==e)):O(e=>[...e,{...t,isPinned:!0}]))})(e.id),className:"opacity-0 group-hover:opacity-100 transition-opacity ".concat(z.some(t=>t.id===e.id)?"text-yellow-500":"text-gray-400 hover:text-yellow-500"),children:(0,a.jsx)(eN.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:e.content})}),e.memoryReferences&&e.memoryReferences.length>0&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-green-800 mb-2 flex items-center",children:[(0,a.jsx)(eA.A,{className:"h-4 w-4 mr-1"}),"Referenced from your memory:"]}),(0,a.jsx)("div",{className:"space-y-2",children:e.memoryReferences.map(e=>(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-green-900",children:e.title}),(0,a.jsx)("span",{className:"text-green-600 bg-green-100 px-2 py-1 rounded text-xs",children:e.source})]}),(0,a.jsx)("p",{className:"text-green-700 mt-1",children:e.snippet}),(0,a.jsxs)("div",{className:"text-green-500 mt-1",children:["Relevance: ",Math.round(100*e.relevanceScore),"%"]})]},e.id))})]}),e.conversationContext&&e.conversationContext.length>0&&(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:e.conversationContext.map(e=>(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:e},e))}),e.appSuggestions&&e.appSuggestions.length>0&&(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Suggested actions:"}),e.appSuggestions.map((e,t)=>(0,a.jsx)("button",{onClick:()=>(e=>{let t=P[e.app]||e.permission;if("never"!==t){if("always"===t)return void _(e);if(confirm("".concat(e.description,"\n\nWould you like to:\n- Allow this once\n- Always allow for ").concat(e.app,"\n- Never allow for ").concat(e.app)))switch(prompt("Choose permission level:\n1. Once\n2. Always\n3. Never","1")){case"1":_(e);break;case"2":R(t=>({...t,[e.app]:"always"})),_(e);break;case"3":R(t=>({...t,[e.app]:"never"}))}}})(e),className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm text-gray-900",children:e.action}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]}),(0,a.jsx)("div",{className:"text-xs text-blue-600 font-medium",children:e.app})]})},t))]}),(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-400",children:e.timestamp.toLocaleTimeString()})]})},e.id)),C&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-gray-100 rounded-lg p-4 max-w-xs",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"Mere is thinking..."})]})})}),(0,a.jsx)("div",{ref:G})]}),(0,a.jsx)("div",{className:"p-4 border-t",children:(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("textarea",{ref:H,value:N,onChange:e=>k(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),X())},placeholder:D?"Ask me anything about your memories and workflows...":"Ask me anything...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3,disabled:A}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"Press Shift+Enter for new line, Enter to send"}),(0,a.jsxs)("span",{children:[N.length," characters"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("button",{onClick:X,disabled:!N.trim()||A,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:A?"Sending...":"Send"}),(0,a.jsx)("button",{className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",title:"Voice input (coming soon)",disabled:!0,children:(0,a.jsx)(f.A,{className:"h-4 w-4 text-gray-400"})})]})]})})]})]}),(0,a.jsxs)("div",{className:"p-4 border-t bg-gray-50 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[d.length," sessions • ",d.reduce((e,t)=>e+t.messages.length,0)," total messages • ",z.length," pinned"]}),(0,a.jsxs)("button",{onClick:()=>{n({totalSessions:d.length,totalMessages:d.reduce((e,t)=>e+t.messages.length,0),pinnedInsights:z.length,memoryAware:D}),s()},className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,a.jsx)(ea.A,{className:"h-4 w-4 mr-2"}),"Complete Session"]})]})]}):null}var eD=s(8593),eM=s(9972),eP=s(9695);function eR(){let{nextStep:e,updateWorkflowData:t}=(0,u.j)(),[s,n]=(0,r.useState)([]),[i,l]=(0,r.useState)([]),[o,c]=(0,r.useState)(null),[d,m]=(0,r.useState)(null),[x,p]=(0,r.useState)({x:0,y:0}),[h,g]=(0,r.useState)(1),[b,f]=(0,r.useState)({x:0,y:0}),[v,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)({x:0,y:0}),[C,S]=(0,r.useState)(null),[A,T]=(0,r.useState)(!1),[D,M]=(0,r.useState)("realtime"),[P,R]=(0,r.useState)(""),[I,E]=(0,r.useState)(!0),[O,F]=(0,r.useState)(!1),[W,B]=(0,r.useState)("all"),[V,G]=(0,r.useState)(!1),[H,K]=(0,r.useState)("1.0.0"),[Q,Y]=(0,r.useState)(!1),[X,_]=(0,r.useState)(null),[$,Z]=(0,r.useState)(null),[ee,et]=(0,r.useState)([]),[es,er]=(0,r.useState)("info"),[en,ei]=(0,r.useState)([]),[el,eo]=(0,r.useState)(!1),[ec,ed]=(0,r.useState)({id:"workflow-".concat(Date.now()),name:"Untitled Workflow",description:"",createdBy:"current-user",createdAt:new Date,updatedAt:new Date,permissions:{visibility:"private",allowedRoles:["admin","editor"],allowedUsers:[],canEdit:["current-user"],canExecute:["current-user"],canView:["current-user"]},tags:[],category:"general",version:"1.0.0",versionHistory:[]}),[em,eu]=(0,r.useState)(!1),[ep,eh]=(0,r.useState)("editor"),eg=e=>{let t=ec.permissions,s="current-user";if(!t.allowedRoles.includes(ep))return!1;switch(e){case"view":return t.canView.includes(s)||t.canView.includes("*");case"edit":return t.canEdit.includes(s)||t.canEdit.includes("*");case"execute":return t.canExecute.includes(s)||t.canExecute.includes("*");default:return!1}},eb=(0,r.useRef)(null);(0,r.useRef)(null);let[ey,ef]=(0,r.useState)(null),[ej,eN]=(0,r.useState)(null),[ew,ek]=(0,r.useState)({x:0,y:0}),[eC,eS]=(0,r.useState)(null),[eA,eT]=(0,r.useState)([]),[eR,eI]=(0,r.useState)([]),eE=(0,r.useCallback)(()=>{eT(e=>[...e,{nodes:s,connections:i}]),eI([])},[s,i]);(0,r.useEffect)(()=>{o&&eS(o)},[o]);let eL=(e,t)=>{if(!eg("edit"))return void console.error("User does not have permission to edit this workflow");eE(),n(s=>s.map(s=>s.id===e?{...s,...t}:s)),ed(e=>({...e,updatedAt:new Date}))},ez=(e,t,s)=>{let a=document.getElementById("node-".concat(e.id)),r=document.getElementById("port-".concat(t));if(a&&r&&eb.current){let e=a.getBoundingClientRect(),t=r.getBoundingClientRect(),s=eb.current.getBoundingClientRect();return{x:e.left-s.left+(t.left-e.left)+t.width/2,y:e.top-s.top+(t.top-e.top)+t.height/2}}return{x:e.position.x,y:e.position.y}},eO=(e,t)=>({x:20*Math.round(e/20),y:20*Math.round(t/20)});(0,r.useEffect)(()=>{let e=e=>{"Delete"===e.key&&o&&eF(o),(e.ctrlKey||e.metaKey)&&"z"===e.key&&(e.preventDefault(),(()=>{if(0===eA.length)return;let e=eA[eA.length-1];eI(e=>[{nodes:s,connections:i},...e]),n(e.nodes),l(e.connections),eT(e=>e.slice(0,e.length-1))})()),(e.ctrlKey||e.metaKey)&&"y"===e.key&&(e.preventDefault(),(()=>{if(0===eR.length)return;let e=eR[0];eT(e=>[...e,{nodes:s,connections:i}]),n(e.nodes),l(e.connections),eI(e=>e.slice(1))})()),(e.ctrlKey||e.metaKey)&&"d"===e.key.toLowerCase()&&o&&(e.preventDefault(),(e=>{let t=s.find(t=>t.id===e);if(!t)return;let a="".concat(t.id,"-copy-").concat(Date.now()),r={...t,id:a,position:{x:t.position.x+40,y:t.position.y+40},title:t.title?"".concat(t.title," (copy)"):""};n(e=>[...e,r]),eE()})(o))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o]);let eF=e=>{n(t=>t.filter(t=>t.id!==e)),l(t=>t.filter(t=>t.sourceNodeId!==e&&t.targetNodeId!==e)),c(null)},eW=async()=>{if(!eg("execute"))return void console.error("User does not have permission to execute this workflow");T(!0);let e={id:"exec-".concat(Date.now()),status:"running",startTime:new Date,executedNodes:[],errors:[]};S(e),n(e=>e.map(e=>({...e,status:"idle"})));try{let t=s.filter(e=>"trigger"===e.type).map(t=>eB(t.id,{},e));await Promise.allSettled(t),e.status=e.errors.length>0?"failed":"completed",e.endTime=new Date}catch(t){e.errors.push({nodeId:"system",message:"Workflow execution failed: ".concat(t),timestamp:new Date}),e.status="failed",e.endTime=new Date}finally{S(e),T(!1),setTimeout(()=>{n(e=>e.map(e=>({...e,status:"idle"})))},3e3)}},eB=async(e,t,a)=>{let r=s.find(t=>t.id===e);if(!r)return;n(t=>t.map(t=>t.id===e?{...t,status:"running"}:t)),a.executedNodes.push(e),await new Promise(e=>setTimeout(e,1e3));let l=t,o=[];try{switch(r.type){case"condition":let s=await eU(r,t,a);l=s.data,o=s.outputPorts;break;case"action":l=await eV(r,t),o=r.ports.outputs.map(e=>e.id);break;case"trigger":l={...t,triggered:!0,timestamp:Date.now()},o=r.ports.outputs.map(e=>e.id);break;default:o=r.ports.outputs.map(e=>e.id)}n(t=>t.map(t=>t.id===e?{...t,status:"success"}:t));let c=[];for(let t of o){let s=i.filter(s=>s.sourceNodeId===e&&s.sourcePortId===t).map(e=>e.targetNodeId).map(e=>eB(e,l,a));c.push(...s)}return c.length>0&&await Promise.allSettled(c),l}catch(t){throw n(t=>t.map(t=>t.id===e?{...t,status:"error"}:t)),t}},eU=async(e,t,s)=>{switch(e.id){case"if-else":let a=eq(e.config.condition,t);return{data:t,outputPorts:a?["true"]:["false"]};case"switch":var r;let n=(null==t?void 0:t.value)||t,l=null==(r=e.config.cases)?void 0:r.find(e=>e.value===n);return{data:t,outputPorts:l?["case".concat(e.config.cases.indexOf(l)+1)]:["default"]};case"for-loop":let o=(null==t?void 0:t.array)||[],c=[];for(let a=0;a<o.length;a++){let r={...t,item:o[a],index:a};for(let t of(c.push(r),i.filter(t=>t.sourceNodeId===e.id&&"item"===t.sourcePortId).map(e=>e.targetNodeId)))await eB(t,r,s)}return{data:{...t,results:c,completed:!0},outputPorts:["complete"]};case"while-loop":let d=e.config.maxIterations||100,m=0,u=t;for(;eq(e.config.condition,u)&&m<d;){let t={...u,iteration:m};for(let a of i.filter(t=>t.sourceNodeId===e.id&&"loop"===t.sourcePortId).map(e=>e.targetNodeId))u=await eB(a,t,s);m++}return{data:{...u,iterations:m},outputPorts:["exit"]};default:return{data:t,outputPorts:e.ports.outputs.map(e=>e.id)}}},eq=(e,t)=>{try{return!!Function("data","return ".concat(e))(t)}catch(e){return!1}},eV=async(e,t)=>({...t,processed:!0,nodeId:e.id}),eG=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={id:"version-".concat(Date.now()),version:eH(H),timestamp:new Date,createdBy:"current-user",description:e,nodes:[...s],connections:[...i],metadata:{...ec},isRollbackPoint:t};return ed(e=>({...e,version:a.version,versionHistory:[...e.versionHistory,a]})),K(a.version),a},eH=e=>{let t=e.split("."),s=parseInt(t[0]),a=parseInt(t[1]),r=parseInt(t[2]);return"".concat(s,".").concat(a,".").concat(r+1)},eK=async function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],Y(!0);try{Date.now(),await eW(),Z({success:(null==C?void 0:C.status)==="completed",execution:C,timestamp:new Date})}catch(e){Z({success:!1,error:e instanceof Error?e.message:"Unknown error",timestamp:new Date})}finally{Y(!1)}},eJ=(e,t,s)=>{let a={id:"log-".concat(Date.now()),executionId:(null==C?void 0:C.id)||"manual",nodeId:"system",timestamp:new Date,level:e,message:t,data:s};et(e=>[...e,a])},eQ=async(e,t)=>{let s=en.find(t=>t.id===e);if(s&&s.enabled)try{let a=await fetch(s.url,{method:s.method,headers:{"Content-Type":"application/json",...s.headers},body:"GET"!==s.method?JSON.stringify(t):void 0});return ei(t=>t.map(t=>t.id===e?{...t,triggerCount:t.triggerCount+1,lastTriggered:new Date}:t)),eJ("info","Webhook triggered: ".concat(s.name),{endpointId:e,status:a.status,success:a.ok}),a.ok}catch(a){let t=a instanceof Error?a.message:"Unknown error";return eJ("error","Webhook failed: ".concat(s.name),{endpointId:e,error:t}),!1}},eY={triggers:[{id:"memory-created",type:"trigger",title:"Memory Created",description:"Triggers when a new memory is created",position:{x:0,y:0},ports:{inputs:[],outputs:[{id:"memory",type:"output",dataType:"object",connected:!1}]},config:{eventType:"memory.created",filters:{memoryType:"any",tags:[]}},status:"idle",category:"triggers",icon:j.A,color:"bg-blue-500"},{id:"note-tagged",type:"trigger",title:"Note Tagged",description:"Triggers when a note is tagged with specific tags",position:{x:0,y:0},ports:{inputs:[],outputs:[{id:"note",type:"output",dataType:"object",connected:!1},{id:"tags",type:"output",dataType:"array",connected:!1}]},config:{eventType:"note.tagged",filters:{tags:["important","review"],matchType:"any"}},status:"idle",category:"triggers",icon:j.A,color:"bg-green-500"},{id:"file-uploaded",type:"trigger",title:"File Uploaded",description:"Triggers when a file is uploaded to the system",position:{x:0,y:0},ports:{inputs:[],outputs:[{id:"file",type:"output",dataType:"object",connected:!1},{id:"metadata",type:"output",dataType:"object",connected:!1}]},config:{eventType:"file.uploaded",filters:{fileTypes:["pdf","txt","md"],maxSize:0xa00000}},status:"idle",category:"triggers",icon:j.A,color:"bg-purple-500"},{id:"schedule-trigger",type:"trigger",title:"Schedule Trigger",description:"Triggers on a specific schedule or time interval",position:{x:0,y:0},ports:{inputs:[],outputs:[{id:"timestamp",type:"output",dataType:"number",connected:!1}]},config:{eventType:"schedule.trigger",schedule:{type:"recurring",interval:"daily",time:"09:00"}},status:"idle",category:"triggers",icon:z.A,color:"bg-orange-500"},{id:"webhook-trigger",type:"trigger",title:"Webhook Trigger",description:"Triggers when a webhook endpoint receives data",position:{x:0,y:0},ports:{inputs:[],outputs:[{id:"payload",type:"output",dataType:"object",connected:!1},{id:"headers",type:"output",dataType:"object",connected:!1}]},config:{eventType:"webhook.received",endpoint:"/webhook/marathon",method:"POST",authentication:"token"},status:"idle",category:"triggers",icon:y.A,color:"bg-yellow-500"}],actions:[{id:"create-note",type:"action",title:"Create Note in Notebook",description:"Creates a new note in a specified notebook section",position:{x:0,y:0},ports:{inputs:[{id:"title",type:"input",dataType:"string",connected:!1},{id:"content",type:"input",dataType:"string",connected:!1},{id:"section",type:"input",dataType:"string",connected:!1}],outputs:[{id:"note",type:"output",dataType:"object",connected:!1},{id:"success",type:"output",dataType:"boolean",connected:!1}]},config:{notebookId:"",sectionId:"",defaultTitle:"New Note",tags:[],template:"basic"},status:"idle",category:"actions",icon:j.A,color:"bg-blue-500"},{id:"tag-memory",type:"action",title:"Tag Memory",description:"Adds tags to a memory with dynamic input from prior node",position:{x:0,y:0},ports:{inputs:[{id:"memory",type:"input",dataType:"object",connected:!1},{id:"tags",type:"input",dataType:"array",connected:!1},{id:"metadata",type:"input",dataType:"object",connected:!1}],outputs:[{id:"taggedMemory",type:"output",dataType:"object",connected:!1},{id:"success",type:"output",dataType:"boolean",connected:!1}]},config:{defaultTags:["workflow-generated"],overwriteExisting:!1,tagSource:"dynamic",staticTags:[]},status:"idle",category:"actions",icon:j.A,color:"bg-purple-500"},{id:"send-notification",type:"action",title:"Send Notification",description:"Sends push, email, and in-app notifications",position:{x:0,y:0},ports:{inputs:[{id:"message",type:"input",dataType:"string",connected:!1},{id:"recipients",type:"input",dataType:"array",connected:!1},{id:"metadata",type:"input",dataType:"object",connected:!1}],outputs:[{id:"sent",type:"output",dataType:"object",connected:!1},{id:"failed",type:"output",dataType:"object",connected:!1}]},config:{channels:["push","email","in-app"],priority:"normal",template:"default",schedule:"immediate",retryCount:3},status:"idle",category:"actions",icon:eD.A,color:"bg-red-500"},{id:"action-print",type:"action",title:"Print Message",description:"Outputs a message to the console.",position:{x:100,y:300},ports:{inputs:[{id:"input-1",type:"input",dataType:"String",connected:!1}],outputs:[]},config:{message:"Hello, World!"},status:"idle",category:"actions",icon:y.A,color:"bg-green-500"},{id:"action-api-call",type:"action",title:"API Call",description:"Makes an HTTP request to a specified URL.",position:{x:100,y:400},ports:{inputs:[{id:"input-1",type:"input",dataType:"String",connected:!1}],outputs:[]},config:{url:"https://jsonplaceholder.typicode.com/posts/1",method:"GET"},status:"idle",category:"actions",icon:eD.A,color:"bg-purple-500"}],ai:[{id:"summarize-memory",type:"action",title:"Summarize Memory",description:"Uses AI to generate a summary of memory content",position:{x:0,y:0},ports:{inputs:[{id:"memory",type:"input",dataType:"object",connected:!1},{id:"options",type:"input",dataType:"object",connected:!1}],outputs:[{id:"summary",type:"output",dataType:"string",connected:!1},{id:"metadata",type:"output",dataType:"object",connected:!1}]},config:{llmEngine:"gpt-4",summaryLength:"medium",tone:"neutral",includeKeyPoints:!0,includeEntities:!1},status:"idle",category:"ai",icon:y.A,color:"bg-indigo-500"},{id:"ask-mere",type:"action",title:"Ask Mere",description:"Sends a prompt to Mere AI with chaining support",position:{x:0,y:0},ports:{inputs:[{id:"prompt",type:"input",dataType:"string",connected:!1},{id:"context",type:"input",dataType:"object",connected:!1},{id:"previousResponse",type:"input",dataType:"string",connected:!1}],outputs:[{id:"response",type:"output",dataType:"string",connected:!1},{id:"metadata",type:"output",dataType:"object",connected:!1},{id:"citations",type:"output",dataType:"array",connected:!1}]},config:{model:"gpt-4",temperature:.7,maxTokens:1e3,enableChaining:!0,includeMemoryContext:!0,systemPrompt:""},status:"idle",category:"ai",icon:ex.A,color:"bg-teal-500"},{id:"generate-summary",type:"action",title:"Generate Summary",description:"Creates AI-powered summaries with LLM selection",position:{x:0,y:0},ports:{inputs:[{id:"content",type:"input",dataType:"string",connected:!1},{id:"instructions",type:"input",dataType:"string",connected:!1}],outputs:[{id:"summary",type:"output",dataType:"string",connected:!1},{id:"keyPoints",type:"output",dataType:"array",connected:!1}]},config:{llmEngine:"gpt-4",outputFormat:"paragraph",focusAreas:[],wordLimit:200},status:"idle",category:"ai",icon:y.A,color:"bg-cyan-500"}],data:[{id:"set-variable",type:"data",title:"Set Variable",description:"Stores temporary data for use in the workflow",position:{x:0,y:0},ports:{inputs:[{id:"value",type:"input",dataType:"any",connected:!1},{id:"name",type:"input",dataType:"string",connected:!1}],outputs:[{id:"variable",type:"output",dataType:"any",connected:!1}]},config:{variableName:"",variableType:"string",persistent:!1,scope:"workflow"},status:"idle",category:"data",icon:eM.A,color:"bg-gray-500"},{id:"merge-streams",type:"data",title:"Merge Streams",description:"Combines multiple data streams with field selection",position:{x:0,y:0},ports:{inputs:[{id:"stream1",type:"input",dataType:"object",connected:!1},{id:"stream2",type:"input",dataType:"object",connected:!1},{id:"stream3",type:"input",dataType:"object",connected:!1}],outputs:[{id:"merged",type:"output",dataType:"object",connected:!1}]},config:{mergeStrategy:"combine",fieldMapping:{},conflictResolution:"last-wins",includeMetadata:!0},status:"idle",category:"data",icon:q.A,color:"bg-orange-500"},{id:"filter-by-field",type:"data",title:"Filter By Field",description:"Filters data based on conditional expressions",position:{x:0,y:0},ports:{inputs:[{id:"data",type:"input",dataType:"array",connected:!1},{id:"condition",type:"input",dataType:"string",connected:!1}],outputs:[{id:"filtered",type:"output",dataType:"array",connected:!1},{id:"rejected",type:"output",dataType:"array",connected:!1}]},config:{filterExpression:"",outputRejected:!1,caseSensitive:!0,allowEmpty:!1},status:"idle",category:"data",icon:L.A,color:"bg-yellow-500"}],integrations:[{id:"http-request",type:"action",title:"HTTP Request",description:"Makes HTTP requests to external APIs",position:{x:0,y:0},ports:{inputs:[{id:"url",type:"input",dataType:"string",connected:!1},{id:"method",type:"input",dataType:"string",connected:!1},{id:"headers",type:"input",dataType:"object",connected:!1},{id:"body",type:"input",dataType:"object",connected:!1}],outputs:[{id:"response",type:"output",dataType:"object",connected:!1},{id:"error",type:"output",dataType:"object",connected:!1}]},config:{method:"GET",timeout:3e4,retryCount:3,followRedirects:!0,validateSSL:!0,authentication:{type:"none",credentials:{}}},status:"idle",category:"integrations",icon:y.A,color:"bg-green-600"}],conditions:[{id:"if-else",type:"condition",title:"If/Else",description:"Branch execution based on condition",position:{x:0,y:0},ports:{inputs:[{id:"condition",type:"input",dataType:"boolean",connected:!1},{id:"data",type:"input",dataType:"any",connected:!1}],outputs:[{id:"true",type:"output",dataType:"any",connected:!1},{id:"false",type:"output",dataType:"any",connected:!1}]},config:{condition:"data.value > 10",description:"Branch execution based on condition"},status:"idle",category:"conditions",icon:ev.A,color:"bg-orange-500"},{id:"switch",type:"condition",title:"Switch",description:"Multi-branch execution based on value",position:{x:0,y:0},ports:{inputs:[{id:"value",type:"input",dataType:"any",connected:!1}],outputs:[{id:"case1",type:"output",dataType:"any",connected:!1},{id:"case2",type:"output",dataType:"any",connected:!1},{id:"default",type:"output",dataType:"any",connected:!1}]},config:{cases:[{value:"option1",label:"Case 1"},{value:"option2",label:"Case 2"}],description:"Multi-branch execution based on value"},status:"idle",category:"conditions",icon:ev.A,color:"bg-orange-500"},{id:"for-loop",type:"condition",title:"For Loop",description:"Iterate over array items",position:{x:0,y:0},ports:{inputs:[{id:"array",type:"input",dataType:"array",connected:!1}],outputs:[{id:"item",type:"output",dataType:"any",connected:!1},{id:"complete",type:"output",dataType:"array",connected:!1}]},config:{variable:"item",description:"Iterate over array items"},status:"idle",category:"conditions",icon:q.A,color:"bg-purple-500"},{id:"while-loop",type:"condition",title:"While Loop",description:"Loop while condition is true",position:{x:0,y:0},ports:{inputs:[{id:"condition",type:"input",dataType:"boolean",connected:!1},{id:"data",type:"input",dataType:"any",connected:!1}],outputs:[{id:"loop",type:"output",dataType:"any",connected:!1},{id:"exit",type:"output",dataType:"any",connected:!1}]},config:{condition:"data.count < 10",maxIterations:100,description:"Loop while condition is true"},status:"idle",category:"conditions",icon:q.A,color:"bg-purple-500"}]},[eX,e_]=(0,r.useState)([]),[e$,eZ]=(0,r.useState)(!1),e0=e=>{let t=new Date;if("once"===e.type&&e.datetime)return e.datetime;if("recurring"===e.type&&e.interval)switch(e.interval){case"hourly":default:break;case"daily":return new Date(t.getTime()+864e5);case"weekly":return new Date(t.getTime()+6048e5);case"monthly":return new Date(t.getTime()+2592e6)}return new Date(t.getTime()+36e5)};return(0,r.useEffect)(()=>{let e=setInterval(()=>{let e=new Date;eX.forEach(t=>{t.enabled&&t.nextRun&&t.nextRun<=e&&(eW(),e_(s=>s.map(s=>s.id===t.id?{...s,lastRun:e,nextRun:"recurring"===t.schedule.type?e0(t.schedule):void 0}:s)))})},6e4);return()=>clearInterval(e)},[eX]),(0,a.jsxs)("div",{className:"h-screen flex flex-col bg-gray-100",children:[(0,a.jsx)("div",{className:"bg-white border-b p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Marathon - Visual Workflow Builder"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Create powerful automation flows with drag-and-drop nodes"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Mode:"}),(0,a.jsxs)("select",{value:D,onChange:e=>M(e.target.value),className:"border border-gray-300 rounded px-3 py-1 text-sm",children:[(0,a.jsx)("option",{value:"realtime",children:"Real-time"}),(0,a.jsx)("option",{value:"scheduled",children:"Scheduled"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:eW,disabled:A||0===s.length,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:[(0,a.jsx)(J.A,{className:"h-4 w-4 mr-2"}),A?"Running...":"Run Workflow"]}),(0,a.jsxs)("button",{onClick:()=>eK(),disabled:A||0===s.length,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[(0,a.jsx)(ea.A,{className:"h-4 w-4 mr-2"}),"Test Workflow"]}),(0,a.jsxs)("button",{onClick:()=>G(!V),className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[(0,a.jsx)(eP.A,{className:"h-4 w-4 mr-2"}),"Versions"]}),(0,a.jsxs)("button",{onClick:()=>eo(!el),className:"flex items-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Webhooks"]}),(0,a.jsxs)("button",{onClick:()=>F(!O),className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Logs"]})]})]})]})}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[I&&(0,a.jsxs)("div",{className:"w-80 bg-white border-r overflow-y-auto",children:[(0,a.jsxs)("div",{className:"p-4 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Node Palette"}),(0,a.jsx)("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(U.A,{className:"h-5 w-5"})})]}),(0,a.jsxs)("select",{value:W,onChange:e=>B(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Categories"}),(0,a.jsx)("option",{value:"triggers",children:"Triggers"}),(0,a.jsx)("option",{value:"actions",children:"Actions"}),(0,a.jsx)("option",{value:"conditions",children:"Conditions"}),(0,a.jsx)("option",{value:"data",children:"Data"})]})]}),(0,a.jsx)("div",{className:"p-4 space-y-4",children:Object.entries(eY).map(e=>{let[t,s]=e;return"all"!==W&&W!==t?null:(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2 capitalize",children:t}),(0,a.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,a.jsx)("div",{draggable:!0,onDragStart:t=>{m(e),t.dataTransfer.effectAllowed="copy"},className:"p-3 border border-gray-200 rounded-lg cursor-move hover:bg-gray-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded ".concat(e.color),children:(0,a.jsx)(e.icon,{className:"h-4 w-4 text-white"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-sm text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.description})]})]})},e.id))})]},t)})})]}),(0,a.jsxs)("div",{className:"flex-1 relative overflow-hidden",onMouseMove:e=>{if(ej&&n(t=>t.map(t=>t.id===ej?{...t,position:eO(e.clientX-ew.x,e.clientY-ew.y)}:t)),ey&&eb.current){let t=eb.current.getBoundingClientRect();ef({...ey,toPosition:{x:e.clientX-t.left,y:e.clientY-t.top}})}if(ey&&eb.current){let t=eb.current.getBoundingClientRect();ef({...ey,toPosition:{x:e.clientX-t.left,y:e.clientY-t.top}})}},onMouseUp:()=>{eN(null)},onClick:()=>{ef(null)},children:[(0,a.jsxs)("div",{ref:eb,className:"w-full h-full bg-gray-50 relative cursor-grab",onDrop:e=>{if(e.preventDefault(),d){let t=eb.current.getBoundingClientRect(),s=eO(e.clientX-t.left,e.clientY-t.top),a={...d,id:"".concat(d.id,"-").concat(Date.now()),position:{x:(s.x-b.x)/h,y:(s.y-b.y)/h},ports:{inputs:d.ports.inputs.map(e=>({...e,id:"".concat(e.id,"-").concat(Date.now())})),outputs:d.ports.outputs.map(e=>({...e,id:"".concat(e.id,"-").concat(Date.now())}))}};n(e=>[...e,a]),m(null)}},onDragOver:e=>e.preventDefault(),onMouseDown:e=>{var t,s;(1===e.button||0===e.button&&e.altKey)&&(t=e.clientX,s=e.clientY,N(!0),k({x:t-b.x,y:s-b.y}))},onMouseMove:e=>{var t,s;return t=e.clientX,s=e.clientY,void(v&&f({x:t-w.x,y:s-w.y}))},onMouseUp:()=>{N(!1)},onWheel:e=>{e.preventDefault(),((e,t,s)=>{if(!eb.current)return;let a=eb.current.getBoundingClientRect(),r=t-a.left,n=s-a.top,i=Math.max(.1,Math.min(3,h+.1*e)),l=i/h;g(i),f({x:r-(r-b.x)*l,y:n-(n-b.y)*l})})(-e.deltaY/1e3,e.clientX,e.clientY)},style:{transform:"translate(".concat(b.x,"px, ").concat(b.y,"px) scale(").concat(h,")"),transformOrigin:"0 0"},children:[(0,a.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{transform:"translate(".concat(b.x,"px, ").concat(b.y,"px) scale(").concat(h,")")},children:[(0,a.jsx)("defs",{children:(0,a.jsx)("pattern",{id:"grid",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:(0,a.jsx)("path",{d:"M 20 0 L 0 0 0 20",fill:"none",stroke:"#e5e7eb",strokeWidth:"1"})})}),(0,a.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]}),s.map(e=>(0,a.jsxs)("div",{id:"node-".concat(e.id),className:"absolute bg-white border-2 rounded-lg shadow-sm cursor-pointer transition-all ".concat(o===e.id?"border-blue-500 shadow-lg":"border-gray-200"," ").concat("running"===e.status?"animate-pulse":""),style:{left:e.position.x,top:e.position.y,width:200,minHeight:80,zIndex:ej===e.id?10:1},onClick:()=>c(e.id),onMouseDown:t=>((e,t)=>{t.stopPropagation();let a=s.find(t=>t.id===e);a&&(eN(e),ek({x:t.clientX-a.position.x,y:t.clientY-a.position.y}))})(e.id,t),children:[(0,a.jsx)("div",{className:"p-3 rounded-t-lg ".concat(e.color," text-white"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(e.icon,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:e.title})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:["running"===e.status&&(0,a.jsx)("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),"success"===e.status&&(0,a.jsx)(ea.A,{className:"h-4 w-4 text-green-400"}),"error"===e.status&&(0,a.jsx)(U.A,{className:"h-4 w-4 text-red-400"})]})]})}),(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 mb-3",children:e.description}),e.ports.inputs.length>0&&(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Inputs:"}),e.ports.inputs.map(t=>(0,a.jsxs)("div",{id:"port-".concat(t.id),className:"flex items-center text-xs text-gray-600 mb-1",onMouseUp:ey?a=>{var r,i;return r=e.id,i=t.id,void(a.stopPropagation(),ey&&(((e,t,a,r)=>{let i=s.find(t=>t.id===e),o=s.find(e=>e.id===a);if(!i||!o)return;let c=[...i.ports.inputs,...i.ports.outputs].find(e=>e.id===t),d=[...o.ports.inputs,...o.ports.outputs].find(e=>e.id===r);if(!c||!d)return;if(c.type===d.type||"input"===d.type&&d.connected||"any"!==c.dataType&&"any"!==d.dataType&&c.dataType!==d.dataType)return console.warn("Invalid connection attempt:",{fromPort:c,toPort:d});let m={id:"".concat(e,"-").concat(t,"-").concat(a,"-").concat(r),sourceNodeId:e,sourcePortId:t,targetNodeId:a,targetPortId:r,dataType:c.dataType};n(s=>s.map(s=>s.id===e?{...s,ports:{...s.ports,outputs:s.ports.outputs.map(e=>e.id===t?{...e,connected:!0}:e)}}:s.id===a?{...s,ports:{...s.ports,inputs:s.ports.inputs.map(e=>e.id===r?{...e,connected:!0}:e)}}:s)),l(e=>[...e,m]),eE()})(ey.fromNodeId,ey.fromPortId,r,i),ef(null)))}:void 0,style:{cursor:ey?"pointer":"default"},children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 border-2 ".concat(t.connected?"bg-green-500 border-green-700":"bg-gray-300 border-gray-400")}),t.dataType]},t.id))]}),e.ports.outputs.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Outputs:"}),e.ports.outputs.map(t=>(0,a.jsxs)("div",{id:"port-".concat(t.id),className:"flex items-center text-xs text-gray-600 mb-1",onMouseDown:a=>((e,t,a)=>{a.stopPropagation();let r=s.find(t=>t.id===e);if(!r)return;let n=ez(r,t,"output");ef({fromNodeId:e,fromPortId:t,fromPosition:n,toPosition:n})})(e.id,t.id,a),style:{cursor:"crosshair"},children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 border-2 ".concat(t.connected?"bg-green-500 border-green-700":"bg-gray-300 border-gray-400")}),t.dataType]},t.id))]})]})]},e.id)),(0,a.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{zIndex:0},children:[i.map(e=>{let t=s.find(t=>t.id===e.sourceNodeId),r=s.find(t=>t.id===e.targetNodeId);if(!t||!r)return null;let n=t.ports.outputs.find(t=>t.id===e.sourcePortId),i=r.ports.inputs.find(t=>t.id===e.targetPortId);if(!n||!i)return null;let l=ez(t,n.id,"output"),o=ez(r,i.id,"input"),c="M".concat(l.x,",").concat(l.y," C").concat(l.x+50,",").concat(l.y," ").concat(o.x-50,",").concat(o.y," ").concat(o.x,",").concat(o.y);return(0,a.jsx)("path",{d:c,stroke:"#6366f1",strokeWidth:3,fill:"none",markerEnd:"url(#arrowhead)"},e.id)}),(0,a.jsx)("defs",{children:(0,a.jsx)("marker",{id:"arrowhead",markerWidth:"8",markerHeight:"8",refX:"8",refY:"4",orient:"auto",markerUnits:"strokeWidth",children:(0,a.jsx)("path",{d:"M0,0 L8,4 L0,8 Z",fill:"#6366f1"})})}),ey&&(0,a.jsx)("path",{d:"M".concat(ey.fromPosition.x,",").concat(ey.fromPosition.y," C").concat(ey.fromPosition.x+50,",").concat(ey.fromPosition.y," ").concat(ey.toPosition.x-50,",").concat(ey.toPosition.y," ").concat(ey.toPosition.x,",").concat(ey.toPosition.y),stroke:"#6366f1",strokeWidth:2,fill:"none",strokeDasharray:"4 2"})]})]}),(0,a.jsxs)("div",{className:"absolute bottom-4 right-4 flex flex-col space-y-2",children:[(0,a.jsx)("button",{onClick:()=>g(1),className:"px-3 py-2 bg-white border border-gray-300 rounded shadow text-sm hover:bg-gray-50",children:"Reset Zoom"}),(0,a.jsxs)("button",{onClick:()=>E(!I),className:"px-3 py-2 bg-white border border-gray-300 rounded shadow text-sm hover:bg-gray-50",children:[I?"Hide":"Show"," Palette"]})]}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-4 px-3 py-2 bg-white border border-gray-300 rounded shadow text-sm",children:[Math.round(100*h),"%"]})]})]}),O&&C&&(0,a.jsxs)("div",{className:"bg-white border-t p-4 max-h-64 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Execution Log"}),(0,a.jsx)("button",{onClick:()=>F(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(U.A,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b",children:[(0,a.jsxs)("span",{children:["Status: ",(0,a.jsx)("span",{className:"font-medium ".concat("completed"===C.status?"text-green-600":"failed"===C.status?"text-red-600":"running"===C.status?"text-blue-600":"text-gray-600"),children:C.status})]}),(0,a.jsxs)("span",{children:["Duration: ",C.endTime?"".concat(Math.round((C.endTime.getTime()-C.startTime.getTime())/1e3),"s"):"Running..."]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium text-gray-700",children:["Executed Nodes: ",C.executedNodes.length]}),C.errors.map((e,t)=>(0,a.jsxs)("div",{className:"text-red-600 text-xs mt-1",children:["Node ",e.nodeId,": ",e.message]},t))]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsxs)("button",{onClick:eW,disabled:A,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50",children:[(0,a.jsx)(J.A,{className:"w-4 h-4"}),A?"Running...":"Run Workflow"]}),(0,a.jsxs)("button",{onClick:()=>eZ(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[(0,a.jsx)(z.A,{className:"w-4 h-4"}),"Schedule"]}),eX.length>0&&(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[eX.filter(e=>e.enabled).length," scheduled"]})]}),e$&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg w-96",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Schedule Workflow"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Schedule Type"}),(0,a.jsxs)("select",{className:"w-full p-2 border rounded",children:[(0,a.jsx)("option",{value:"once",children:"Run Once"}),(0,a.jsx)("option",{value:"recurring",children:"Recurring"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Interval"}),(0,a.jsxs)("select",{className:"w-full p-2 border rounded",children:[(0,a.jsx)("option",{value:"hourly",children:"Hourly"}),(0,a.jsx)("option",{value:"daily",children:"Daily"}),(0,a.jsx)("option",{value:"weekly",children:"Weekly"}),(0,a.jsx)("option",{value:"monthly",children:"Monthly"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>(e=>{let t={id:"schedule-".concat(Date.now()),name:"Workflow Schedule ".concat(eX.length+1),schedule:e,enabled:!0,nextRun:e0(e)};e_(e=>[...e,t]),eZ(!1)})({type:"recurring",interval:"daily"}),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Schedule"}),(0,a.jsx)("button",{onClick:()=>eZ(!1),className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"})]})]})]})}),eX.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Scheduled Workflows"}),(0,a.jsx)("div",{className:"space-y-2",children:eX.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[e.schedule.type," - ",e.schedule.interval,e.nextRun&&" (Next: ".concat(e.nextRun.toLocaleString(),")")]})]}),(0,a.jsx)("button",{onClick:()=>e_(t=>t.filter(t=>t.id!==e.id)),className:"text-red-500 hover:text-red-700",children:(0,a.jsx)(U.A,{className:"w-4 h-4"})})]},e.id))})]}),eC&&(0,a.jsxs)("div",{className:"fixed top-0 right-0 w-96 h-full bg-white shadow-lg z-50 p-6 flex flex-col",children:[(0,a.jsx)("button",{className:"self-end text-gray-400 hover:text-gray-700",onClick:()=>eS(null),children:"\xd7"}),(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Node Configuration"}),(()=>{let e=s.find(e=>e.id===eC);return e?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Label"}),(0,a.jsx)("input",{className:"mt-1 block w-full border rounded px-2 py-1",value:e.title||"",onChange:t=>eL(e.id,{title:t.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Description"}),(0,a.jsx)("input",{className:"mt-1 block w-full border rounded px-2 py-1",value:e.description||"",onChange:t=>eL(e.id,{description:t.target.value})})]}),e.config&&Object.keys(e.config).map(t=>(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:t}),(0,a.jsx)("input",{className:"mt-1 block w-full border rounded px-2 py-1",value:e.config[t],onChange:s=>eL(e.id,{config:{...e.config,[t]:s.target.value}})})]},t))]}):(0,a.jsx)("div",{children:"Node not found"})})()]}),V&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-h-96 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:"Version History"}),(0,a.jsx)("button",{onClick:()=>G(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(U.A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Version description",className:"flex-1 border border-gray-300 rounded px-3 py-2",id:"version-description"}),(0,a.jsx)("button",{onClick:()=>{var e;eG((null==(e=document.getElementById("version-description"))?void 0:e.value)||"New version",!0)},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Create Version"})]}),(0,a.jsx)("div",{className:"space-y-2",children:ec.versionHistory.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:["v",e.version]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.description}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.timestamp.toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[e.isRollbackPoint&&(0,a.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Rollback Point"}),(0,a.jsx)("button",{onClick:()=>(e=>{let t=ec.versionHistory.find(t=>t.id===e);t&&(n([...t.nodes]),l([...t.connections]),ed(e=>({...e,version:t.version,updatedAt:new Date})),K(t.version))})(e.id),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Rollback"})]})]},e.id))})]})]})}),$&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-h-96 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:"Test Results"}),(0,a.jsx)("button",{onClick:()=>Z(null),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(U.A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-3 rounded ".concat($.success?"bg-green-100":"bg-red-100"),children:[(0,a.jsx)("div",{className:"font-medium",children:$.success?"Test Passed":"Test Failed"}),$.duration&&(0,a.jsxs)("div",{className:"text-sm",children:["Duration: ",$.duration,"ms"]}),$.error&&(0,a.jsx)("div",{className:"text-sm text-red-600",children:$.error})]}),$.input&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium mb-2",children:"Input:"}),(0,a.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-sm overflow-x-auto",children:JSON.stringify($.input,null,2)})]}),$.output&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium mb-2",children:"Output:"}),(0,a.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-sm overflow-x-auto",children:JSON.stringify($.output,null,2)})]})]})]})}),el&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-h-96 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:"Webhook Endpoints"}),(0,a.jsx)("button",{onClick:()=>eo(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(U.A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("button",{onClick:()=>{eQ((e=>{let t={...e,id:"webhook-".concat(Date.now()),triggerCount:0};return ei(e=>[...e,t]),t})({name:"New Webhook",url:"https://api.example.com/webhook",method:"POST",headers:{},enabled:!0}).id,{test:!0,timestamp:Date.now()})},className:"w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Create Test Webhook"}),(0,a.jsx)("div",{className:"space-y-2",children:en.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.url}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.method," • ",e.triggerCount," triggers",e.lastTriggered&&" • Last: ".concat(e.lastTriggered.toLocaleString())]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>eQ(e.id,{test:!0,timestamp:Date.now()}),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Test"}),(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void ei(e=>e.filter(e=>e.id!==t))},className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]},e.id))})]})]})}),O&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-h-96 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:"Execution Logs"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("select",{value:es,onChange:e=>er(e.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[(0,a.jsx)("option",{value:"info",children:"Info"}),(0,a.jsx)("option",{value:"warning",children:"Warning"}),(0,a.jsx)("option",{value:"error",children:"Error"}),(0,a.jsx)("option",{value:"debug",children:"Debug"})]}),(0,a.jsx)("button",{onClick:()=>{et([])},className:"text-red-600 hover:text-red-800 text-sm",children:"Clear"}),(0,a.jsx)("button",{onClick:()=>{let e=new Blob([JSON.stringify(ee.map(e=>({...e,timestamp:e.timestamp.toISOString()})),null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="workflow-logs-".concat(Date.now(),".json"),s.click(),URL.revokeObjectURL(t)},className:"text-blue-600 hover:text-blue-800 text-sm",children:"Export"}),(0,a.jsx)("button",{onClick:()=>F(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(U.A,{className:"w-5 h-5"})})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:ee.filter(e=>"info"===es||e.level===es).map(e=>(0,a.jsxs)("div",{className:"p-2 rounded text-sm ".concat("error"===e.level?"bg-red-100":"warning"===e.level?"bg-yellow-100":"debug"===e.level?"bg-gray-100":"bg-blue-100"),children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:e.message}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp.toLocaleTimeString()})]}),e.data&&(0,a.jsx)("pre",{className:"text-xs mt-1 overflow-x-auto",children:JSON.stringify(e.data,null,2)})]},e.id))})]})}),(0,a.jsxs)("div",{className:"bg-white border-t p-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[s.length," nodes • ",i.length," connections • ",(null==C?void 0:C.executedNodes.length)||0," executed"]}),(0,a.jsxs)("button",{onClick:()=>{t({totalNodes:s.length,totalConnections:i.length,hasExecuted:null!==C,executionMode:D}),e()},className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,a.jsx)(ea.A,{className:"h-4 w-4 mr-2"}),"Complete Workflow"]})]})]})}function eI(){let{startWorkflow:e,currentWorkflow:t}=(0,u.j)(),[s,n]=(0,r.useState)(null),i=[{id:"memory-creation",title:"Create Memory",description:"Build memory from transcription + summarization in one flow",icon:j.A,color:"bg-blue-500",steps:[{id:"input",title:"Capture Content",description:"Add your content via text or voice"},{id:"transcription",title:"Process Audio",description:"Converting audio to text",aiAssisted:!0},{id:"summarization",title:"Generate Summary",description:"AI-powered content summarization",aiAssisted:!0},{id:"tagging",title:"Add Tags",description:"Organize with smart tags"}]},{id:"notebook-creation",title:"Create Notebook",description:"Organize notes and memories into structured notebooks",icon:b.A,color:"bg-green-500",steps:[{id:"notebook-creation",title:"Create Notebook",description:"Set up your new notebook with templates and organization",component:(0,a.jsx)(eo,{})}]},{id:"voice-note",title:"Voice Note",description:"Record and transcribe voice notes instantly",icon:f.A,color:"bg-purple-500",steps:[{id:"voice-workflow",title:"Voice Note Creation",description:"Record, transcribe and enhance voice notes instantly",component:(0,a.jsx)(ep,{}),aiAssisted:!0}]},{id:"voice-transcription",title:"Real-time Voice Transcription",description:"Advanced live transcription with Whisper, speaker detection, and export",icon:T.A,color:"bg-green-500",steps:[{id:"transcription-workflow",title:"Voice Transcription",description:"Real-time transcription with AI speaker identification",component:(0,a.jsx)(ej,{}),aiAssisted:!0}]},{id:"file-processing",title:"File Processing",description:"Upload and auto-parse files into memories (PDF, Word, audio, video)",icon:D.A,color:"bg-orange-500",steps:[{id:"upload",title:"Upload Files",description:"Drag and drop or select files to upload",component:(0,a.jsx)(er,{})}]},{id:"flashcard-creation",title:"Create Flashcards",description:"Convert notes to flashcards and study materials in ≤3 steps",icon:M.A,color:"bg-purple-500",steps:[{id:"flashcard-workflow",title:"Create Study Set",description:"Build flashcards from content or create manually",component:(0,a.jsx)(ed,{}),aiAssisted:!0}]},{id:"knowledge-upload",title:"Knowledge Upload",description:"Upload PDFs, docs, and notes as searchable knowledge sources",icon:b.A,color:"bg-indigo-500",steps:[{id:"knowledge-workflow",title:"Upload Knowledge Sources",description:"Create searchable knowledge base from documents",component:(0,a.jsx)(eg,{}),aiAssisted:!0}]},{id:"semantic-research",title:"Semantic Research & Q&A",description:"NotebookLM-style research with multi-file Q&A, citations, and AI analysis",icon:P.A,color:"bg-purple-500",steps:[{id:"junction-workflow",title:"Semantic Research Session",description:"Upload documents and ask AI questions with precise citations",component:(0,a.jsx)(eC,{}),aiAssisted:!0}]},{id:"error-demo",title:"Error Handling Demo",description:"Showcase error recovery with retry, rollback, and exit options",icon:R.A,color:"bg-red-500",steps:[{id:"demo",title:"Error Demo",description:"Simulate different error scenarios",component:(0,a.jsx)($,{})},{id:"recovery",title:"Recovery Success",description:"Workflow completed successfully"}]},{id:"mere-assistant",title:"Mere AI Assistant",description:"Chat with your intelligent AI assistant with memory awareness and app integration",icon:I.A,color:"bg-blue-500",steps:[{id:"mere-chat",title:"AI Chat Session",description:"Intelligent conversation with memory context and workflow integration",component:(0,a.jsx)(eT,{}),aiAssisted:!0}]},{id:"memory-chain",title:"Memory Chain Generation",description:"Create reasoning flows in ≤ 4 actions with AI assistance",icon:E.A,color:"bg-indigo-500",steps:[{id:"chain-builder",title:"Build Memory Chain",description:"Connect memories to create reasoning flows",component:(0,a.jsx)(Z,{}),aiAssisted:!0}]},{id:"marathon-builder",title:"Marathon Workflow Builder",description:"Visual automation platform with drag-and-drop nodes, triggers, and execution",icon:L.A,color:"bg-indigo-500",steps:[{id:"workflow-builder",title:"Visual Workflow Builder",description:"Create automation flows with drag-and-drop interface",component:(0,a.jsx)(eR,{}),aiAssisted:!0}]}],l=t=>{e(t.id,t.title,t.steps)};return t?(0,a.jsx)("div",{className:"min-h-screen overflow-y-auto p-6",children:(0,a.jsx)(Y,{})}):(0,a.jsxs)("div",{className:"min-h-screen overflow-y-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Ntu Workflows"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"AI-powered workflows for seamless productivity and memory management"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Quick Start"}),(0,a.jsx)("p",{className:"mb-4 opacity-90",children:"Complete any common task in ≤ 3 steps with auto-save progress and AI assistance"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>l(i[0]),className:"bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors",children:"Create Memory"}),(0,a.jsx)("button",{onClick:()=>l(i[2]),className:"bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors",children:"Voice Note"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Available Workflows"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>l(e),children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"".concat(e.color," p-3 rounded-lg"),children:(0,a.jsx)(e.icon,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500 mb-2",children:[e.steps.length," steps • ",e.steps.filter(e=>e.aiAssisted).length," AI-assisted"]}),(0,a.jsxs)("div",{className:"space-y-1",children:[e.steps.slice(0,3).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-gray-100 rounded-full flex items-center justify-center text-xs",children:t+1}),(0,a.jsx)("span",{className:"text-gray-600",children:e.title}),e.aiAssisted&&(0,a.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-1 rounded",children:"AI"})]},e.id)),e.steps.length>3&&(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["+",e.steps.length-3," more steps"]})]})]}),(0,a.jsxs)("button",{className:"w-full mt-4 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(w.A,{className:"h-4 w-4"}),"Start Workflow"]})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Workflow Features"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,a.jsx)("span",{className:"text-green-600 font-semibold",children:"3"})}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"3-Step Completion"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Complete any common task in 3 steps or less"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,a.jsx)("span",{className:"text-blue-600 font-semibold",children:"\uD83D\uDCBE"})}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Auto-Save"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Progress automatically saved at each step"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,a.jsx)("span",{className:"text-purple-600 font-semibold",children:"\uD83E\uDD16"})}),(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"AI Assistance"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Mere helps with complex processing steps"})]})]})]})]})}function eE(){let[e,t]=(0,r.useState)("dashboard"),{currentWorkflow:s}=(0,u.j)();return s?(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,a.jsx)(A,{onViewChange:t,currentView:e}),(0,a.jsx)("main",{className:"flex-1 overflow-hidden",children:(0,a.jsxs)("div",{className:"flex h-full",children:[(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsx)(eI,{})}),(0,a.jsx)("div",{className:"w-96 border-l",children:(0,a.jsx)(x,{})})]})})]}):(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,a.jsx)(A,{onViewChange:t,currentView:e}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto",children:"dashboard"===e?(0,a.jsx)(eI,{}):(0,a.jsx)(x,{})})]})}}},e=>{e.O(0,[260,33,441,964,358],()=>e(e.s=223)),_N_E=e.O()}]);